{
  "name": "aws-iot-device-sdk-cpp-v2",
  "!cmake_args": [
    "-DBUILD_DEPS=ON",
    "-DPERFORM_HEADER_CHECK=OFF",
    "-DS2N_NO_PQ_ASM=ON"
  ],
  "targets": {
    "linux": {
      "imports": [
        "s2n"
      ]
    }
  },
  "search_dirs": [
    "crt"
  ],
  "hosts": {
    "manylinux": {
      "architectures": {
        "x86": {
          "!yum_compiler_packages": []
        }
      }
    }
  },
  "build_steps": [
    "build",
    [
      "mkdir",
      "build_basic_pubsub"
    ],
    [
      "cmake",
      "-Bbuild_basic_pubsub",
      "-Hsamples/mqtt/basic_pub_sub/",
      "-DCMAKE_INSTALL_PREFIX={install_dir}",
      "-DCMAKE_PREFIX_PATH={install_dir}",
      "-DCMAKE_BUILD_TYPE=Release",
      "-DLibCrypto_INCLUDE_DIR={deps_dir}/libcrypto/include",
      "-DLibCrypto_SHARED_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.so",
      "-DLibCrypto_STATIC_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.a"
    ],
    [
      "cmake",
      "--build",
      "build_basic_pubsub",
      "--config",
      "Release"
    ],
    [
      "mkdir",
      "build_raw_pubsub"
    ],
    [
      "cmake",
      "-Bbuild_raw_pubsub",
      "-Hsamples/mqtt/raw_pub_sub/",
      "-DCMAKE_INSTALL_PREFIX={install_dir}",
      "-DCMAKE_PREFIX_PATH={install_dir}",
      "-DCMAKE_BUILD_TYPE=Release",
      "-DLibCrypto_INCLUDE_DIR={deps_dir}/libcrypto/include",
      "-DLibCrypto_SHARED_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.so",
      "-DLibCrypto_STATIC_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.a"
    ],
    [
      "cmake",
      "--build",
      "build_raw_pubsub",
      "--config",
      "Release"
    ],
    [
      "mkdir",
      "build_shadow"
    ],
    [
      "cmake",
      "-Bbuild_shadow",
      "-Hsamples/shadow/shadow_sync/",
      "-DCMAKE_INSTALL_PREFIX={install_dir}",
      "-DCMAKE_PREFIX_PATH={install_dir}",
      "-DCMAKE_BUILD_TYPE=Release",
      "-DLibCrypto_INCLUDE_DIR={deps_dir}/libcrypto/include",
      "-DLibCrypto_SHARED_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.so",
      "-DLibCrypto_STATIC_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.a"
    ],
    [
      "cmake",
      "--build",
      "build_shadow",
      "--config",
      "Release"
    ],
    [
      "mkdir",
      "build_greengrass"
    ],
    [
      "cmake",
      "-Bbuild_greengrass",
      "-Hsamples/greengrass/basic_discovery/",
      "-DCMAKE_INSTALL_PREFIX={install_dir}",
      "-DCMAKE_PREFIX_PATH={install_dir}",
      "-DCMAKE_BUILD_TYPE=Release",
      "-DLibCrypto_INCLUDE_DIR={deps_dir}/libcrypto/include",
      "-DLibCrypto_SHARED_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.so",
      "-DLibCrypto_STATIC_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.a"
    ],
    [
      "cmake",
      "--build",
      "build_greengrass",
      "--config",
      "Release"
    ],
    [
      "mkdir",
      "build_identity"
    ],
    [
      "cmake",
      "-Bbuild_identity",
      "-Hsamples/identity/fleet_provisioning/",
      "-DCMAKE_INSTALL_PREFIX={install_dir}",
      "-DCMAKE_PREFIX_PATH={install_dir}",
      "-DCMAKE_BUILD_TYPE=Release",
      "-DLibCrypto_INCLUDE_DIR={deps_dir}/libcrypto/include",
      "-DLibCrypto_SHARED_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.so",
      "-DLibCrypto_STATIC_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.a"
    ],
    [
      "cmake",
      "--build",
      "build_identity",
      "--config",
      "Release"
    ],
    [
      "mkdir",
      "build_jobs"
    ],
    [
      "cmake",
      "-Bbuild_jobs",
      "-Hsamples/jobs/describe_job_execution/",
      "-DCMAKE_INSTALL_PREFIX={install_dir}",
      "-DCMAKE_PREFIX_PATH={install_dir}",
      "-DCMAKE_BUILD_TYPE=Release",
      "-DLibCrypto_INCLUDE_DIR={deps_dir}/libcrypto/include",
      "-DLibCrypto_SHARED_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.so",
      "-DLibCrypto_STATIC_LIBRARY={deps_dir}/libcrypto/lib/libcrypto.a"
    ],
    [
      "cmake",
      "--build",
      "build_jobs",
      "--config",
      "Release"
    ]
  ]
}
