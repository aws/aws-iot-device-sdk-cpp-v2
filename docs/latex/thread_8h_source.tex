\hypertarget{thread_8h_source}{}\doxysection{thread.\+h}
\label{thread_8h_source}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/common/include/aws/common/thread.h@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/common/include/aws/common/thread.h}}
\mbox{\hyperlink{thread_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef AWS\_COMMON\_THREAD\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define AWS\_COMMON\_THREAD\_H}}
\DoxyCodeLine{3 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2common_8h}{aws/common/common.h}}>}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#ifndef \_WIN32}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#    include <pthread.h>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{keyword}{enum} \mbox{\hyperlink{thread_8h_aec4a7069355037fe99a94a83bdcf1cdc}{aws\_thread\_detach\_state}} \{}
\DoxyCodeLine{15     \mbox{\hyperlink{thread_8h_aec4a7069355037fe99a94a83bdcf1cdca4c67583011b87fb071a0d20909ce89cd}{AWS\_THREAD\_NOT\_CREATED}} = 1,}
\DoxyCodeLine{16     \mbox{\hyperlink{thread_8h_aec4a7069355037fe99a94a83bdcf1cdca720a4db701477bdb49d9e646ae1023c8}{AWS\_THREAD\_JOINABLE}},}
\DoxyCodeLine{17     \mbox{\hyperlink{thread_8h_aec4a7069355037fe99a94a83bdcf1cdca592d9eb042cb605a283b897442713511}{AWS\_THREAD\_JOIN\_COMPLETED}},}
\DoxyCodeLine{18     \mbox{\hyperlink{thread_8h_aec4a7069355037fe99a94a83bdcf1cdca14decd6ca3bd5bd11380ce0904e55960}{AWS\_THREAD\_MANAGED}},}
\DoxyCodeLine{19 \};}
\DoxyCodeLine{20 }
\DoxyCodeLine{48 \textcolor{keyword}{enum} \mbox{\hyperlink{thread_8h_a16ac4f7b945616df65e6bafb95e8a6b5}{aws\_thread\_join\_strategy}} \{}
\DoxyCodeLine{49     \mbox{\hyperlink{thread_8h_a16ac4f7b945616df65e6bafb95e8a6b5a6842ef9134acfa0a45bf15e168a00f33}{AWS\_TJS\_MANUAL}} = 0,}
\DoxyCodeLine{50     \mbox{\hyperlink{thread_8h_a16ac4f7b945616df65e6bafb95e8a6b5a54080aeed3c7ac9b0bf9b73a45644dc0}{AWS\_TJS\_MANAGED}},}
\DoxyCodeLine{51 \};}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__thread__options}{aws\_thread\_options}} \{}
\DoxyCodeLine{54     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structaws__thread__options_a99271d3b838cd3686f5f7a795d0b0ac9}{stack\_size}};}
\DoxyCodeLine{55     \textcolor{comment}{/* default is -\/1. If you set this to anything >= 0, and the platform supports it, the thread will be pinned to}}
\DoxyCodeLine{56 \textcolor{comment}{     * that cpu. Also, we assume you're doing this for memory throughput purposes. On unix systems,}}
\DoxyCodeLine{57 \textcolor{comment}{     * If libnuma.so is available, upon the thread launching, the memory policy for that thread will be set to}}
\DoxyCodeLine{58 \textcolor{comment}{     * allocate on the numa node that cpu-\/core is on.}}
\DoxyCodeLine{59 \textcolor{comment}{     *}}
\DoxyCodeLine{60 \textcolor{comment}{     * On windows, this will cause the thread affinity to be set, but currently we don't do anything to tell the OS}}
\DoxyCodeLine{61 \textcolor{comment}{     * how to allocate memory on a node.}}
\DoxyCodeLine{62 \textcolor{comment}{     *}}
\DoxyCodeLine{63 \textcolor{comment}{     * On Apple and Android platforms, this setting doesn't do anything at all.}}
\DoxyCodeLine{64 \textcolor{comment}{     */}}
\DoxyCodeLine{65     int32\_t \mbox{\hyperlink{structaws__thread__options_a816a49daec4c1c2b9a44dad22b40849d}{cpu\_id}};}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{keyword}{enum} \mbox{\hyperlink{thread_8h_a16ac4f7b945616df65e6bafb95e8a6b5}{aws\_thread\_join\_strategy}} \mbox{\hyperlink{structaws__thread__options_aa34f4828e8ad37008c1d3f8c2c525141}{join\_strategy}};}
\DoxyCodeLine{68 \};}
\DoxyCodeLine{69 }
\DoxyCodeLine{70 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{71 \textcolor{keyword}{typedef} \textcolor{keyword}{union }\{}
\DoxyCodeLine{72     \textcolor{keywordtype}{void} *ptr;}
\DoxyCodeLine{73 \} \mbox{\hyperlink{thread_8h_a579092dc6d13c980765a1a4c2f95879a}{aws\_thread\_once}};}
\DoxyCodeLine{74 \textcolor{preprocessor}{\#    define AWS\_THREAD\_ONCE\_STATIC\_INIT                                                                                \(\backslash\)}}
\DoxyCodeLine{75 \textcolor{preprocessor}{        \{ NULL \}}}
\DoxyCodeLine{76 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \mbox{\hyperlink{thread_8h_a9ff84a0781fdcab710b0fa5e0a84d046}{aws\_thread\_id\_t}};}
\DoxyCodeLine{77 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{78 \textcolor{keyword}{typedef} pthread\_once\_t \mbox{\hyperlink{thread_8h_a579092dc6d13c980765a1a4c2f95879a}{aws\_thread\_once}};}
\DoxyCodeLine{79 \textcolor{preprocessor}{\#    define AWS\_THREAD\_ONCE\_STATIC\_INIT PTHREAD\_ONCE\_INIT}}
\DoxyCodeLine{80 \textcolor{keyword}{typedef} pthread\_t \mbox{\hyperlink{thread_8h_a9ff84a0781fdcab710b0fa5e0a84d046}{aws\_thread\_id\_t}};}
\DoxyCodeLine{81 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83 \textcolor{comment}{/*}}
\DoxyCodeLine{84 \textcolor{comment}{ * Buffer size needed to represent aws\_thread\_id\_t as a string (2 hex chars per byte}}
\DoxyCodeLine{85 \textcolor{comment}{ * plus '\(\backslash\)0' terminator). Needed for portable printing because pthread\_t is}}
\DoxyCodeLine{86 \textcolor{comment}{ * opaque.}}
\DoxyCodeLine{87 \textcolor{comment}{ */}}
\DoxyCodeLine{88 \textcolor{preprocessor}{\#define AWS\_THREAD\_ID\_T\_REPR\_BUFSZ (sizeof(aws\_thread\_id\_t) * 2 + 1)}}
\DoxyCodeLine{89 }
\DoxyCodeLine{90 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__thread}{aws\_thread}} \{}
\DoxyCodeLine{91     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{structaws__thread_acf4c572979f9b0eb817f9e5d3fe35a3e}{allocator}};}
\DoxyCodeLine{92     \textcolor{keyword}{enum} \mbox{\hyperlink{thread_8h_aec4a7069355037fe99a94a83bdcf1cdc}{aws\_thread\_detach\_state}} \mbox{\hyperlink{structaws__thread_a3a9092306d47358602b0b16342c98a22}{detach\_state}};}
\DoxyCodeLine{93 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{94     \textcolor{keywordtype}{void} *thread\_handle;}
\DoxyCodeLine{95 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{96     \mbox{\hyperlink{thread_8h_a9ff84a0781fdcab710b0fa5e0a84d046}{aws\_thread\_id\_t}} \mbox{\hyperlink{structaws__thread_accfb34e142b15f3714174c51e4684016}{thread\_id}};}
\DoxyCodeLine{97 \};}
\DoxyCodeLine{98 }
\DoxyCodeLine{99 \mbox{\hyperlink{macros_8h_ab6f66af8231eba5da061b9ada0d29bad}{AWS\_EXTERN\_C\_BEGIN}}}
\DoxyCodeLine{100 }
\DoxyCodeLine{104 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{105 \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__thread__options}{aws\_thread\_options}} *\mbox{\hyperlink{thread_8h_a393cb909ab896d3bc93f3db1d820b818}{aws\_default\_thread\_options}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{106 }
\DoxyCodeLine{107 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}} \textcolor{keywordtype}{void} \mbox{\hyperlink{thread_8h_a22b23eae89a5c94f95dca6e6db1accc2}{aws\_thread\_call\_once}}(\mbox{\hyperlink{thread_8h_a579092dc6d13c980765a1a4c2f95879a}{aws\_thread\_once}} *flag, \textcolor{keywordtype}{void} (*call\_once)(\textcolor{keywordtype}{void} *), \textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{108 }
\DoxyCodeLine{113 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{114 \textcolor{keywordtype}{int} \mbox{\hyperlink{thread_8h_afd023fdb173f9f30b73c1a7836692169}{aws\_thread\_init}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__thread}{aws\_thread}} *thread, \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *allocator);}
\DoxyCodeLine{115 }
\DoxyCodeLine{121 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{122 \textcolor{keywordtype}{int} \mbox{\hyperlink{thread_8h_af4fab02896eab6897d29e4d88c1727c1}{aws\_thread\_launch}}(}
\DoxyCodeLine{123     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__thread}{aws\_thread}} *thread,}
\DoxyCodeLine{124     \textcolor{keywordtype}{void} (*func)(\textcolor{keywordtype}{void} *arg),}
\DoxyCodeLine{125     \textcolor{keywordtype}{void} *arg,}
\DoxyCodeLine{126     \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__thread__options}{aws\_thread\_options}} *options);}
\DoxyCodeLine{127 }
\DoxyCodeLine{131 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{132 \mbox{\hyperlink{thread_8h_a9ff84a0781fdcab710b0fa5e0a84d046}{aws\_thread\_id\_t}} \mbox{\hyperlink{thread_8h_a9532162640e04debc9aef9fae7ff0bc7}{aws\_thread\_get\_id}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__thread}{aws\_thread}} *thread);}
\DoxyCodeLine{133 }
\DoxyCodeLine{138 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{139 \textcolor{keyword}{enum} \mbox{\hyperlink{thread_8h_aec4a7069355037fe99a94a83bdcf1cdc}{aws\_thread\_detach\_state}} \mbox{\hyperlink{thread_8h_adc4e50816ba601b07cdaf3f66dc4adf5}{aws\_thread\_get\_detach\_state}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__thread}{aws\_thread}} *thread);}
\DoxyCodeLine{140 }
\DoxyCodeLine{145 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{146 \textcolor{keywordtype}{int} \mbox{\hyperlink{thread_8h_aade594d532150d9bb89e4ff72c163945}{aws\_thread\_join}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__thread}{aws\_thread}} *thread);}
\DoxyCodeLine{147 }
\DoxyCodeLine{156 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{157 \textcolor{keywordtype}{void} \mbox{\hyperlink{thread_8h_ad070f3a4af8c56037362ccbae6720091}{aws\_thread\_join\_all\_managed}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{158 }
\DoxyCodeLine{163 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{164 \textcolor{keywordtype}{void} \mbox{\hyperlink{thread_8h_a2a3937766e7167ed28b2e74ef403e80a}{aws\_thread\_set\_managed\_join\_timeout\_ns}}(uint64\_t timeout\_in\_ns);}
\DoxyCodeLine{165 }
\DoxyCodeLine{170 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{171 \textcolor{keywordtype}{void} \mbox{\hyperlink{thread_8h_a0ece51e09969422c15fdfc6e8882c717}{aws\_thread\_clean\_up}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__thread}{aws\_thread}} *thread);}
\DoxyCodeLine{172 }
\DoxyCodeLine{176 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{177 \mbox{\hyperlink{thread_8h_a9ff84a0781fdcab710b0fa5e0a84d046}{aws\_thread\_id\_t}} \mbox{\hyperlink{thread_8h_a11295acc8823b9a3c5e6db63916527b6}{aws\_thread\_current\_thread\_id}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{178 }
\DoxyCodeLine{182 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{183 \textcolor{keywordtype}{bool} \mbox{\hyperlink{thread_8h_abf2ecf236471c78abe87f73484ff8e8b}{aws\_thread\_thread\_id\_equal}}(\mbox{\hyperlink{thread_8h_a9ff84a0781fdcab710b0fa5e0a84d046}{aws\_thread\_id\_t}} t1, \mbox{\hyperlink{thread_8h_a9ff84a0781fdcab710b0fa5e0a84d046}{aws\_thread\_id\_t}} t2);}
\DoxyCodeLine{184 }
\DoxyCodeLine{188 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{189 \textcolor{keywordtype}{void} \mbox{\hyperlink{thread_8h_a7102ce1697f8815273d004a7e4945df9}{aws\_thread\_current\_sleep}}(uint64\_t nanos);}
\DoxyCodeLine{190 }
\DoxyCodeLine{191 \textcolor{keyword}{typedef} void(\mbox{\hyperlink{thread_8h_ae015b53e5ea80a44f2c18e88df8645fd}{aws\_thread\_atexit\_fn}})(\textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{192 }
\DoxyCodeLine{199 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}}}
\DoxyCodeLine{200 \textcolor{keywordtype}{int} \mbox{\hyperlink{thread_8h_a086d801cf3c365e4b982c52637acf9b5}{aws\_thread\_current\_at\_exit}}(\mbox{\hyperlink{thread_8h_ae015b53e5ea80a44f2c18e88df8645fd}{aws\_thread\_atexit\_fn}} *callback, \textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{201 }
\DoxyCodeLine{209 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}} \textcolor{keywordtype}{void} \mbox{\hyperlink{thread_8h_aeb83c3ddd739c2f4f49450ff767408a4}{aws\_thread\_increment\_unjoined\_count}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{210 }
\DoxyCodeLine{218 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-common_2include_2aws_2common_2_exports_8h_a4d44553ff7ad58c9718deb08c64c49a6}{AWS\_COMMON\_API}} \textcolor{keywordtype}{void} \mbox{\hyperlink{thread_8h_a261a842bae77f4dd211c3499f3d88834}{aws\_thread\_decrement\_unjoined\_count}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{219 }
\DoxyCodeLine{220 \mbox{\hyperlink{macros_8h_a24efb76a3b128abc9c35d83cac0030c5}{AWS\_EXTERN\_C\_END}}}
\DoxyCodeLine{221 }
\DoxyCodeLine{222 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* AWS\_COMMON\_THREAD\_H */}\textcolor{preprocessor}{}}

\end{DoxyCode}
