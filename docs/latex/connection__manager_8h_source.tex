\hypertarget{connection__manager_8h_source}{}\doxysection{connection\+\_\+manager.\+h}
\label{connection__manager_8h_source}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/http/include/aws/http/connection\_manager.h@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/http/include/aws/http/connection\_manager.h}}
\mbox{\hyperlink{connection__manager_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef AWS\_HTTP\_CONNECTION\_MANAGER\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define AWS\_HTTP\_CONNECTION\_MANAGER\_H}}
\DoxyCodeLine{3 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{http_8h}{aws/http/http.h}}>}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{byte__buf_8h}{aws/common/byte\_buf.h}}>}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__client__bootstrap}{aws\_client\_bootstrap}};}
\DoxyCodeLine{14 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection}{aws\_http\_connection}};}
\DoxyCodeLine{15 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection__manager}{aws\_http\_connection\_manager}};}
\DoxyCodeLine{16 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__socket__options}{aws\_socket\_options}};}
\DoxyCodeLine{17 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__tls__connection__options}{aws\_tls\_connection\_options}};}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{keyword}{typedef} void(\mbox{\hyperlink{connection__manager_8h_a7230a93c0a6f23053c925159c1fad0c3}{aws\_http\_connection\_manager\_on\_connection\_setup\_fn}})(}
\DoxyCodeLine{20     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection}{aws\_http\_connection}} *connection,}
\DoxyCodeLine{21     \textcolor{keywordtype}{int} \mbox{\hyperlink{channel__handler__test_8c_a7d16b1c68c87cec009d972e79abfba78}{error\_code}},}
\DoxyCodeLine{22     \textcolor{keywordtype}{void} *\mbox{\hyperlink{channel__handler__test_8c_af1abaca9a982b3cdb0b118914416c39b}{user\_data}});}
\DoxyCodeLine{23 }
\DoxyCodeLine{24 \textcolor{keyword}{typedef} void(\mbox{\hyperlink{connection__manager_8h_a5f57518dd7da5bcafe02c731b8819861}{aws\_http\_connection\_manager\_shutdown\_complete\_fn}})(\textcolor{keywordtype}{void} *\mbox{\hyperlink{channel__handler__test_8c_af1abaca9a982b3cdb0b118914416c39b}{user\_data}});}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{comment}{/*}}
\DoxyCodeLine{27 \textcolor{comment}{ * Connection manager configuration struct.}}
\DoxyCodeLine{28 \textcolor{comment}{ *}}
\DoxyCodeLine{29 \textcolor{comment}{ * Contains all of the configuration needed to create an http connection as well as}}
\DoxyCodeLine{30 \textcolor{comment}{ * the maximum number of connections to ever have in existence.}}
\DoxyCodeLine{31 \textcolor{comment}{ */}}
\DoxyCodeLine{32 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection__manager__options}{aws\_http\_connection\_manager\_options}} \{}
\DoxyCodeLine{33     \textcolor{comment}{/*}}
\DoxyCodeLine{34 \textcolor{comment}{     * http connection configuration}}
\DoxyCodeLine{35 \textcolor{comment}{     */}}
\DoxyCodeLine{36     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__client__bootstrap}{aws\_client\_bootstrap}} *\mbox{\hyperlink{structaws__http__connection__manager__options_a44f25c9578e4b24d5de297ed2a206d61}{bootstrap}};}
\DoxyCodeLine{37     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structaws__http__connection__manager__options_a9a684e0e06f3b4949ab24ec8eab99046}{initial\_window\_size}};}
\DoxyCodeLine{38     \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__socket__options}{aws\_socket\_options}} *\mbox{\hyperlink{structaws__http__connection__manager__options_a77d3125aaa2f18ec743650bd1a9801f3}{socket\_options}};}
\DoxyCodeLine{39     \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__tls__connection__options}{aws\_tls\_connection\_options}} *\mbox{\hyperlink{structaws__http__connection__manager__options_afec098a51984de6484c3a20eca4cb929}{tls\_connection\_options}};}
\DoxyCodeLine{40     \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__proxy__options}{aws\_http\_proxy\_options}} *\mbox{\hyperlink{structaws__http__connection__manager__options_aabe2e545e8bfee765e7213f960325b29}{proxy\_options}};}
\DoxyCodeLine{41     \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection__monitoring__options}{aws\_http\_connection\_monitoring\_options}} *\mbox{\hyperlink{structaws__http__connection__manager__options_a4f2979dff728261ab997e8d0bd0e8742}{monitoring\_options}};}
\DoxyCodeLine{42     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} \mbox{\hyperlink{structaws__http__connection__manager__options_a54c9b2d27964d89f40d855a95686f037}{host}};}
\DoxyCodeLine{43     uint16\_t \mbox{\hyperlink{structaws__http__connection__manager__options_af6f9aff02645f196600c19abedca5ec8}{port}};}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     \textcolor{comment}{/*}}
\DoxyCodeLine{46 \textcolor{comment}{     * Maximum number of connections this manager is allowed to contain}}
\DoxyCodeLine{47 \textcolor{comment}{     */}}
\DoxyCodeLine{48     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structaws__http__connection__manager__options_a6a08f6e3f491ffe241cf9261c4e33c36}{max\_connections}};}
\DoxyCodeLine{49 }
\DoxyCodeLine{50     \textcolor{comment}{/*}}
\DoxyCodeLine{51 \textcolor{comment}{     * Callback and associated user data to invoke when the connection manager has}}
\DoxyCodeLine{52 \textcolor{comment}{     * completely shutdown and has finished deleting itself.}}
\DoxyCodeLine{53 \textcolor{comment}{     * Technically optional, but correctness may be impossible without it.}}
\DoxyCodeLine{54 \textcolor{comment}{     */}}
\DoxyCodeLine{55     \textcolor{keywordtype}{void} *\mbox{\hyperlink{structaws__http__connection__manager__options_a7ba4bf2a535e1b6c49306faac6ec1c11}{shutdown\_complete\_user\_data}};}
\DoxyCodeLine{56     \mbox{\hyperlink{connection__manager_8h_a5f57518dd7da5bcafe02c731b8819861}{aws\_http\_connection\_manager\_shutdown\_complete\_fn}} *\mbox{\hyperlink{structaws__http__connection__manager__options_a5018ecd39ec4941d9c28a37432d57322}{shutdown\_complete\_callback}};}
\DoxyCodeLine{57 }
\DoxyCodeLine{61     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structaws__http__connection__manager__options_a2e53a0638bdb5a0f81578f952beeb2d1}{enable\_read\_back\_pressure}};}
\DoxyCodeLine{62 }
\DoxyCodeLine{67     uint64\_t \mbox{\hyperlink{structaws__http__connection__manager__options_a95de5c3695607ba658534b6fa4391ede}{max\_connection\_idle\_in\_milliseconds}};}
\DoxyCodeLine{68 \};}
\DoxyCodeLine{69 }
\DoxyCodeLine{70 \mbox{\hyperlink{macros_8h_ab6f66af8231eba5da061b9ada0d29bad}{AWS\_EXTERN\_C\_BEGIN}}}
\DoxyCodeLine{71 }
\DoxyCodeLine{72 \textcolor{comment}{/*}}
\DoxyCodeLine{73 \textcolor{comment}{ * Connection managers are ref counted.  Adds one external ref to the manager.}}
\DoxyCodeLine{74 \textcolor{comment}{ */}}
\DoxyCodeLine{75 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\_HTTP\_API}}}
\DoxyCodeLine{76 \textcolor{keywordtype}{void} \mbox{\hyperlink{connection__manager_8h_aab15dc4bc1887f3864c0cde1dffe452d}{aws\_http\_connection\_manager\_acquire}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__http__connection__manager}{aws\_http\_connection\_manager}} *manager);}
\DoxyCodeLine{77 }
\DoxyCodeLine{78 \textcolor{comment}{/*}}
\DoxyCodeLine{79 \textcolor{comment}{ * Connection managers are ref counted.  Removes one external ref from the manager.}}
\DoxyCodeLine{80 \textcolor{comment}{ *}}
\DoxyCodeLine{81 \textcolor{comment}{ * When the ref count goes to zero, the connection manager begins its shut down}}
\DoxyCodeLine{82 \textcolor{comment}{ * process.  All pending connection acquisitions are failed (with callbacks}}
\DoxyCodeLine{83 \textcolor{comment}{ * invoked) and any (erroneous) subsequent attempts to acquire a connection}}
\DoxyCodeLine{84 \textcolor{comment}{ * fail immediately.  The connection manager destroys itself once all pending}}
\DoxyCodeLine{85 \textcolor{comment}{ * asynchronous activities have resolved.}}
\DoxyCodeLine{86 \textcolor{comment}{ */}}
\DoxyCodeLine{87 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\_HTTP\_API}}}
\DoxyCodeLine{88 \textcolor{keywordtype}{void} \mbox{\hyperlink{connection__manager_8h_a6a603284c8121292dca34c1ce89982c2}{aws\_http\_connection\_manager\_release}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__http__connection__manager}{aws\_http\_connection\_manager}} *manager);}
\DoxyCodeLine{89 }
\DoxyCodeLine{90 \textcolor{comment}{/*}}
\DoxyCodeLine{91 \textcolor{comment}{ * Creates a new connection manager with the supplied configuration options.}}
\DoxyCodeLine{92 \textcolor{comment}{ *}}
\DoxyCodeLine{93 \textcolor{comment}{ * The returned connection manager begins with a ref count of 1.}}
\DoxyCodeLine{94 \textcolor{comment}{ */}}
\DoxyCodeLine{95 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\_HTTP\_API}}}
\DoxyCodeLine{96 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection__manager}{aws\_http\_connection\_manager}} *\mbox{\hyperlink{connection__manager_8h_a13d4b554288c191890c274b0466dec20}{aws\_http\_connection\_manager\_new}}(}
\DoxyCodeLine{97     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}},}
\DoxyCodeLine{98     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__http__connection__manager__options}{aws\_http\_connection\_manager\_options}} *options);}
\DoxyCodeLine{99 }
\DoxyCodeLine{100 \textcolor{comment}{/*}}
\DoxyCodeLine{101 \textcolor{comment}{ * Requests a connection from the manager.  The requester is notified of}}
\DoxyCodeLine{102 \textcolor{comment}{ * an acquired connection (or failure to acquire) via the supplied callback.}}
\DoxyCodeLine{103 \textcolor{comment}{ *}}
\DoxyCodeLine{104 \textcolor{comment}{ * Once a connection has been successfully acquired from the manager it}}
\DoxyCodeLine{105 \textcolor{comment}{ * must be released back (via aws\_http\_connection\_manager\_release\_connection)}}
\DoxyCodeLine{106 \textcolor{comment}{ * at some point.  Failure to do so will cause a resource leak.}}
\DoxyCodeLine{107 \textcolor{comment}{ */}}
\DoxyCodeLine{108 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\_HTTP\_API}}}
\DoxyCodeLine{109 \textcolor{keywordtype}{void} \mbox{\hyperlink{connection__manager_8h_a5ad463b48c79fa12e182877794ff88c7}{aws\_http\_connection\_manager\_acquire\_connection}}(}
\DoxyCodeLine{110     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__http__connection__manager}{aws\_http\_connection\_manager}} *manager,}
\DoxyCodeLine{111     \mbox{\hyperlink{connection__manager_8h_a7230a93c0a6f23053c925159c1fad0c3}{aws\_http\_connection\_manager\_on\_connection\_setup\_fn}} *callback,}
\DoxyCodeLine{112     \textcolor{keywordtype}{void} *\mbox{\hyperlink{channel__handler__test_8c_af1abaca9a982b3cdb0b118914416c39b}{user\_data}});}
\DoxyCodeLine{113 }
\DoxyCodeLine{114 \textcolor{comment}{/*}}
\DoxyCodeLine{115 \textcolor{comment}{ * Returns a connection back to the manager.  All acquired connections must}}
\DoxyCodeLine{116 \textcolor{comment}{ * eventually be released back to the manager in order to avoid a resource leak.}}
\DoxyCodeLine{117 \textcolor{comment}{ */}}
\DoxyCodeLine{118 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\_HTTP\_API}}}
\DoxyCodeLine{119 \textcolor{keywordtype}{int} \mbox{\hyperlink{connection__manager_8h_a6577dad3f4e24e1576ade1b30ef1906e}{aws\_http\_connection\_manager\_release\_connection}}(}
\DoxyCodeLine{120     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__http__connection__manager}{aws\_http\_connection\_manager}} *manager,}
\DoxyCodeLine{121     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__http__connection}{aws\_http\_connection}} *connection);}
\DoxyCodeLine{122 }
\DoxyCodeLine{123 \mbox{\hyperlink{macros_8h_a24efb76a3b128abc9c35d83cac0030c5}{AWS\_EXTERN\_C\_END}}}
\DoxyCodeLine{124 }
\DoxyCodeLine{125 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* AWS\_HTTP\_CONNECTION\_MANAGER\_H */}\textcolor{preprocessor}{}}

\end{DoxyCode}
