\hypertarget{h1__connection_8h}{}\doxysection{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/http/include/aws/http/private/h1\+\_\+connection.h File Reference}
\label{h1__connection_8h}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/http/include/aws/http/private/h1\_connection.h@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/http/include/aws/http/private/h1\_connection.h}}
{\ttfamily \#include $<$aws/common/mutex.\+h$>$}\newline
{\ttfamily \#include $<$aws/http/private/connection\+\_\+impl.\+h$>$}\newline
{\ttfamily \#include $<$aws/http/private/h1\+\_\+encoder.\+h$>$}\newline
{\ttfamily \#include $<$aws/http/statistics.\+h$>$}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structaws__h1__connection}{aws\+\_\+h1\+\_\+connection}}
\item 
struct \mbox{\hyperlink{structaws__h1__window__stats}{aws\+\_\+h1\+\_\+window\+\_\+stats}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{macros_8h_ab6f66af8231eba5da061b9ada0d29bad}{AWS\+\_\+\+EXTERN\+\_\+\+C\+\_\+\+BEGIN}} \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\+\_\+\+HTTP\+\_\+\+API}} struct \mbox{\hyperlink{structaws__http__connection}{aws\+\_\+http\+\_\+connection}} $\ast$ \mbox{\hyperlink{h1__connection_8h_af8e94e4b50d614f906924b69487389ba}{aws\+\_\+http\+\_\+connection\+\_\+new\+\_\+http1\+\_\+1\+\_\+server}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}} manual\+\_\+window\+\_\+management, size\+\_\+t initial\+\_\+window\+\_\+size, const struct \mbox{\hyperlink{structaws__http1__connection__options}{aws\+\_\+http1\+\_\+connection\+\_\+options}} $\ast$http1\+\_\+options)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\+\_\+\+HTTP\+\_\+\+API}} struct \mbox{\hyperlink{structaws__http__connection}{aws\+\_\+http\+\_\+connection}} $\ast$ \mbox{\hyperlink{h1__connection_8h_ab722b955ed4ec4fd8a1ca2fbfe2d9d5b}{aws\+\_\+http\+\_\+connection\+\_\+new\+\_\+http1\+\_\+1\+\_\+client}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}} manual\+\_\+window\+\_\+management, size\+\_\+t initial\+\_\+window\+\_\+size, const struct \mbox{\hyperlink{structaws__http1__connection__options}{aws\+\_\+http1\+\_\+connection\+\_\+options}} $\ast$http1\+\_\+options)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\+\_\+\+HTTP\+\_\+\+API}} struct \mbox{\hyperlink{structaws__h1__window__stats}{aws\+\_\+h1\+\_\+window\+\_\+stats}} \mbox{\hyperlink{h1__connection_8h_adf6859ca63c0e930fa21537a2d734209}{aws\+\_\+h1\+\_\+connection\+\_\+window\+\_\+stats}} (struct \mbox{\hyperlink{structaws__http__connection}{aws\+\_\+http\+\_\+connection}} $\ast$connection\+\_\+base)
\item 
\mbox{\hyperlink{macros_8h_a24efb76a3b128abc9c35d83cac0030c5}{AWS\+\_\+\+EXTERN\+\_\+\+C\+\_\+\+END}} void \mbox{\hyperlink{h1__connection_8h_a645eb4fc4a9ef93378396e59eba7bc24}{aws\+\_\+h1\+\_\+connection\+\_\+lock\+\_\+synced\+\_\+data}} (struct \mbox{\hyperlink{structaws__h1__connection}{aws\+\_\+h1\+\_\+connection}} $\ast$connection)
\item 
void \mbox{\hyperlink{h1__connection_8h_a73103a64bb83bf633e66a398262975ae}{aws\+\_\+h1\+\_\+connection\+\_\+unlock\+\_\+synced\+\_\+data}} (struct \mbox{\hyperlink{structaws__h1__connection}{aws\+\_\+h1\+\_\+connection}} $\ast$connection)
\item 
void \mbox{\hyperlink{h1__connection_8h_a1d3af92b773ea5f2b8931b9599b48980}{aws\+\_\+h1\+\_\+connection\+\_\+try\+\_\+write\+\_\+outgoing\+\_\+stream}} (struct \mbox{\hyperlink{structaws__h1__connection}{aws\+\_\+h1\+\_\+connection}} $\ast$connection)
\item 
void \mbox{\hyperlink{h1__connection_8h_a48d73cdf3b5e895cc18849b0a6a3f737}{aws\+\_\+h1\+\_\+connection\+\_\+try\+\_\+process\+\_\+read\+\_\+messages}} (struct \mbox{\hyperlink{structaws__h1__connection}{aws\+\_\+h1\+\_\+connection}} $\ast$connection)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{h1__connection_8h_a645eb4fc4a9ef93378396e59eba7bc24}\label{h1__connection_8h_a645eb4fc4a9ef93378396e59eba7bc24}} 
\index{h1\_connection.h@{h1\_connection.h}!aws\_h1\_connection\_lock\_synced\_data@{aws\_h1\_connection\_lock\_synced\_data}}
\index{aws\_h1\_connection\_lock\_synced\_data@{aws\_h1\_connection\_lock\_synced\_data}!h1\_connection.h@{h1\_connection.h}}
\doxysubsubsection{\texorpdfstring{aws\_h1\_connection\_lock\_synced\_data()}{aws\_h1\_connection\_lock\_synced\_data()}}
{\footnotesize\ttfamily \mbox{\hyperlink{macros_8h_a24efb76a3b128abc9c35d83cac0030c5}{AWS\+\_\+\+EXTERN\+\_\+\+C\+\_\+\+END}} void aws\+\_\+h1\+\_\+connection\+\_\+lock\+\_\+synced\+\_\+data (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__h1__connection}{aws\+\_\+h1\+\_\+connection}} $\ast$}]{connection }\end{DoxyParamCaption})}

\mbox{\Hypertarget{h1__connection_8h_a48d73cdf3b5e895cc18849b0a6a3f737}\label{h1__connection_8h_a48d73cdf3b5e895cc18849b0a6a3f737}} 
\index{h1\_connection.h@{h1\_connection.h}!aws\_h1\_connection\_try\_process\_read\_messages@{aws\_h1\_connection\_try\_process\_read\_messages}}
\index{aws\_h1\_connection\_try\_process\_read\_messages@{aws\_h1\_connection\_try\_process\_read\_messages}!h1\_connection.h@{h1\_connection.h}}
\doxysubsubsection{\texorpdfstring{aws\_h1\_connection\_try\_process\_read\_messages()}{aws\_h1\_connection\_try\_process\_read\_messages()}}
{\footnotesize\ttfamily void aws\+\_\+h1\+\_\+connection\+\_\+try\+\_\+process\+\_\+read\+\_\+messages (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__h1__connection}{aws\+\_\+h1\+\_\+connection}} $\ast$}]{connection }\end{DoxyParamCaption})}

If any read messages are queued, and the downstream window is non-\/zero, process data and send it downstream. Then calculate the connection\textquotesingle{}s desired window size and increment it if necessary.

During normal operations \char`\"{}downstream\char`\"{} means the current incoming stream. If the connection has switched protocols \char`\"{}downstream\char`\"{} means the next channel handler in the read direction. \mbox{\Hypertarget{h1__connection_8h_a1d3af92b773ea5f2b8931b9599b48980}\label{h1__connection_8h_a1d3af92b773ea5f2b8931b9599b48980}} 
\index{h1\_connection.h@{h1\_connection.h}!aws\_h1\_connection\_try\_write\_outgoing\_stream@{aws\_h1\_connection\_try\_write\_outgoing\_stream}}
\index{aws\_h1\_connection\_try\_write\_outgoing\_stream@{aws\_h1\_connection\_try\_write\_outgoing\_stream}!h1\_connection.h@{h1\_connection.h}}
\doxysubsubsection{\texorpdfstring{aws\_h1\_connection\_try\_write\_outgoing\_stream()}{aws\_h1\_connection\_try\_write\_outgoing\_stream()}}
{\footnotesize\ttfamily void aws\+\_\+h1\+\_\+connection\+\_\+try\+\_\+write\+\_\+outgoing\+\_\+stream (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__h1__connection}{aws\+\_\+h1\+\_\+connection}} $\ast$}]{connection }\end{DoxyParamCaption})}

Try to kick off the outgoing-\/stream-\/task. If task is already active, nothing happens. If there\textquotesingle{}s nothing to do, the task will immediately stop itself. Call this whenever the user provides new outgoing data (ex\+: new stream, new chunk). MUST be called from the connection\textquotesingle{}s event-\/loop thread. \mbox{\Hypertarget{h1__connection_8h_a73103a64bb83bf633e66a398262975ae}\label{h1__connection_8h_a73103a64bb83bf633e66a398262975ae}} 
\index{h1\_connection.h@{h1\_connection.h}!aws\_h1\_connection\_unlock\_synced\_data@{aws\_h1\_connection\_unlock\_synced\_data}}
\index{aws\_h1\_connection\_unlock\_synced\_data@{aws\_h1\_connection\_unlock\_synced\_data}!h1\_connection.h@{h1\_connection.h}}
\doxysubsubsection{\texorpdfstring{aws\_h1\_connection\_unlock\_synced\_data()}{aws\_h1\_connection\_unlock\_synced\_data()}}
{\footnotesize\ttfamily void aws\+\_\+h1\+\_\+connection\+\_\+unlock\+\_\+synced\+\_\+data (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__h1__connection}{aws\+\_\+h1\+\_\+connection}} $\ast$}]{connection }\end{DoxyParamCaption})}

\mbox{\Hypertarget{h1__connection_8h_adf6859ca63c0e930fa21537a2d734209}\label{h1__connection_8h_adf6859ca63c0e930fa21537a2d734209}} 
\index{h1\_connection.h@{h1\_connection.h}!aws\_h1\_connection\_window\_stats@{aws\_h1\_connection\_window\_stats}}
\index{aws\_h1\_connection\_window\_stats@{aws\_h1\_connection\_window\_stats}!h1\_connection.h@{h1\_connection.h}}
\doxysubsubsection{\texorpdfstring{aws\_h1\_connection\_window\_stats()}{aws\_h1\_connection\_window\_stats()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\+\_\+\+HTTP\+\_\+\+API}} struct \mbox{\hyperlink{structaws__h1__window__stats}{aws\+\_\+h1\+\_\+window\+\_\+stats}} aws\+\_\+h1\+\_\+connection\+\_\+window\+\_\+stats (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__http__connection}{aws\+\_\+http\+\_\+connection}} $\ast$}]{connection\+\_\+base }\end{DoxyParamCaption})}

\mbox{\Hypertarget{h1__connection_8h_ab722b955ed4ec4fd8a1ca2fbfe2d9d5b}\label{h1__connection_8h_ab722b955ed4ec4fd8a1ca2fbfe2d9d5b}} 
\index{h1\_connection.h@{h1\_connection.h}!aws\_http\_connection\_new\_http1\_1\_client@{aws\_http\_connection\_new\_http1\_1\_client}}
\index{aws\_http\_connection\_new\_http1\_1\_client@{aws\_http\_connection\_new\_http1\_1\_client}!h1\_connection.h@{h1\_connection.h}}
\doxysubsubsection{\texorpdfstring{aws\_http\_connection\_new\_http1\_1\_client()}{aws\_http\_connection\_new\_http1\_1\_client()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\+\_\+\+HTTP\+\_\+\+API}} struct \mbox{\hyperlink{structaws__http__connection}{aws\+\_\+http\+\_\+connection}}$\ast$ aws\+\_\+http\+\_\+connection\+\_\+new\+\_\+http1\+\_\+1\+\_\+client (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{\mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}}}]{manual\+\_\+window\+\_\+management,  }\item[{size\+\_\+t}]{initial\+\_\+window\+\_\+size,  }\item[{const struct \mbox{\hyperlink{structaws__http1__connection__options}{aws\+\_\+http1\+\_\+connection\+\_\+options}} $\ast$}]{http1\+\_\+options }\end{DoxyParamCaption})}

\mbox{\Hypertarget{h1__connection_8h_af8e94e4b50d614f906924b69487389ba}\label{h1__connection_8h_af8e94e4b50d614f906924b69487389ba}} 
\index{h1\_connection.h@{h1\_connection.h}!aws\_http\_connection\_new\_http1\_1\_server@{aws\_http\_connection\_new\_http1\_1\_server}}
\index{aws\_http\_connection\_new\_http1\_1\_server@{aws\_http\_connection\_new\_http1\_1\_server}!h1\_connection.h@{h1\_connection.h}}
\doxysubsubsection{\texorpdfstring{aws\_http\_connection\_new\_http1\_1\_server()}{aws\_http\_connection\_new\_http1\_1\_server()}}
{\footnotesize\ttfamily \mbox{\hyperlink{macros_8h_ab6f66af8231eba5da061b9ada0d29bad}{AWS\+\_\+\+EXTERN\+\_\+\+C\+\_\+\+BEGIN}} \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\+\_\+\+HTTP\+\_\+\+API}} struct \mbox{\hyperlink{structaws__http__connection}{aws\+\_\+http\+\_\+connection}}$\ast$ aws\+\_\+http\+\_\+connection\+\_\+new\+\_\+http1\+\_\+1\+\_\+server (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{\mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}}}]{manual\+\_\+window\+\_\+management,  }\item[{size\+\_\+t}]{initial\+\_\+window\+\_\+size,  }\item[{const struct \mbox{\hyperlink{structaws__http1__connection__options}{aws\+\_\+http1\+\_\+connection\+\_\+options}} $\ast$}]{http1\+\_\+options }\end{DoxyParamCaption})}

