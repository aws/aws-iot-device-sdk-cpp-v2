\hypertarget{namespaces2n__dynamic__record__size__test}{}\doxysection{s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test Namespace Reference}
\label{namespaces2n__dynamic__record__size__test}\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespaces2n__dynamic__record__size__test_aab24972674c14649fbf4514ca9370f4e}{cleanup\+\_\+processes}} ($\ast$processes)
\item 
def \mbox{\hyperlink{namespaces2n__dynamic__record__size__test_ad89a5c3b90e3025fa5d24c83e0a53e55}{try\+\_\+dynamic\+\_\+record}} (endpoint, port, cipher, ssl\+\_\+version, threshold, \mbox{\hyperlink{s2n__fragmentation__coalescing__test_8c_a6f8e086c4374b9500a7200a82eb494df}{server\+\_\+cert}}=None, server\+\_\+key=None, sig\+\_\+algs=None, curves=None, dh\+\_\+params=None)
\item 
def \mbox{\hyperlink{namespaces2n__dynamic__record__size__test_aa56d618c4daaf598e25c7e7116c9108e}{print\+\_\+result}} (result\+\_\+prefix, return\+\_\+code)
\item 
def \mbox{\hyperlink{namespaces2n__dynamic__record__size__test_a8063361c3e70fd868ba5162d2caf2b12}{run\+\_\+test}} (host, port, ssl\+\_\+version, cipher, threshold)
\item 
def \mbox{\hyperlink{namespaces2n__dynamic__record__size__test_abc3c7e51dbeb2cb7b6a286f66fe014f0}{test}} (host, port, test\+\_\+ciphers, threshold)
\item 
def \mbox{\hyperlink{namespaces2n__dynamic__record__size__test_acca5e097c6eeadb8e152b2cdc4afcc57}{analyze\+\_\+tcp\+\_\+dump}} (array, threshold)
\item 
def \mbox{\hyperlink{namespaces2n__dynamic__record__size__test_ae9de36ddd7957124d96a0682442e127c}{get\+\_\+local\+\_\+mtu}} ()
\item 
def \mbox{\hyperlink{namespaces2n__dynamic__record__size__test_a096b0460bfd72b2d098ad992783d7ae9}{main}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
dictionary \mbox{\hyperlink{namespaces2n__dynamic__record__size__test_a31b7025b79061f38925ef8183d3eeb50}{PROTO\+\_\+\+VERS\+\_\+\+TO\+\_\+\+S\+\_\+\+SERVER\+\_\+\+ARG}}
\item 
\mbox{\hyperlink{aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2external_2c_j_s_o_n_8h_a885837e2b3d6bfbc536b23ea3e8cf054}{string}} \mbox{\hyperlink{namespaces2n__dynamic__record__size__test_af55e171f456f8a6cc00f2f5df3e8062d}{test\+\_\+file}} = \textquotesingle{}./data/test\+\_\+buf\textquotesingle{}
\item 
\mbox{\hyperlink{namespaces2n__dynamic__record__size__test_a8dcfa472c9c6c4c3759219720e1361d1}{file\+\_\+size}} = os.\+path.\+getsize(\mbox{\hyperlink{namespaces2n__dynamic__record__size__test_af55e171f456f8a6cc00f2f5df3e8062d}{test\+\_\+file}})
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespaces2n__dynamic__record__size__test_acca5e097c6eeadb8e152b2cdc4afcc57}\label{namespaces2n__dynamic__record__size__test_acca5e097c6eeadb8e152b2cdc4afcc57}} 
\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}!analyze\_tcp\_dump@{analyze\_tcp\_dump}}
\index{analyze\_tcp\_dump@{analyze\_tcp\_dump}!s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsubsection{\texorpdfstring{analyze\_tcp\_dump()}{analyze\_tcp\_dump()}}
{\footnotesize\ttfamily def s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test.\+analyze\+\_\+tcp\+\_\+dump (\begin{DoxyParamCaption}\item[{}]{array,  }\item[{}]{threshold }\end{DoxyParamCaption})}

\begin{DoxyVerb}This function iterates though each line of the TCP dump and reads the length of each segment, to check that it is
the correct size. It keeps account the total bytes_transferred and therefore tests that all segment sizes before
the threshold is met are less than the maximum segment size (mss). Once this threshold has been met, it tests
that the segment size has been increased by verifying that at least one segment is greater than MTU_bytes.

The mss is read from the first message in the TCP dump, however if this cannot be found a default value is used.

:param list array: this is an array of strings where each list element is a segment from the TCP dump
:param int threshold: the number of bytes sent before switch over from low latency to high throughput mode
\end{DoxyVerb}
 \mbox{\Hypertarget{namespaces2n__dynamic__record__size__test_aab24972674c14649fbf4514ca9370f4e}\label{namespaces2n__dynamic__record__size__test_aab24972674c14649fbf4514ca9370f4e}} 
\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}!cleanup\_processes@{cleanup\_processes}}
\index{cleanup\_processes@{cleanup\_processes}!s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsubsection{\texorpdfstring{cleanup\_processes()}{cleanup\_processes()}}
{\footnotesize\ttfamily def s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test.\+cleanup\+\_\+processes (\begin{DoxyParamCaption}\item[{$\ast$}]{processes }\end{DoxyParamCaption})}

\mbox{\Hypertarget{namespaces2n__dynamic__record__size__test_ae9de36ddd7957124d96a0682442e127c}\label{namespaces2n__dynamic__record__size__test_ae9de36ddd7957124d96a0682442e127c}} 
\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}!get\_local\_mtu@{get\_local\_mtu}}
\index{get\_local\_mtu@{get\_local\_mtu}!s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsubsection{\texorpdfstring{get\_local\_mtu()}{get\_local\_mtu()}}
{\footnotesize\ttfamily def s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test.\+get\+\_\+local\+\_\+mtu (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{namespaces2n__dynamic__record__size__test_a096b0460bfd72b2d098ad992783d7ae9}\label{namespaces2n__dynamic__record__size__test_a096b0460bfd72b2d098ad992783d7ae9}} 
\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}!main@{main}}
\index{main@{main}!s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily def s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test.\+main (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{namespaces2n__dynamic__record__size__test_aa56d618c4daaf598e25c7e7116c9108e}\label{namespaces2n__dynamic__record__size__test_aa56d618c4daaf598e25c7e7116c9108e}} 
\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}!print\_result@{print\_result}}
\index{print\_result@{print\_result}!s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsubsection{\texorpdfstring{print\_result()}{print\_result()}}
{\footnotesize\ttfamily def s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test.\+print\+\_\+result (\begin{DoxyParamCaption}\item[{}]{result\+\_\+prefix,  }\item[{}]{return\+\_\+code }\end{DoxyParamCaption})}

\mbox{\Hypertarget{namespaces2n__dynamic__record__size__test_a8063361c3e70fd868ba5162d2caf2b12}\label{namespaces2n__dynamic__record__size__test_a8063361c3e70fd868ba5162d2caf2b12}} 
\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}!run\_test@{run\_test}}
\index{run\_test@{run\_test}!s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsubsection{\texorpdfstring{run\_test()}{run\_test()}}
{\footnotesize\ttfamily def s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test.\+run\+\_\+test (\begin{DoxyParamCaption}\item[{}]{host,  }\item[{}]{port,  }\item[{}]{ssl\+\_\+version,  }\item[{}]{cipher,  }\item[{}]{threshold }\end{DoxyParamCaption})}

\mbox{\Hypertarget{namespaces2n__dynamic__record__size__test_abc3c7e51dbeb2cb7b6a286f66fe014f0}\label{namespaces2n__dynamic__record__size__test_abc3c7e51dbeb2cb7b6a286f66fe014f0}} 
\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}!test@{test}}
\index{test@{test}!s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsubsection{\texorpdfstring{test()}{test()}}
{\footnotesize\ttfamily def s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test.\+test (\begin{DoxyParamCaption}\item[{}]{host,  }\item[{}]{port,  }\item[{}]{test\+\_\+ciphers,  }\item[{}]{threshold }\end{DoxyParamCaption})}

\mbox{\Hypertarget{namespaces2n__dynamic__record__size__test_ad89a5c3b90e3025fa5d24c83e0a53e55}\label{namespaces2n__dynamic__record__size__test_ad89a5c3b90e3025fa5d24c83e0a53e55}} 
\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}!try\_dynamic\_record@{try\_dynamic\_record}}
\index{try\_dynamic\_record@{try\_dynamic\_record}!s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsubsection{\texorpdfstring{try\_dynamic\_record()}{try\_dynamic\_record()}}
{\footnotesize\ttfamily def s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test.\+try\+\_\+dynamic\+\_\+record (\begin{DoxyParamCaption}\item[{}]{endpoint,  }\item[{}]{port,  }\item[{}]{cipher,  }\item[{}]{ssl\+\_\+version,  }\item[{}]{threshold,  }\item[{}]{server\+\_\+cert = {\ttfamily None},  }\item[{}]{server\+\_\+key = {\ttfamily None},  }\item[{}]{sig\+\_\+algs = {\ttfamily None},  }\item[{}]{curves = {\ttfamily None},  }\item[{}]{dh\+\_\+params = {\ttfamily None} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Attempt to handshake against Openssl s_server listening on `endpoint` and `port` using s2nc

:param int endpoint: endpoint for Openssl s_server to listen on
:param int port: port for Openssl s_server to listen on
:param str cipher: ciphers for Openssl s_server to use. See https://www.openssl.org/docs/man1.0.2/apps/ciphers.html
:param int ssl_version: SSL version for Openssl s_server to use
:param int threshold: the number of bytes sent before switch over from low latency to high throughput
:param str server_cert: path to certificate for Openssl s_server to use
:param str server_key: path to private key for Openssl s_server to use
:param str sig_algs: Signature algorithms for Openssl s_server to accept
:param str curves: Elliptic curves for Openssl s_server to accept
:param str dh_params: path to DH params for Openssl s_server to use
:return: 0 on successfully negotiation(s), -1 on failure
\end{DoxyVerb}
 

\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespaces2n__dynamic__record__size__test_a8dcfa472c9c6c4c3759219720e1361d1}\label{namespaces2n__dynamic__record__size__test_a8dcfa472c9c6c4c3759219720e1361d1}} 
\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}!file\_size@{file\_size}}
\index{file\_size@{file\_size}!s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsubsection{\texorpdfstring{file\_size}{file\_size}}
{\footnotesize\ttfamily s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test.\+file\+\_\+size = os.\+path.\+getsize(\mbox{\hyperlink{namespaces2n__dynamic__record__size__test_af55e171f456f8a6cc00f2f5df3e8062d}{test\+\_\+file}})}

\mbox{\Hypertarget{namespaces2n__dynamic__record__size__test_a31b7025b79061f38925ef8183d3eeb50}\label{namespaces2n__dynamic__record__size__test_a31b7025b79061f38925ef8183d3eeb50}} 
\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}!PROTO\_VERS\_TO\_S\_SERVER\_ARG@{PROTO\_VERS\_TO\_S\_SERVER\_ARG}}
\index{PROTO\_VERS\_TO\_S\_SERVER\_ARG@{PROTO\_VERS\_TO\_S\_SERVER\_ARG}!s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsubsection{\texorpdfstring{PROTO\_VERS\_TO\_S\_SERVER\_ARG}{PROTO\_VERS\_TO\_S\_SERVER\_ARG}}
{\footnotesize\ttfamily dictionary s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test.\+PROTO\+\_\+\+VERS\+\_\+\+TO\+\_\+\+S\+\_\+\+SERVER\+\_\+\+ARG}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 =  \{}
\DoxyCodeLine{2     S2N\_TLS10: \textcolor{stringliteral}{"{}-\/tls1"{}},}
\DoxyCodeLine{3     S2N\_TLS11: \textcolor{stringliteral}{"{}-\/tls1\_1"{}},}
\DoxyCodeLine{4     S2N\_TLS12: \textcolor{stringliteral}{"{}-\/tls1\_2"{}},}
\DoxyCodeLine{5 \}}

\end{DoxyCode}
\mbox{\Hypertarget{namespaces2n__dynamic__record__size__test_af55e171f456f8a6cc00f2f5df3e8062d}\label{namespaces2n__dynamic__record__size__test_af55e171f456f8a6cc00f2f5df3e8062d}} 
\index{s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}!test\_file@{test\_file}}
\index{test\_file@{test\_file}!s2n\_dynamic\_record\_size\_test@{s2n\_dynamic\_record\_size\_test}}
\doxysubsubsection{\texorpdfstring{test\_file}{test\_file}}
{\footnotesize\ttfamily \mbox{\hyperlink{aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2external_2c_j_s_o_n_8h_a885837e2b3d6bfbc536b23ea3e8cf054}{string}} s2n\+\_\+dynamic\+\_\+record\+\_\+size\+\_\+test.\+test\+\_\+file = \textquotesingle{}./data/test\+\_\+buf\textquotesingle{}}

