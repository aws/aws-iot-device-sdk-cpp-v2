\hypertarget{md__f_a_q_autotoc_md9}{}\doxysubsection{Where should I start?}\label{md__f_a_q_autotoc_md9}
If you are just getting started make sure you \href{https://github.com/aws/aws-iot-device-sdk-cpp-v2\#installation}{\texttt{ install this sdk}} and then build and run the \href{https://github.com/aws/aws-iot-device-sdk-cpp-v2/tree/main/samples\#basic-mqtt-pub-sub}{\texttt{ basic Pub\+Sub}}\hypertarget{md__f_a_q_autotoc_md10}{}\doxysubsection{I keep getting AWS\+\_\+\+ERROR\+\_\+\+MQTT\+\_\+\+UNEXPECTED\+\_\+\+HANGUP}\label{md__f_a_q_autotoc_md10}
This could be many different things but it most likely is a policy issue. Start with using a super permissive IAM policy called AWSIOTFull\+Access which looks like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{    "{}Version"{}: "{}2012-\/10-\/17"{},}
\DoxyCodeLine{    "{}Statement"{}: [}
\DoxyCodeLine{        \{}
\DoxyCodeLine{            "{}Effect"{}: "{}Allow"{},}
\DoxyCodeLine{            "{}Action"{}: [}
\DoxyCodeLine{                "{}iot:*"{}}
\DoxyCodeLine{            ],}
\DoxyCodeLine{            "{}Resource"{}: "{}*"{}}
\DoxyCodeLine{        \}}
\DoxyCodeLine{    ]}
\DoxyCodeLine{\}}

\end{DoxyCode}


After getting it working make sure to only allow the actions and resources that you need. More info about IoT IAM policies can be found \href{https://docs.aws.amazon.com/iot/latest/developerguide/security_iam_service-with-iam.html}{\texttt{ here}}.\hypertarget{md__f_a_q_autotoc_md11}{}\doxysubsection{Dependencies are bad.}\label{md__f_a_q_autotoc_md11}
If you get the following Error\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{CMake Error at CMakeLists.txt:46 (include):}
\DoxyCodeLine{ include could not find load file:}
\DoxyCodeLine{  AwsFindPackage}

\end{DoxyCode}
 Make sure to use {\ttfamily -\/-\/recursive} in the git clone command

{\ttfamily git clone -\/-\/recursive \href{https://github.com/aws/aws-iot-device-sdk-cpp-v2.git}{\texttt{ https\+://github.\+com/aws/aws-\/iot-\/device-\/sdk-\/cpp-\/v2.\+git}}}\hypertarget{md__f_a_q_autotoc_md12}{}\doxysubsection{Detecting connection loss (tldr use keep\+Alive\+Time\+Secs and ping\+Timeout\+Ms)}\label{md__f_a_q_autotoc_md12}
There are 3 mechanisms for detecting connection loss\+:
\begin{DoxyEnumerate}
\item The keep\+Alive\+Time\+Secs and ping\+Timeout\+Ms arguments passed to Mqtt\+Connection\+::\+Connect(). These control how often the SDK sends a PINGREQ, and how long the SDK will wait for a PINGRESP before assuming the connection is lost. YOU SHOULD USE THIS TO RELIABLY DETECT CONNECTION LOSS.
\item If the OS socket says it\textquotesingle{}s closed, the SDK immediately tries to reconnect. The timing of this is not reliable, it depends on the OS and how the connection is lost, it can take many minutes.
\item The various Tcp\+Keep\+Alive controls on the Mqtt\+Client\+Connection\+Config\+Builder. These control a similar mechanism at the TCP layer, rather than the MQTT layer, but is implemented in the OS and behavior may vary across platforms
\end{DoxyEnumerate}\hypertarget{md__f_a_q_autotoc_md13}{}\doxysubsection{How to use a Pre-\/\+Built aws-\/crt-\/cpp (\+Most useful for development of this package)}\label{md__f_a_q_autotoc_md13}

\begin{DoxyCode}{0}
\DoxyCodeLine{mkdir aws-\/iot-\/device-\/sdk-\/cpp-\/v2-\/build}
\DoxyCodeLine{cd aws-\/iot-\/device-\/sdk-\/cpp-\/v2-\/build}
\DoxyCodeLine{cmake -\/DCMAKE\_INSTALL\_PREFIX="{}<absolute path sdk-\/cpp-\/workspace dir>"{}  -\/DCMAKE\_PREFIX\_PATH="{}<absolute path sdk-\/cpp-\/workspace dir>"{} -\/DBUILD\_DEPS=OFF ../aws-\/iot-\/device-\/sdk-\/cpp-\/v2}
\DoxyCodeLine{cmake -\/-\/build . -\/-\/target install}

\end{DoxyCode}
\hypertarget{md__f_a_q_autotoc_md14}{}\doxysubsection{Mac-\/\+Only TLS Behavior}\label{md__f_a_q_autotoc_md14}
Please note that on Mac, once a private key is used with a certificate, that certificate-\/key pair is imported into the Mac Keychain. All subsequent uses of that certificate will use the stored private key and ignore anything passed in programmatically. Beginning in v1.\+7.\+3, when a stored private key from the Keychain is used, the following will be logged at the \char`\"{}info\char`\"{} log level\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{static: certificate has an existing certificate-\/key pair that was previously imported into the Keychain.  Using key from Keychain instead of the one provided.}

\end{DoxyCode}
 