\hypertarget{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h}{}\doxysection{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/cal/include/aws/cal/hmac.h File Reference}
\label{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/cal/include/aws/cal/hmac.h@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/cal/include/aws/cal/hmac.h}}
{\ttfamily \#include $<$aws/cal/exports.\+h$>$}\newline
{\ttfamily \#include $<$aws/common/byte\+\_\+buf.\+h$>$}\newline
{\ttfamily \#include $<$aws/common/common.\+h$>$}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structaws__hmac__vtable}{aws\+\_\+hmac\+\_\+vtable}}
\item 
struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a1d9c6712b3dce9ba4188f9ee81854fd3}{AWS\+\_\+\+SHA256\+\_\+\+HMAC\+\_\+\+LEN}}~32
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$() \mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_aab6815d6797ca8ea2d161f4300cee717}{aws\+\_\+hmac\+\_\+new\+\_\+fn}}(struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$secret)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{macros_8h_ab6f66af8231eba5da061b9ada0d29bad}{AWS\+\_\+\+EXTERN\+\_\+\+C\+\_\+\+BEGIN}} \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$ \mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a4d3ca06e1204c4095f2e46b70beca927}{aws\+\_\+sha256\+\_\+hmac\+\_\+new}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$secret)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} void \mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a59147dda3b5aaeec212d2c8518dc2349}{aws\+\_\+hmac\+\_\+destroy}} (struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$hmac)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} int \mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_ac746bfe65f840f27f3df5872953a5088}{aws\+\_\+hmac\+\_\+update}} (struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$hmac, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$to\+\_\+hmac)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} int \mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a99828ddbe88e73866cdd373e41a34bc1}{aws\+\_\+hmac\+\_\+finalize}} (struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$hmac, struct \mbox{\hyperlink{structaws__byte__buf}{aws\+\_\+byte\+\_\+buf}} $\ast$output, size\+\_\+t truncate\+\_\+to)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} int \mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a5786ea3401920953dd7386b106415076}{aws\+\_\+sha256\+\_\+hmac\+\_\+compute}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$secret, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$to\+\_\+hmac, struct \mbox{\hyperlink{structaws__byte__buf}{aws\+\_\+byte\+\_\+buf}} $\ast$output, size\+\_\+t truncate\+\_\+to)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} void \mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a3c6944216e51810b7e2d8ff337666a13}{aws\+\_\+set\+\_\+sha256\+\_\+hmac\+\_\+new\+\_\+fn}} (\mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_aab6815d6797ca8ea2d161f4300cee717}{aws\+\_\+hmac\+\_\+new\+\_\+fn}} $\ast$fn)
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a1d9c6712b3dce9ba4188f9ee81854fd3}\label{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a1d9c6712b3dce9ba4188f9ee81854fd3}} 
\index{hmac.h@{hmac.h}!AWS\_SHA256\_HMAC\_LEN@{AWS\_SHA256\_HMAC\_LEN}}
\index{AWS\_SHA256\_HMAC\_LEN@{AWS\_SHA256\_HMAC\_LEN}!hmac.h@{hmac.h}}
\doxysubsubsection{\texorpdfstring{AWS\_SHA256\_HMAC\_LEN}{AWS\_SHA256\_HMAC\_LEN}}
{\footnotesize\ttfamily \#define AWS\+\_\+\+SHA256\+\_\+\+HMAC\+\_\+\+LEN~32}

Copyright Amazon.\+com, Inc. or its affiliates. All Rights Reserved. SPDX-\/\+License-\/\+Identifier\+: Apache-\/2.\+0. 

\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_aab6815d6797ca8ea2d161f4300cee717}\label{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_aab6815d6797ca8ea2d161f4300cee717}} 
\index{hmac.h@{hmac.h}!aws\_hmac\_new\_fn@{aws\_hmac\_new\_fn}}
\index{aws\_hmac\_new\_fn@{aws\_hmac\_new\_fn}!hmac.h@{hmac.h}}
\doxysubsubsection{\texorpdfstring{aws\_hmac\_new\_fn}{aws\_hmac\_new\_fn}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}}$\ast$() aws\+\_\+hmac\+\_\+new\+\_\+fn(struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$secret)}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a59147dda3b5aaeec212d2c8518dc2349}\label{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a59147dda3b5aaeec212d2c8518dc2349}} 
\index{hmac.h@{hmac.h}!aws\_hmac\_destroy@{aws\_hmac\_destroy}}
\index{aws\_hmac\_destroy@{aws\_hmac\_destroy}!hmac.h@{hmac.h}}
\doxysubsubsection{\texorpdfstring{aws\_hmac\_destroy()}{aws\_hmac\_destroy()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} void aws\+\_\+hmac\+\_\+destroy (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$}]{hmac }\end{DoxyParamCaption})}

Cleans up and deallocates hmac. \mbox{\Hypertarget{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a99828ddbe88e73866cdd373e41a34bc1}\label{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a99828ddbe88e73866cdd373e41a34bc1}} 
\index{hmac.h@{hmac.h}!aws\_hmac\_finalize@{aws\_hmac\_finalize}}
\index{aws\_hmac\_finalize@{aws\_hmac\_finalize}!hmac.h@{hmac.h}}
\doxysubsubsection{\texorpdfstring{aws\_hmac\_finalize()}{aws\_hmac\_finalize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} int aws\+\_\+hmac\+\_\+finalize (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$}]{hmac,  }\item[{struct \mbox{\hyperlink{structaws__byte__buf}{aws\+\_\+byte\+\_\+buf}} $\ast$}]{output,  }\item[{size\+\_\+t}]{truncate\+\_\+to }\end{DoxyParamCaption})}

Completes the hmac computation and writes the final digest to output. Allocation of output is the caller\textquotesingle{}s responsibility. If you specify truncate\+\_\+to to something other than 0, the output will be truncated to that number of bytes. For example if you want a SHA256 digest as the first 16 bytes, set truncate\+\_\+to to 16. If you want the full digest size, just set this to 0. \mbox{\Hypertarget{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_ac746bfe65f840f27f3df5872953a5088}\label{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_ac746bfe65f840f27f3df5872953a5088}} 
\index{hmac.h@{hmac.h}!aws\_hmac\_update@{aws\_hmac\_update}}
\index{aws\_hmac\_update@{aws\_hmac\_update}!hmac.h@{hmac.h}}
\doxysubsubsection{\texorpdfstring{aws\_hmac\_update()}{aws\_hmac\_update()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} int aws\+\_\+hmac\+\_\+update (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$}]{hmac,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{to\+\_\+hmac }\end{DoxyParamCaption})}

Updates the running hmac with to\+\_\+hash. this can be called multiple times. \mbox{\Hypertarget{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a3c6944216e51810b7e2d8ff337666a13}\label{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a3c6944216e51810b7e2d8ff337666a13}} 
\index{hmac.h@{hmac.h}!aws\_set\_sha256\_hmac\_new\_fn@{aws\_set\_sha256\_hmac\_new\_fn}}
\index{aws\_set\_sha256\_hmac\_new\_fn@{aws\_set\_sha256\_hmac\_new\_fn}!hmac.h@{hmac.h}}
\doxysubsubsection{\texorpdfstring{aws\_set\_sha256\_hmac\_new\_fn()}{aws\_set\_sha256\_hmac\_new\_fn()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} void aws\+\_\+set\+\_\+sha256\+\_\+hmac\+\_\+new\+\_\+fn (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_aab6815d6797ca8ea2d161f4300cee717}{aws\+\_\+hmac\+\_\+new\+\_\+fn}} $\ast$}]{fn }\end{DoxyParamCaption})}

Set the implementation of sha256 hmac to use. If you compiled without AWS\+\_\+\+BYO\+\_\+\+CRYPTO, you do not need to call this. However, if use this, we will honor it, regardless of compile options. This may be useful for testing purposes. If you did set AWS\+\_\+\+BYO\+\_\+\+CRYPTO, and you do not call this function you will segfault. \mbox{\Hypertarget{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a5786ea3401920953dd7386b106415076}\label{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a5786ea3401920953dd7386b106415076}} 
\index{hmac.h@{hmac.h}!aws\_sha256\_hmac\_compute@{aws\_sha256\_hmac\_compute}}
\index{aws\_sha256\_hmac\_compute@{aws\_sha256\_hmac\_compute}!hmac.h@{hmac.h}}
\doxysubsubsection{\texorpdfstring{aws\_sha256\_hmac\_compute()}{aws\_sha256\_hmac\_compute()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} int aws\+\_\+sha256\+\_\+hmac\+\_\+compute (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{secret,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{to\+\_\+hmac,  }\item[{struct \mbox{\hyperlink{structaws__byte__buf}{aws\+\_\+byte\+\_\+buf}} $\ast$}]{output,  }\item[{size\+\_\+t}]{truncate\+\_\+to }\end{DoxyParamCaption})}

Computes the sha256 hmac over input and writes the digest output to \textquotesingle{}output\textquotesingle{}. Use this if you don\textquotesingle{}t need to stream the data you\textquotesingle{}re hashing and you can load the entire input to hash into memory. If you specify truncate\+\_\+to to something other than 0, the output will be truncated to that number of bytes. For example if you want a SHA256 HMAC digest as the first 16 bytes, set truncate\+\_\+to to 16. If you want the full digest size, just set this to 0. \mbox{\Hypertarget{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a4d3ca06e1204c4095f2e46b70beca927}\label{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_a4d3ca06e1204c4095f2e46b70beca927}} 
\index{hmac.h@{hmac.h}!aws\_sha256\_hmac\_new@{aws\_sha256\_hmac\_new}}
\index{aws\_sha256\_hmac\_new@{aws\_sha256\_hmac\_new}!hmac.h@{hmac.h}}
\doxysubsubsection{\texorpdfstring{aws\_sha256\_hmac\_new()}{aws\_sha256\_hmac\_new()}}
{\footnotesize\ttfamily \mbox{\hyperlink{macros_8h_ab6f66af8231eba5da061b9ada0d29bad}{AWS\+\_\+\+EXTERN\+\_\+\+C\+\_\+\+BEGIN}} \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-cal_2include_2aws_2cal_2_exports_8h_aa692ea47554141d96737626ab08871da}{AWS\+\_\+\+CAL\+\_\+\+API}} struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}}$\ast$ aws\+\_\+sha256\+\_\+hmac\+\_\+new (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{secret }\end{DoxyParamCaption})}

Allocates and initializes a sha256 hmac instance. Secret is the key to be used for the hmac process. 