\hypertarget{tls__channel__handler_8c}{}\doxysection{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/io/source/tls\+\_\+channel\+\_\+handler.c File Reference}
\label{tls__channel__handler_8c}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/io/source/tls\_channel\_handler.c@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/io/source/tls\_channel\_handler.c}}
{\ttfamily \#include $<$aws/io/channel.\+h$>$}\newline
{\ttfamily \#include $<$aws/io/file\+\_\+utils.\+h$>$}\newline
{\ttfamily \#include $<$aws/io/logging.\+h$>$}\newline
{\ttfamily \#include $<$aws/io/tls\+\_\+channel\+\_\+handler.\+h$>$}\newline
{\ttfamily \#include $<$aws/common/string.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{tls__channel__handler_8c_a7b782f806da77a92e2463e035915c4b9}{AWS\+\_\+\+DEFAULT\+\_\+\+TLS\+\_\+\+TIMEOUT\+\_\+\+MS}}~10000
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{tls__channel__handler_8c_a834fb305a115ac228e8ada9e5690ce30}{aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+init\+\_\+default\+\_\+client}} (struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$options, struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}})
\item 
void \mbox{\hyperlink{tls__channel__handler_8c_aa6f480f878fa29f4e1acbb144748495a}{aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+clean\+\_\+up}} (struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$options)
\item 
static int \mbox{\hyperlink{tls__channel__handler_8c_a5cf3b7524cfd58827afa2160e3ce8fd5}{s\+\_\+load\+\_\+null\+\_\+terminated\+\_\+buffer\+\_\+from\+\_\+cursor}} (struct \mbox{\hyperlink{structaws__byte__buf}{aws\+\_\+byte\+\_\+buf}} $\ast$load\+\_\+into, struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$from)
\item 
int \mbox{\hyperlink{tls__channel__handler_8c_afb566487544ad963ccd694cdeab75a79}{aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+init\+\_\+client\+\_\+mtls}} (struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$options, struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$\mbox{\hyperlink{s2n__client__key__recv__fuzz__test_8c_a847d4509baf1204aa3eef3d8044ad04c}{cert}}, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$pkey)
\item 
int \mbox{\hyperlink{tls__channel__handler_8c_a5118482d70b1ec0f7a2a8b8b6ebb7839}{aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+init\+\_\+client\+\_\+mtls\+\_\+from\+\_\+path}} (struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$options, struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, const char $\ast$cert\+\_\+path, const char $\ast$pkey\+\_\+path)
\item 
int \mbox{\hyperlink{tls__channel__handler_8c_a745b942a1226e180825664adf124b40d}{aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+init\+\_\+default\+\_\+server\+\_\+from\+\_\+path}} (struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$options, struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, const char $\ast$cert\+\_\+path, const char $\ast$pkey\+\_\+path)
\item 
int \mbox{\hyperlink{tls__channel__handler_8c_ab3518eac999407faca68bbbd7f362f20}{aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+init\+\_\+default\+\_\+server}} (struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$options, struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$\mbox{\hyperlink{s2n__client__key__recv__fuzz__test_8c_a847d4509baf1204aa3eef3d8044ad04c}{cert}}, struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$pkey)
\item 
int \mbox{\hyperlink{tls__channel__handler_8c_a9b888c61093bb975f1653cbcf7e5d484}{aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+set\+\_\+alpn\+\_\+list}} (struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$options, const char $\ast$alpn\+\_\+list)
\item 
void \mbox{\hyperlink{tls__channel__handler_8c_abe930ed05efb40b7d583263fe17d05e4}{aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+set\+\_\+verify\+\_\+peer}} (struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$options, \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}} verify\+\_\+peer)
\item 
void \mbox{\hyperlink{tls__channel__handler_8c_a3c6cd3b2b0392894c09ce0258389e41c}{aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+set\+\_\+minimum\+\_\+tls\+\_\+version}} (struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$options, enum \mbox{\hyperlink{tls__channel__handler_8h_abbbf7d37040b11f033b40ca7bac19e88}{aws\+\_\+tls\+\_\+versions}} minimum\+\_\+tls\+\_\+version)
\item 
int \mbox{\hyperlink{tls__channel__handler_8c_a768bcb11bfbdaafb8c48e563af35e9d0}{aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+override\+\_\+default\+\_\+trust\+\_\+store\+\_\+from\+\_\+path}} (struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$options, const char $\ast$ca\+\_\+path, const char $\ast$ca\+\_\+file)
\item 
int \mbox{\hyperlink{tls__channel__handler_8c_a772506549c9e54267cd343c654cf64eb}{aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+override\+\_\+default\+\_\+trust\+\_\+store}} (struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$options, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$ca\+\_\+file)
\item 
void \mbox{\hyperlink{tls__channel__handler_8c_aad985177cec91b0803d25e66a9f0920e}{aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+init\+\_\+from\+\_\+ctx}} (struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$conn\+\_\+options, struct \mbox{\hyperlink{structaws__tls__ctx}{aws\+\_\+tls\+\_\+ctx}} $\ast$\mbox{\hyperlink{connection__state__test_8c_a1f6d09b30c54854dfca659b7463ac207}{ctx}})
\item 
int \mbox{\hyperlink{tls__channel__handler_8c_a2fc5600e4533077164f37c7511c2a655}{aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+copy}} (struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$to, const struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$from)
\item 
void \mbox{\hyperlink{tls__channel__handler_8c_afda9d189e8998661e5ad6e5e32c5edb7}{aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+clean\+\_\+up}} (struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$\mbox{\hyperlink{connection__state__test_8c_afe7db95b0401b8dbd61145beab76a3c4}{connection\+\_\+options}})
\item 
void \mbox{\hyperlink{tls__channel__handler_8c_a519f6b58b14352d4d9891b47269c7464}{aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+set\+\_\+callbacks}} (struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$conn\+\_\+options, \mbox{\hyperlink{tls__channel__handler_8h_a240e06727f51737d1155842078b3f4d6}{aws\+\_\+tls\+\_\+on\+\_\+negotiation\+\_\+result\+\_\+fn}} $\ast$on\+\_\+negotiation\+\_\+result, \mbox{\hyperlink{tls__channel__handler_8h_ac830427f63136275ea488ef72feee6c0}{aws\+\_\+tls\+\_\+on\+\_\+data\+\_\+read\+\_\+fn}} $\ast$on\+\_\+data\+\_\+read, \mbox{\hyperlink{tls__channel__handler_8h_a3b389b01f78075673ba3a91f949bf880}{aws\+\_\+tls\+\_\+on\+\_\+error\+\_\+fn}} $\ast$on\+\_\+error, void $\ast$\mbox{\hyperlink{event__stream__rpc__server__connection__test_8c_af1abaca9a982b3cdb0b118914416c39b}{user\+\_\+data}})
\item 
int \mbox{\hyperlink{tls__channel__handler_8c_af89ac25dfc55f7172840f69ddd977b56}{aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+set\+\_\+server\+\_\+name}} (struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$conn\+\_\+options, struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$server\+\_\+name)
\item 
int \mbox{\hyperlink{tls__channel__handler_8c_ac901de1e85c677e7ab7816b53e5cf377}{aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+set\+\_\+alpn\+\_\+list}} (struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$conn\+\_\+options, struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, const char $\ast$alpn\+\_\+list)
\item 
int \mbox{\hyperlink{tls__channel__handler_8c_ab042b94e5f3b8e968384a8453d7e2a1e}{aws\+\_\+channel\+\_\+setup\+\_\+client\+\_\+tls}} (struct \mbox{\hyperlink{structaws__channel__slot}{aws\+\_\+channel\+\_\+slot}} $\ast$right\+\_\+of\+\_\+slot, struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$tls\+\_\+options)
\item 
struct \mbox{\hyperlink{structaws__tls__ctx}{aws\+\_\+tls\+\_\+ctx}} $\ast$ \mbox{\hyperlink{tls__channel__handler_8c_aee66bafc019b8079933415831aed19ac}{aws\+\_\+tls\+\_\+ctx\+\_\+acquire}} (struct \mbox{\hyperlink{structaws__tls__ctx}{aws\+\_\+tls\+\_\+ctx}} $\ast$\mbox{\hyperlink{connection__state__test_8c_a1f6d09b30c54854dfca659b7463ac207}{ctx}})
\item 
void \mbox{\hyperlink{tls__channel__handler_8c_aed42974c36a20d0211f1ff2d46230dea}{aws\+\_\+tls\+\_\+ctx\+\_\+release}} (struct \mbox{\hyperlink{structaws__tls__ctx}{aws\+\_\+tls\+\_\+ctx}} $\ast$\mbox{\hyperlink{connection__state__test_8c_a1f6d09b30c54854dfca659b7463ac207}{ctx}})
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{tls__channel__handler_8c_a7b782f806da77a92e2463e035915c4b9}\label{tls__channel__handler_8c_a7b782f806da77a92e2463e035915c4b9}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!AWS\_DEFAULT\_TLS\_TIMEOUT\_MS@{AWS\_DEFAULT\_TLS\_TIMEOUT\_MS}}
\index{AWS\_DEFAULT\_TLS\_TIMEOUT\_MS@{AWS\_DEFAULT\_TLS\_TIMEOUT\_MS}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{AWS\_DEFAULT\_TLS\_TIMEOUT\_MS}{AWS\_DEFAULT\_TLS\_TIMEOUT\_MS}}
{\footnotesize\ttfamily \#define AWS\+\_\+\+DEFAULT\+\_\+\+TLS\+\_\+\+TIMEOUT\+\_\+\+MS~10000}

Copyright Amazon.\+com, Inc. or its affiliates. All Rights Reserved. SPDX-\/\+License-\/\+Identifier\+: Apache-\/2.\+0. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{tls__channel__handler_8c_ab042b94e5f3b8e968384a8453d7e2a1e}\label{tls__channel__handler_8c_ab042b94e5f3b8e968384a8453d7e2a1e}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_channel\_setup\_client\_tls@{aws\_channel\_setup\_client\_tls}}
\index{aws\_channel\_setup\_client\_tls@{aws\_channel\_setup\_client\_tls}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_channel\_setup\_client\_tls()}{aws\_channel\_setup\_client\_tls()}}
{\footnotesize\ttfamily int aws\+\_\+channel\+\_\+setup\+\_\+client\+\_\+tls (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__channel__slot}{aws\+\_\+channel\+\_\+slot}} $\ast$}]{right\+\_\+of\+\_\+slot,  }\item[{struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$}]{tls\+\_\+options }\end{DoxyParamCaption})}

\mbox{\Hypertarget{tls__channel__handler_8c_afda9d189e8998661e5ad6e5e32c5edb7}\label{tls__channel__handler_8c_afda9d189e8998661e5ad6e5e32c5edb7}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_connection\_options\_clean\_up@{aws\_tls\_connection\_options\_clean\_up}}
\index{aws\_tls\_connection\_options\_clean\_up@{aws\_tls\_connection\_options\_clean\_up}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_connection\_options\_clean\_up()}{aws\_tls\_connection\_options\_clean\_up()}}
{\footnotesize\ttfamily void aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+clean\+\_\+up (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$}]{connection\+\_\+options }\end{DoxyParamCaption})}

Cleans up resources in \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}}. This can be called immediately after initializing a tls handler, or if using the bootstrap api, immediately after asking for a channel. \mbox{\Hypertarget{tls__channel__handler_8c_a2fc5600e4533077164f37c7511c2a655}\label{tls__channel__handler_8c_a2fc5600e4533077164f37c7511c2a655}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_connection\_options\_copy@{aws\_tls\_connection\_options\_copy}}
\index{aws\_tls\_connection\_options\_copy@{aws\_tls\_connection\_options\_copy}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_connection\_options\_copy()}{aws\_tls\_connection\_options\_copy()}}
{\footnotesize\ttfamily int aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+copy (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$}]{to,  }\item[{const struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$}]{from }\end{DoxyParamCaption})}

Copies \textquotesingle{}from\textquotesingle{} to \textquotesingle{}to\textquotesingle{} \mbox{\Hypertarget{tls__channel__handler_8c_aad985177cec91b0803d25e66a9f0920e}\label{tls__channel__handler_8c_aad985177cec91b0803d25e66a9f0920e}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_connection\_options\_init\_from\_ctx@{aws\_tls\_connection\_options\_init\_from\_ctx}}
\index{aws\_tls\_connection\_options\_init\_from\_ctx@{aws\_tls\_connection\_options\_init\_from\_ctx}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_connection\_options\_init\_from\_ctx()}{aws\_tls\_connection\_options\_init\_from\_ctx()}}
{\footnotesize\ttfamily void aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+init\+\_\+from\+\_\+ctx (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$}]{conn\+\_\+options,  }\item[{struct \mbox{\hyperlink{structaws__tls__ctx}{aws\+\_\+tls\+\_\+ctx}} $\ast$}]{ctx }\end{DoxyParamCaption})}

Initializes default connection options from an instance ot \mbox{\hyperlink{structaws__tls__ctx}{aws\+\_\+tls\+\_\+ctx}}. \mbox{\Hypertarget{tls__channel__handler_8c_ac901de1e85c677e7ab7816b53e5cf377}\label{tls__channel__handler_8c_ac901de1e85c677e7ab7816b53e5cf377}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_connection\_options\_set\_alpn\_list@{aws\_tls\_connection\_options\_set\_alpn\_list}}
\index{aws\_tls\_connection\_options\_set\_alpn\_list@{aws\_tls\_connection\_options\_set\_alpn\_list}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_connection\_options\_set\_alpn\_list()}{aws\_tls\_connection\_options\_set\_alpn\_list()}}
{\footnotesize\ttfamily int aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+set\+\_\+alpn\+\_\+list (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$}]{conn\+\_\+options,  }\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{const char $\ast$}]{alpn\+\_\+list }\end{DoxyParamCaption})}

Sets alpn list in the form \texorpdfstring{$<$}{<}protocol1;protocol2;...\texorpdfstring{$>$}{>}. A maximum of 4 protocols are supported. alpn\+\_\+list is copied. This value is already inherited from \mbox{\hyperlink{structaws__tls__ctx}{aws\+\_\+tls\+\_\+ctx}}, but the \mbox{\hyperlink{structaws__tls__ctx}{aws\+\_\+tls\+\_\+ctx}} is expensive, and should be used across as many connections as possible. If you want to set this per connection, set it here. \mbox{\Hypertarget{tls__channel__handler_8c_a519f6b58b14352d4d9891b47269c7464}\label{tls__channel__handler_8c_a519f6b58b14352d4d9891b47269c7464}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_connection\_options\_set\_callbacks@{aws\_tls\_connection\_options\_set\_callbacks}}
\index{aws\_tls\_connection\_options\_set\_callbacks@{aws\_tls\_connection\_options\_set\_callbacks}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_connection\_options\_set\_callbacks()}{aws\_tls\_connection\_options\_set\_callbacks()}}
{\footnotesize\ttfamily void aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+set\+\_\+callbacks (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$}]{conn\+\_\+options,  }\item[{\mbox{\hyperlink{tls__channel__handler_8h_a240e06727f51737d1155842078b3f4d6}{aws\+\_\+tls\+\_\+on\+\_\+negotiation\+\_\+result\+\_\+fn}} $\ast$}]{on\+\_\+negotiation\+\_\+result,  }\item[{\mbox{\hyperlink{tls__channel__handler_8h_ac830427f63136275ea488ef72feee6c0}{aws\+\_\+tls\+\_\+on\+\_\+data\+\_\+read\+\_\+fn}} $\ast$}]{on\+\_\+data\+\_\+read,  }\item[{\mbox{\hyperlink{tls__channel__handler_8h_a3b389b01f78075673ba3a91f949bf880}{aws\+\_\+tls\+\_\+on\+\_\+error\+\_\+fn}} $\ast$}]{on\+\_\+error,  }\item[{void $\ast$}]{user\+\_\+data }\end{DoxyParamCaption})}

Sets callbacks for use with a tls connection. \mbox{\Hypertarget{tls__channel__handler_8c_af89ac25dfc55f7172840f69ddd977b56}\label{tls__channel__handler_8c_af89ac25dfc55f7172840f69ddd977b56}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_connection\_options\_set\_server\_name@{aws\_tls\_connection\_options\_set\_server\_name}}
\index{aws\_tls\_connection\_options\_set\_server\_name@{aws\_tls\_connection\_options\_set\_server\_name}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_connection\_options\_set\_server\_name()}{aws\_tls\_connection\_options\_set\_server\_name()}}
{\footnotesize\ttfamily int aws\+\_\+tls\+\_\+connection\+\_\+options\+\_\+set\+\_\+server\+\_\+name (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__connection__options}{aws\+\_\+tls\+\_\+connection\+\_\+options}} $\ast$}]{conn\+\_\+options,  }\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{server\+\_\+name }\end{DoxyParamCaption})}

Sets server name to use for the SNI extension (supported everywhere), as well as x.\+509 validation. If you don\textquotesingle{}t set this, your x.\+509 validation will likely fail. \mbox{\Hypertarget{tls__channel__handler_8c_aee66bafc019b8079933415831aed19ac}\label{tls__channel__handler_8c_aee66bafc019b8079933415831aed19ac}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_acquire@{aws\_tls\_ctx\_acquire}}
\index{aws\_tls\_ctx\_acquire@{aws\_tls\_ctx\_acquire}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_acquire()}{aws\_tls\_ctx\_acquire()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structaws__tls__ctx}{aws\+\_\+tls\+\_\+ctx}}$\ast$ aws\+\_\+tls\+\_\+ctx\+\_\+acquire (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx}{aws\+\_\+tls\+\_\+ctx}} $\ast$}]{ctx }\end{DoxyParamCaption})}

Increments the reference count on the tls context, allowing the caller to take a reference to it.

Returns the same tls context passed in. \mbox{\Hypertarget{tls__channel__handler_8c_aa6f480f878fa29f4e1acbb144748495a}\label{tls__channel__handler_8c_aa6f480f878fa29f4e1acbb144748495a}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_options\_clean\_up@{aws\_tls\_ctx\_options\_clean\_up}}
\index{aws\_tls\_ctx\_options\_clean\_up@{aws\_tls\_ctx\_options\_clean\_up}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_options\_clean\_up()}{aws\_tls\_ctx\_options\_clean\_up()}}
{\footnotesize\ttfamily void aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+clean\+\_\+up (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$}]{options }\end{DoxyParamCaption})}

Cleans up resources allocated by init\+\_\+$\ast$ functions \mbox{\Hypertarget{tls__channel__handler_8c_afb566487544ad963ccd694cdeab75a79}\label{tls__channel__handler_8c_afb566487544ad963ccd694cdeab75a79}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_options\_init\_client\_mtls@{aws\_tls\_ctx\_options\_init\_client\_mtls}}
\index{aws\_tls\_ctx\_options\_init\_client\_mtls@{aws\_tls\_ctx\_options\_init\_client\_mtls}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_options\_init\_client\_mtls()}{aws\_tls\_ctx\_options\_init\_client\_mtls()}}
{\footnotesize\ttfamily int aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+init\+\_\+client\+\_\+mtls (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$}]{options,  }\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{cert,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{pkey }\end{DoxyParamCaption})}

Initializes options for use with mutual tls in client mode. cert and pkey are copied. cert and pkey are treated as PKCS\#7 PEM armored. \mbox{\Hypertarget{tls__channel__handler_8c_a5118482d70b1ec0f7a2a8b8b6ebb7839}\label{tls__channel__handler_8c_a5118482d70b1ec0f7a2a8b8b6ebb7839}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_options\_init\_client\_mtls\_from\_path@{aws\_tls\_ctx\_options\_init\_client\_mtls\_from\_path}}
\index{aws\_tls\_ctx\_options\_init\_client\_mtls\_from\_path@{aws\_tls\_ctx\_options\_init\_client\_mtls\_from\_path}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_options\_init\_client\_mtls\_from\_path()}{aws\_tls\_ctx\_options\_init\_client\_mtls\_from\_path()}}
{\footnotesize\ttfamily int aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+init\+\_\+client\+\_\+mtls\+\_\+from\+\_\+path (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$}]{options,  }\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{const char $\ast$}]{cert\+\_\+path,  }\item[{const char $\ast$}]{pkey\+\_\+path }\end{DoxyParamCaption})}

Initializes options for use with mutual tls in client mode. cert\+\_\+path and pkey\+\_\+path are paths to files on disk. cert\+\_\+path and pkey\+\_\+path are treated as PKCS\#7 PEM armored. They are loaded from disk and stored in buffers internally. \mbox{\Hypertarget{tls__channel__handler_8c_a834fb305a115ac228e8ada9e5690ce30}\label{tls__channel__handler_8c_a834fb305a115ac228e8ada9e5690ce30}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_options\_init\_default\_client@{aws\_tls\_ctx\_options\_init\_default\_client}}
\index{aws\_tls\_ctx\_options\_init\_default\_client@{aws\_tls\_ctx\_options\_init\_default\_client}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_options\_init\_default\_client()}{aws\_tls\_ctx\_options\_init\_default\_client()}}
{\footnotesize\ttfamily void aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+init\+\_\+default\+\_\+client (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$}]{options,  }\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator }\end{DoxyParamCaption})}

Initializes options with default client options \mbox{\Hypertarget{tls__channel__handler_8c_ab3518eac999407faca68bbbd7f362f20}\label{tls__channel__handler_8c_ab3518eac999407faca68bbbd7f362f20}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_options\_init\_default\_server@{aws\_tls\_ctx\_options\_init\_default\_server}}
\index{aws\_tls\_ctx\_options\_init\_default\_server@{aws\_tls\_ctx\_options\_init\_default\_server}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_options\_init\_default\_server()}{aws\_tls\_ctx\_options\_init\_default\_server()}}
{\footnotesize\ttfamily int aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+init\+\_\+default\+\_\+server (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$}]{options,  }\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{cert,  }\item[{struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{pkey }\end{DoxyParamCaption})}

Initializes options for use with in server mode. cert and pkey are copied. cert and pkey are treated as PKCS\#7 PEM armored. \mbox{\Hypertarget{tls__channel__handler_8c_a745b942a1226e180825664adf124b40d}\label{tls__channel__handler_8c_a745b942a1226e180825664adf124b40d}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_options\_init\_default\_server\_from\_path@{aws\_tls\_ctx\_options\_init\_default\_server\_from\_path}}
\index{aws\_tls\_ctx\_options\_init\_default\_server\_from\_path@{aws\_tls\_ctx\_options\_init\_default\_server\_from\_path}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_options\_init\_default\_server\_from\_path()}{aws\_tls\_ctx\_options\_init\_default\_server\_from\_path()}}
{\footnotesize\ttfamily int aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+init\+\_\+default\+\_\+server\+\_\+from\+\_\+path (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$}]{options,  }\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{const char $\ast$}]{cert\+\_\+path,  }\item[{const char $\ast$}]{pkey\+\_\+path }\end{DoxyParamCaption})}

Initializes options for use with in server mode. cert\+\_\+path and pkey\+\_\+path are paths to files on disk. cert\+\_\+path and pkey\+\_\+path are treated as PKCS\#7 PEM armored. They are loaded from disk and stored in buffers internally. \mbox{\Hypertarget{tls__channel__handler_8c_a772506549c9e54267cd343c654cf64eb}\label{tls__channel__handler_8c_a772506549c9e54267cd343c654cf64eb}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_options\_override\_default\_trust\_store@{aws\_tls\_ctx\_options\_override\_default\_trust\_store}}
\index{aws\_tls\_ctx\_options\_override\_default\_trust\_store@{aws\_tls\_ctx\_options\_override\_default\_trust\_store}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_options\_override\_default\_trust\_store()}{aws\_tls\_ctx\_options\_override\_default\_trust\_store()}}
{\footnotesize\ttfamily int aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+override\+\_\+default\+\_\+trust\+\_\+store (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$}]{options,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{ca\+\_\+file }\end{DoxyParamCaption})}

Override the default trust store. ca\+\_\+file is a buffer containing a PEM armored chain of trusted CA certificates. ca\+\_\+file is copied. \mbox{\Hypertarget{tls__channel__handler_8c_a768bcb11bfbdaafb8c48e563af35e9d0}\label{tls__channel__handler_8c_a768bcb11bfbdaafb8c48e563af35e9d0}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_options\_override\_default\_trust\_store\_from\_path@{aws\_tls\_ctx\_options\_override\_default\_trust\_store\_from\_path}}
\index{aws\_tls\_ctx\_options\_override\_default\_trust\_store\_from\_path@{aws\_tls\_ctx\_options\_override\_default\_trust\_store\_from\_path}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_options\_override\_default\_trust\_store\_from\_path()}{aws\_tls\_ctx\_options\_override\_default\_trust\_store\_from\_path()}}
{\footnotesize\ttfamily int aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+override\+\_\+default\+\_\+trust\+\_\+store\+\_\+from\+\_\+path (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$}]{options,  }\item[{const char $\ast$}]{ca\+\_\+path,  }\item[{const char $\ast$}]{ca\+\_\+file }\end{DoxyParamCaption})}

Override the default trust store. ca\+\_\+path is a path to a directory on disk containing trusted certificates. This is only supported on Unix systems (otherwise this parameter is ignored). ca\+\_\+file is a path to a file on disk containing trusted certificates. ca\+\_\+file is loaded from disk and stored in an internal buffer. \mbox{\Hypertarget{tls__channel__handler_8c_a9b888c61093bb975f1653cbcf7e5d484}\label{tls__channel__handler_8c_a9b888c61093bb975f1653cbcf7e5d484}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_options\_set\_alpn\_list@{aws\_tls\_ctx\_options\_set\_alpn\_list}}
\index{aws\_tls\_ctx\_options\_set\_alpn\_list@{aws\_tls\_ctx\_options\_set\_alpn\_list}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_options\_set\_alpn\_list()}{aws\_tls\_ctx\_options\_set\_alpn\_list()}}
{\footnotesize\ttfamily int aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+set\+\_\+alpn\+\_\+list (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$}]{options,  }\item[{const char $\ast$}]{alpn\+\_\+list }\end{DoxyParamCaption})}

Sets alpn list in the form \texorpdfstring{$<$}{<}protocol1;protocol2;...\texorpdfstring{$>$}{>}. A maximum of 4 protocols are supported. alpn\+\_\+list is copied. \mbox{\Hypertarget{tls__channel__handler_8c_a3c6cd3b2b0392894c09ce0258389e41c}\label{tls__channel__handler_8c_a3c6cd3b2b0392894c09ce0258389e41c}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_options\_set\_minimum\_tls\_version@{aws\_tls\_ctx\_options\_set\_minimum\_tls\_version}}
\index{aws\_tls\_ctx\_options\_set\_minimum\_tls\_version@{aws\_tls\_ctx\_options\_set\_minimum\_tls\_version}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_options\_set\_minimum\_tls\_version()}{aws\_tls\_ctx\_options\_set\_minimum\_tls\_version()}}
{\footnotesize\ttfamily void aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+set\+\_\+minimum\+\_\+tls\+\_\+version (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$}]{options,  }\item[{enum \mbox{\hyperlink{tls__channel__handler_8h_abbbf7d37040b11f033b40ca7bac19e88}{aws\+\_\+tls\+\_\+versions}}}]{minimum\+\_\+tls\+\_\+version }\end{DoxyParamCaption})}

Sets the minimum TLS version to allow. \mbox{\Hypertarget{tls__channel__handler_8c_abe930ed05efb40b7d583263fe17d05e4}\label{tls__channel__handler_8c_abe930ed05efb40b7d583263fe17d05e4}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_options\_set\_verify\_peer@{aws\_tls\_ctx\_options\_set\_verify\_peer}}
\index{aws\_tls\_ctx\_options\_set\_verify\_peer@{aws\_tls\_ctx\_options\_set\_verify\_peer}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_options\_set\_verify\_peer()}{aws\_tls\_ctx\_options\_set\_verify\_peer()}}
{\footnotesize\ttfamily void aws\+\_\+tls\+\_\+ctx\+\_\+options\+\_\+set\+\_\+verify\+\_\+peer (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}} $\ast$}]{options,  }\item[{\mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}}}]{verify\+\_\+peer }\end{DoxyParamCaption})}

Enables or disables x.\+509 validation. Disable this only for testing. To enable mutual TLS in server mode, set verify\+\_\+peer to true. \mbox{\Hypertarget{tls__channel__handler_8c_aed42974c36a20d0211f1ff2d46230dea}\label{tls__channel__handler_8c_aed42974c36a20d0211f1ff2d46230dea}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!aws\_tls\_ctx\_release@{aws\_tls\_ctx\_release}}
\index{aws\_tls\_ctx\_release@{aws\_tls\_ctx\_release}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{aws\_tls\_ctx\_release()}{aws\_tls\_ctx\_release()}}
{\footnotesize\ttfamily void aws\+\_\+tls\+\_\+ctx\+\_\+release (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__tls__ctx}{aws\+\_\+tls\+\_\+ctx}} $\ast$}]{ctx }\end{DoxyParamCaption})}

Decrements a tls context\textquotesingle{}s ref count. When the ref count drops to zero, the object will be destroyed. \mbox{\Hypertarget{tls__channel__handler_8c_a5cf3b7524cfd58827afa2160e3ce8fd5}\label{tls__channel__handler_8c_a5cf3b7524cfd58827afa2160e3ce8fd5}} 
\index{tls\_channel\_handler.c@{tls\_channel\_handler.c}!s\_load\_null\_terminated\_buffer\_from\_cursor@{s\_load\_null\_terminated\_buffer\_from\_cursor}}
\index{s\_load\_null\_terminated\_buffer\_from\_cursor@{s\_load\_null\_terminated\_buffer\_from\_cursor}!tls\_channel\_handler.c@{tls\_channel\_handler.c}}
\doxysubsubsection{\texorpdfstring{s\_load\_null\_terminated\_buffer\_from\_cursor()}{s\_load\_null\_terminated\_buffer\_from\_cursor()}}
{\footnotesize\ttfamily static int s\+\_\+load\+\_\+null\+\_\+terminated\+\_\+buffer\+\_\+from\+\_\+cursor (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__byte__buf}{aws\+\_\+byte\+\_\+buf}} $\ast$}]{load\+\_\+into,  }\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{from }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

