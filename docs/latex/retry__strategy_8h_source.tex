\hypertarget{retry__strategy_8h_source}{}\doxysection{retry\+\_\+strategy.\+h}
\label{retry__strategy_8h_source}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/io/include/aws/io/retry\_strategy.h@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/io/include/aws/io/retry\_strategy.h}}
\mbox{\hyperlink{retry__strategy_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef AWS\_IO\_CLIENT\_RETRY\_STRATEGY\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define AWS\_IO\_CLIENT\_RETRY\_STRATEGY\_H}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-io_2include_2aws_2io_2_exports_8h}{aws/io/exports.h}}>}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{atomics_8h}{aws/common/atomics.h}}>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{byte__buf_8h}{aws/common/byte\_buf.h}}>}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__strategy}{aws\_retry\_strategy}};}
\DoxyCodeLine{13 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__token}{aws\_retry\_token}};}
\DoxyCodeLine{14 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__event__loop__group}{aws\_event\_loop\_group}};}
\DoxyCodeLine{15 }
\DoxyCodeLine{23 \textcolor{keyword}{typedef} void(\mbox{\hyperlink{retry__strategy_8h_a840055993c2a9788207792f45db2e27f}{aws\_retry\_strategy\_on\_retry\_token\_acquired\_fn}})(}
\DoxyCodeLine{24     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__strategy}{aws\_retry\_strategy}} *retry\_strategy,}
\DoxyCodeLine{25     \textcolor{keywordtype}{int} error\_code,}
\DoxyCodeLine{26     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__token}{aws\_retry\_token}} *token,}
\DoxyCodeLine{27     \textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{28 }
\DoxyCodeLine{36 \textcolor{keyword}{typedef} void(\mbox{\hyperlink{retry__strategy_8h_ade4a870a92bb428e8688ec1c07273220}{aws\_retry\_strategy\_on\_retry\_ready\_fn}})(\textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__token}{aws\_retry\_token}} *token, \textcolor{keywordtype}{int} error\_code, \textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{37 }
\DoxyCodeLine{38 \textcolor{keyword}{enum} \mbox{\hyperlink{retry__strategy_8h_af89c6cafd32c7015ca7157a0c36ecb0c}{aws\_retry\_error\_type}} \{}
\DoxyCodeLine{42     \mbox{\hyperlink{retry__strategy_8h_af89c6cafd32c7015ca7157a0c36ecb0caac26e05a8ef7994a7690b1482dda89ac}{AWS\_RETRY\_ERROR\_TYPE\_TRANSIENT}},}
\DoxyCodeLine{44     \mbox{\hyperlink{retry__strategy_8h_af89c6cafd32c7015ca7157a0c36ecb0ca5020ebb2f91809211f484b6e8b94f3f4}{AWS\_RETRY\_ERROR\_TYPE\_THROTTLING}},}
\DoxyCodeLine{47     \mbox{\hyperlink{retry__strategy_8h_af89c6cafd32c7015ca7157a0c36ecb0ca3df5173a0d4dcb0a9fee714754587f94}{AWS\_RETRY\_ERROR\_TYPE\_SERVER\_ERROR}},}
\DoxyCodeLine{49     \mbox{\hyperlink{retry__strategy_8h_af89c6cafd32c7015ca7157a0c36ecb0ca47b0edab8d75d0678f4743ef36529cfa}{AWS\_RETRY\_ERROR\_TYPE\_CLIENT\_ERROR}},}
\DoxyCodeLine{50 \};}
\DoxyCodeLine{51 }
\DoxyCodeLine{52 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__strategy__vtable}{aws\_retry\_strategy\_vtable}} \{}
\DoxyCodeLine{53     void (*\mbox{\hyperlink{structaws__retry__strategy__vtable_a0bb48584f5f36b0258d0231a8d743c41}{destroy}})(\textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__strategy}{aws\_retry\_strategy}} *retry\_strategy);}
\DoxyCodeLine{54     int (*\mbox{\hyperlink{structaws__retry__strategy__vtable_a358f1f061cb4db7524b4674be5df15e4}{acquire\_token}})(}
\DoxyCodeLine{55         \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__strategy}{aws\_retry\_strategy}} *retry\_strategy,}
\DoxyCodeLine{56         \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *partition\_id,}
\DoxyCodeLine{57         \mbox{\hyperlink{retry__strategy_8h_a840055993c2a9788207792f45db2e27f}{aws\_retry\_strategy\_on\_retry\_token\_acquired\_fn}} *on\_acquired,}
\DoxyCodeLine{58         \textcolor{keywordtype}{void} *user\_data,}
\DoxyCodeLine{59         uint64\_t timeout\_ms);}
\DoxyCodeLine{60     int (*\mbox{\hyperlink{structaws__retry__strategy__vtable_ad21c911c31114164368a08a559e3d376}{schedule\_retry}})(}
\DoxyCodeLine{61         \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__token}{aws\_retry\_token}} *token,}
\DoxyCodeLine{62         \textcolor{keyword}{enum} \mbox{\hyperlink{retry__strategy_8h_af89c6cafd32c7015ca7157a0c36ecb0c}{aws\_retry\_error\_type}} error\_type,}
\DoxyCodeLine{63         \mbox{\hyperlink{retry__strategy_8h_ade4a870a92bb428e8688ec1c07273220}{aws\_retry\_strategy\_on\_retry\_ready\_fn}} *retry\_ready,}
\DoxyCodeLine{64         \textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{65     int (*\mbox{\hyperlink{structaws__retry__strategy__vtable_a0480f716f73a1e440020517649959938}{record\_success}})(\textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__token}{aws\_retry\_token}} *token);}
\DoxyCodeLine{66     void (*\mbox{\hyperlink{structaws__retry__strategy__vtable_a18da8a69cbaba0eb44b5e2fedffb5a80}{release\_token}})(\textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__token}{aws\_retry\_token}} *token);}
\DoxyCodeLine{67 \};}
\DoxyCodeLine{68 }
\DoxyCodeLine{69 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__strategy}{aws\_retry\_strategy}} \{}
\DoxyCodeLine{70     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{structaws__retry__strategy_a7af5c628300e7722b48ee94ffbdf50ee}{allocator}};}
\DoxyCodeLine{71     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__strategy__vtable}{aws\_retry\_strategy\_vtable}} *\mbox{\hyperlink{structaws__retry__strategy_a55eb0e604a123e80cf8c58a2c2a74f64}{vtable}};}
\DoxyCodeLine{72     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__atomic__var}{aws\_atomic\_var}} \mbox{\hyperlink{structaws__retry__strategy_ae55966d501e9778c7284f7ac785f7249}{ref\_count}};}
\DoxyCodeLine{73     \textcolor{keywordtype}{void} *\mbox{\hyperlink{structaws__retry__strategy_a69605e84cb9c7afd9aebf586926a86d4}{impl}};}
\DoxyCodeLine{74 \};}
\DoxyCodeLine{75 }
\DoxyCodeLine{76 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__token}{aws\_retry\_token}} \{}
\DoxyCodeLine{77     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{structaws__retry__token_a6ec55d747c30e2d0808bee8b14d5aa66}{allocator}};}
\DoxyCodeLine{78     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__strategy}{aws\_retry\_strategy}} *\mbox{\hyperlink{structaws__retry__token_ae655df17ae741e5467cc8275b914f9b2}{retry\_strategy}};}
\DoxyCodeLine{79     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__atomic__var}{aws\_atomic\_var}} \mbox{\hyperlink{structaws__retry__token_a02a94e490c1de39c20d0b1b691b5df13}{ref\_count}};}
\DoxyCodeLine{80     \textcolor{keywordtype}{void} *\mbox{\hyperlink{structaws__retry__token_a9957069b8adb4e3cf33c1e8f0ce2bc78}{impl}};}
\DoxyCodeLine{81 \};}
\DoxyCodeLine{82 }
\DoxyCodeLine{89 \textcolor{keyword}{enum} \mbox{\hyperlink{retry__strategy_8h_a314f9a25f2e99a18e52c65ffd320b6c4}{aws\_exponential\_backoff\_jitter\_mode}} \{}
\DoxyCodeLine{90     \textcolor{comment}{/* Uses AWS\_EXPONENTIAL\_BACKOFF\_JITTER\_FULL */}}
\DoxyCodeLine{91     \mbox{\hyperlink{retry__strategy_8h_a314f9a25f2e99a18e52c65ffd320b6c4a1bf3d8c55077d0c42566172ea773e29d}{AWS\_EXPONENTIAL\_BACKOFF\_JITTER\_DEFAULT}},}
\DoxyCodeLine{92     \mbox{\hyperlink{retry__strategy_8h_a314f9a25f2e99a18e52c65ffd320b6c4ad35c426b5f1d38b9d73e269d5d3469a5}{AWS\_EXPONENTIAL\_BACKOFF\_JITTER\_NONE}},}
\DoxyCodeLine{93     \mbox{\hyperlink{retry__strategy_8h_a314f9a25f2e99a18e52c65ffd320b6c4a25b62d772d46662fe44cc1e48219ad6f}{AWS\_EXPONENTIAL\_BACKOFF\_JITTER\_FULL}},}
\DoxyCodeLine{94     \mbox{\hyperlink{retry__strategy_8h_a314f9a25f2e99a18e52c65ffd320b6c4afa14159a985f45394ef1837c1bf2d866}{AWS\_EXPONENTIAL\_BACKOFF\_JITTER\_DECORRELATED}},}
\DoxyCodeLine{95 \};}
\DoxyCodeLine{96 }
\DoxyCodeLine{101 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__exponential__backoff__retry__options}{aws\_exponential\_backoff\_retry\_options}} \{}
\DoxyCodeLine{103     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__event__loop__group}{aws\_event\_loop\_group}} *\mbox{\hyperlink{structaws__exponential__backoff__retry__options_af0deb06ac54739c54ca40536af36946b}{el\_group}};}
\DoxyCodeLine{105     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structaws__exponential__backoff__retry__options_ad01f89486559fd8bc2c810cf6c8570ed}{max\_retries}};}
\DoxyCodeLine{107     uint32\_t \mbox{\hyperlink{structaws__exponential__backoff__retry__options_ab81b752b1083a01a6f73fa7676ddd669}{backoff\_scale\_factor\_ms}};}
\DoxyCodeLine{110     \textcolor{keyword}{enum} \mbox{\hyperlink{retry__strategy_8h_a314f9a25f2e99a18e52c65ffd320b6c4}{aws\_exponential\_backoff\_jitter\_mode}} \mbox{\hyperlink{structaws__exponential__backoff__retry__options_aae27eb5456d87001595c59d98cd14d48}{jitter\_mode}};}
\DoxyCodeLine{112     uint64\_t (*\mbox{\hyperlink{structaws__exponential__backoff__retry__options_a9392f112f294f61c9b8922dbdddd21ae}{generate\_random}})(void);}
\DoxyCodeLine{113 \};}
\DoxyCodeLine{114 }
\DoxyCodeLine{115 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__standard__retry__options}{aws\_standard\_retry\_options}} \{}
\DoxyCodeLine{116     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__exponential__backoff__retry__options}{aws\_exponential\_backoff\_retry\_options}} \mbox{\hyperlink{structaws__standard__retry__options_ad2986fa1283f3b3cd6a4a490f7937b49}{backoff\_retry\_options}};}
\DoxyCodeLine{118     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structaws__standard__retry__options_a3c70c87e6afc9ab6df534ee8188a3813}{initial\_bucket\_capacity}};}
\DoxyCodeLine{119 \};}
\DoxyCodeLine{120 }
\DoxyCodeLine{121 \mbox{\hyperlink{macros_8h_ab6f66af8231eba5da061b9ada0d29bad}{AWS\_EXTERN\_C\_BEGIN}}}
\DoxyCodeLine{125 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-io_2include_2aws_2io_2_exports_8h_a26db8dfe8d149d3ddd330c792f3e67df}{AWS\_IO\_API}} \textcolor{keywordtype}{void} \mbox{\hyperlink{retry__strategy_8h_a873944178f109ca1607525dd96011cb9}{aws\_retry\_strategy\_acquire}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__retry__strategy}{aws\_retry\_strategy}} *retry\_strategy);}
\DoxyCodeLine{129 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-io_2include_2aws_2io_2_exports_8h_a26db8dfe8d149d3ddd330c792f3e67df}{AWS\_IO\_API}} \textcolor{keywordtype}{void} \mbox{\hyperlink{retry__strategy_8h_a622bfe5602501414d1aed990a4b6e0ad}{aws\_retry\_strategy\_release}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__retry__strategy}{aws\_retry\_strategy}} *retry\_strategy);}
\DoxyCodeLine{136 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-io_2include_2aws_2io_2_exports_8h_a26db8dfe8d149d3ddd330c792f3e67df}{AWS\_IO\_API}} \textcolor{keywordtype}{int} \mbox{\hyperlink{retry__strategy_8h_a9e5b94bc4256a8cdc498481176fe9a32}{aws\_retry\_strategy\_acquire\_retry\_token}}(}
\DoxyCodeLine{137     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__retry__strategy}{aws\_retry\_strategy}} *retry\_strategy,}
\DoxyCodeLine{138     \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *partition\_id,}
\DoxyCodeLine{139     \mbox{\hyperlink{retry__strategy_8h_a840055993c2a9788207792f45db2e27f}{aws\_retry\_strategy\_on\_retry\_token\_acquired\_fn}} *on\_acquired,}
\DoxyCodeLine{140     \textcolor{keywordtype}{void} *user\_data,}
\DoxyCodeLine{141     uint64\_t timeout\_ms);}
\DoxyCodeLine{142 }
\DoxyCodeLine{152 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-io_2include_2aws_2io_2_exports_8h_a26db8dfe8d149d3ddd330c792f3e67df}{AWS\_IO\_API}} \textcolor{keywordtype}{int} \mbox{\hyperlink{retry__strategy_8h_ae54ea9ff39ddd2a21c87f4ef3e6111d5}{aws\_retry\_strategy\_schedule\_retry}}(}
\DoxyCodeLine{153     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__retry__token}{aws\_retry\_token}} *token,}
\DoxyCodeLine{154     \textcolor{keyword}{enum} \mbox{\hyperlink{retry__strategy_8h_af89c6cafd32c7015ca7157a0c36ecb0c}{aws\_retry\_error\_type}} error\_type,}
\DoxyCodeLine{155     \mbox{\hyperlink{retry__strategy_8h_ade4a870a92bb428e8688ec1c07273220}{aws\_retry\_strategy\_on\_retry\_ready\_fn}} *retry\_ready,}
\DoxyCodeLine{156     \textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{162 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-io_2include_2aws_2io_2_exports_8h_a26db8dfe8d149d3ddd330c792f3e67df}{AWS\_IO\_API}} \textcolor{keywordtype}{int} \mbox{\hyperlink{retry__strategy_8h_a19f32fa855a56b5234d8abd40fa9922e}{aws\_retry\_token\_record\_success}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__retry__token}{aws\_retry\_token}} *token);}
\DoxyCodeLine{163 }
\DoxyCodeLine{167 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-io_2include_2aws_2io_2_exports_8h_a26db8dfe8d149d3ddd330c792f3e67df}{AWS\_IO\_API}} \textcolor{keywordtype}{void} \mbox{\hyperlink{retry__strategy_8h_a7d2534a49d742270a24a7483e176da9a}{aws\_retry\_token\_acquire}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__retry__token}{aws\_retry\_token}} *token);}
\DoxyCodeLine{168 }
\DoxyCodeLine{173 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-io_2include_2aws_2io_2_exports_8h_a26db8dfe8d149d3ddd330c792f3e67df}{AWS\_IO\_API}} \textcolor{keywordtype}{void} \mbox{\hyperlink{retry__strategy_8h_a99f18334e9edacf4b6d0e67e28c87955}{aws\_retry\_token\_release}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__retry__token}{aws\_retry\_token}} *token);}
\DoxyCodeLine{179 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-io_2include_2aws_2io_2_exports_8h_a26db8dfe8d149d3ddd330c792f3e67df}{AWS\_IO\_API}} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__strategy}{aws\_retry\_strategy}} *\mbox{\hyperlink{retry__strategy_8h_add4d5f38922a24014a74b58998527ef1}{aws\_retry\_strategy\_new\_exponential\_backoff}}(}
\DoxyCodeLine{180     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{structaws__retry__strategy_a7af5c628300e7722b48ee94ffbdf50ee}{allocator}},}
\DoxyCodeLine{181     \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__exponential__backoff__retry__options}{aws\_exponential\_backoff\_retry\_options}} *\mbox{\hyperlink{namespacecreate__project_ab7f741ca784276a3f80325a8fb79fd95}{config}});}
\DoxyCodeLine{182 }
\DoxyCodeLine{207 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-io_2include_2aws_2io_2_exports_8h_a26db8dfe8d149d3ddd330c792f3e67df}{AWS\_IO\_API}} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__retry__strategy}{aws\_retry\_strategy}} *\mbox{\hyperlink{retry__strategy_8h_a97ad1815c4d84da1651ef5d69ded9b3c}{aws\_retry\_strategy\_new\_standard}}(}
\DoxyCodeLine{208     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{structaws__retry__strategy_a7af5c628300e7722b48ee94ffbdf50ee}{allocator}},}
\DoxyCodeLine{209     \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__standard__retry__options}{aws\_standard\_retry\_options}} *\mbox{\hyperlink{namespacecreate__project_ab7f741ca784276a3f80325a8fb79fd95}{config}});}
\DoxyCodeLine{210 }
\DoxyCodeLine{211 \mbox{\hyperlink{macros_8h_a24efb76a3b128abc9c35d83cac0030c5}{AWS\_EXTERN\_C\_END}}}
\DoxyCodeLine{212 }
\DoxyCodeLine{213 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* AWS\_IO\_CLIENT\_RETRY\_STRATEGY\_H */}\textcolor{preprocessor}{}}

\end{DoxyCode}
