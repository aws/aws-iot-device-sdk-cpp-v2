\hypertarget{logging__test__utilities_8h}{}\doxysection{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/common/tests/logging/logging\+\_\+test\+\_\+utilities.h File Reference}
\label{logging__test__utilities_8h}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/common/tests/logging/logging\_test\_utilities.h@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/common/tests/logging/logging\_test\_utilities.h}}
{\ttfamily \#include $<$aws/common/logging.\+h$>$}\newline
{\ttfamily \#include $<$aws/testing/aws\+\_\+test\+\_\+harness.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{logging__test__utilities_8h_a3e85f1647074c331e1b13a07147397bd}{TEST\+\_\+\+LEVEL\+\_\+\+FILTER}}(log\+\_\+level,  expected,  action\+\_\+fn)
\item 
\#define \mbox{\hyperlink{logging__test__utilities_8h_a9a51810817aebf96edeeed062908cbfe}{DECLARE\+\_\+\+LOGF\+\_\+\+ALL\+\_\+\+LEVELS\+\_\+\+FUNCTION}}(fn\+\_\+name)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{logging__test__utilities_8h_a938c40742545fc8ed570be05e9bacc50}{do\+\_\+log\+\_\+test}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, enum \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_a204470b509c45cf30e9a58fce82d41b5}{aws\+\_\+log\+\_\+level}} level, const char $\ast$expected\+\_\+result, void($\ast$callback)(enum \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_a204470b509c45cf30e9a58fce82d41b5}{aws\+\_\+log\+\_\+level}}))
\item 
struct \mbox{\hyperlink{structaws__string}{aws\+\_\+string}} $\ast$ \mbox{\hyperlink{logging__test__utilities_8h_a151b857f48da6226d49f27e955a4f5fb}{aws\+\_\+string\+\_\+new\+\_\+log\+\_\+writer\+\_\+test\+\_\+filename}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}})
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{logging__test__utilities_8h_a9a51810817aebf96edeeed062908cbfe}\label{logging__test__utilities_8h_a9a51810817aebf96edeeed062908cbfe}} 
\index{logging\_test\_utilities.h@{logging\_test\_utilities.h}!DECLARE\_LOGF\_ALL\_LEVELS\_FUNCTION@{DECLARE\_LOGF\_ALL\_LEVELS\_FUNCTION}}
\index{DECLARE\_LOGF\_ALL\_LEVELS\_FUNCTION@{DECLARE\_LOGF\_ALL\_LEVELS\_FUNCTION}!logging\_test\_utilities.h@{logging\_test\_utilities.h}}
\doxysubsubsection{\texorpdfstring{DECLARE\_LOGF\_ALL\_LEVELS\_FUNCTION}{DECLARE\_LOGF\_ALL\_LEVELS\_FUNCTION}}
{\footnotesize\ttfamily \#define DECLARE\+\_\+\+LOGF\+\_\+\+ALL\+\_\+\+LEVELS\+\_\+\+FUNCTION(\begin{DoxyParamCaption}\item[{}]{fn\+\_\+name }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keyword}{static} \textcolor{keywordtype}{void} fn\_name(\textcolor{keyword}{enum} \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_a204470b509c45cf30e9a58fce82d41b5}{aws\_log\_level}} \mbox{\hyperlink{namespacecreate__project_aa6c0bcd2446fba642808820ebf43f4c3}{level}}) \{                                                                    \(\backslash\)}
\DoxyCodeLine{        (void)\mbox{\hyperlink{namespacecreate__project_aa6c0bcd2446fba642808820ebf43f4c3}{level}};                                                                                                   \(\backslash\)}
\DoxyCodeLine{        AWS\_LOGF\_FATAL(\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_abddc84adbc22027812f93bda0fa47c30a02f2579e284f86414cbbff31a74a8dd4}{AWS\_LS\_COMMON\_GENERAL}}, \textcolor{stringliteral}{"{}\%d"{}}, (\textcolor{keywordtype}{int})\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_a204470b509c45cf30e9a58fce82d41b5a4e1968e875da609bacafca2fadfd18ca}{AWS\_LL\_FATAL}});                                                \(\backslash\)}
\DoxyCodeLine{        AWS\_LOGF\_ERROR(\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_abddc84adbc22027812f93bda0fa47c30a02f2579e284f86414cbbff31a74a8dd4}{AWS\_LS\_COMMON\_GENERAL}}, \textcolor{stringliteral}{"{}\%d"{}}, (\textcolor{keywordtype}{int})\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_a204470b509c45cf30e9a58fce82d41b5abf692230c5411e2365dbcc1612ca8570}{AWS\_LL\_ERROR}});                                                \(\backslash\)}
\DoxyCodeLine{        AWS\_LOGF\_WARN(\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_abddc84adbc22027812f93bda0fa47c30a02f2579e284f86414cbbff31a74a8dd4}{AWS\_LS\_COMMON\_GENERAL}}, \textcolor{stringliteral}{"{}\%d"{}}, (\textcolor{keywordtype}{int})\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_a204470b509c45cf30e9a58fce82d41b5ab507bff3f7ee019a1e0077a3907d1d7c}{AWS\_LL\_WARN}});                                                  \(\backslash\)}
\DoxyCodeLine{        AWS\_LOGF\_INFO(\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_abddc84adbc22027812f93bda0fa47c30a02f2579e284f86414cbbff31a74a8dd4}{AWS\_LS\_COMMON\_GENERAL}}, \textcolor{stringliteral}{"{}\%d"{}}, (\textcolor{keywordtype}{int})\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_a204470b509c45cf30e9a58fce82d41b5ae919a955297861b6b8c4c484d36e2a57}{AWS\_LL\_INFO}});                                                  \(\backslash\)}
\DoxyCodeLine{        AWS\_LOGF\_DEBUG(\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_abddc84adbc22027812f93bda0fa47c30a02f2579e284f86414cbbff31a74a8dd4}{AWS\_LS\_COMMON\_GENERAL}}, \textcolor{stringliteral}{"{}\%d"{}}, (\textcolor{keywordtype}{int})\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_a204470b509c45cf30e9a58fce82d41b5a39d8eff4fe2102874e41956c1e371bdc}{AWS\_LL\_DEBUG}});                                                \(\backslash\)}
\DoxyCodeLine{        AWS\_LOGF\_TRACE(\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_abddc84adbc22027812f93bda0fa47c30a02f2579e284f86414cbbff31a74a8dd4}{AWS\_LS\_COMMON\_GENERAL}}, \textcolor{stringliteral}{"{}\%d"{}}, (\textcolor{keywordtype}{int})\mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_a204470b509c45cf30e9a58fce82d41b5a547326c130a4e2ad011a00aa49579356}{AWS\_LL\_TRACE}});                                                \(\backslash\)}
\DoxyCodeLine{    \}}

\end{DoxyCode}
A macro that defines a function that invokes all 6 LOGF\+\_\+$<$level$>$ variants

Needs to be a macro and not just a function because the compile-\/time filtering tests require a private implementation that is compiled with AWS\+\_\+\+STATIC\+\_\+\+LOG\+\_\+\+LEVEL at the level to be tested. There\textquotesingle{}s no way to shared a single definition that does so. \mbox{\Hypertarget{logging__test__utilities_8h_a3e85f1647074c331e1b13a07147397bd}\label{logging__test__utilities_8h_a3e85f1647074c331e1b13a07147397bd}} 
\index{logging\_test\_utilities.h@{logging\_test\_utilities.h}!TEST\_LEVEL\_FILTER@{TEST\_LEVEL\_FILTER}}
\index{TEST\_LEVEL\_FILTER@{TEST\_LEVEL\_FILTER}!logging\_test\_utilities.h@{logging\_test\_utilities.h}}
\doxysubsubsection{\texorpdfstring{TEST\_LEVEL\_FILTER}{TEST\_LEVEL\_FILTER}}
{\footnotesize\ttfamily \#define TEST\+\_\+\+LEVEL\+\_\+\+FILTER(\begin{DoxyParamCaption}\item[{}]{log\+\_\+level,  }\item[{}]{expected,  }\item[{}]{action\+\_\+fn }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{    \textcolor{keyword}{static} \textcolor{keywordtype}{int} s\_logging\_filter\_at\_\#\#log\_level\#\#\mbox{\hyperlink{preamble_8h_afbec6b3952fbf03b4a44a01f85c64a36}{\_}}\#\#action\_fn(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, \textcolor{keywordtype}{void} *\mbox{\hyperlink{channel__handler__test_8c_a1795d4ea01d211a7398ecd541c6f1302}{ctx}}) \{             \(\backslash\)}
\DoxyCodeLine{        (void)\mbox{\hyperlink{channel__handler__test_8c_a1795d4ea01d211a7398ecd541c6f1302}{ctx}};                                                                                                     \(\backslash\)}
\DoxyCodeLine{        return \mbox{\hyperlink{logging__test__utilities_8h_a938c40742545fc8ed570be05e9bacc50}{do\_log\_test}}(\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, log\_level, expected, action\_fn);                                                 \(\backslash\)}
\DoxyCodeLine{    \}                                                                                                                  \(\backslash\)}
\DoxyCodeLine{    AWS\_TEST\_CASE(test\_logging\_filter\_at\_\#\#log\_level\#\#\mbox{\hyperlink{preamble_8h_afbec6b3952fbf03b4a44a01f85c64a36}{\_}}\#\#action\_fn, s\_logging\_filter\_at\_\#\#log\_level\#\#\mbox{\hyperlink{preamble_8h_afbec6b3952fbf03b4a44a01f85c64a36}{\_}}\#\#action\_fn);}

\end{DoxyCode}
A macro capable of defining simple logging tests that follow the do\+\_\+log\+\_\+test function pattern 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{logging__test__utilities_8h_a151b857f48da6226d49f27e955a4f5fb}\label{logging__test__utilities_8h_a151b857f48da6226d49f27e955a4f5fb}} 
\index{logging\_test\_utilities.h@{logging\_test\_utilities.h}!aws\_string\_new\_log\_writer\_test\_filename@{aws\_string\_new\_log\_writer\_test\_filename}}
\index{aws\_string\_new\_log\_writer\_test\_filename@{aws\_string\_new\_log\_writer\_test\_filename}!logging\_test\_utilities.h@{logging\_test\_utilities.h}}
\doxysubsubsection{\texorpdfstring{aws\_string\_new\_log\_writer\_test\_filename()}{aws\_string\_new\_log\_writer\_test\_filename()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structaws__string}{aws\+\_\+string}}$\ast$ aws\+\_\+string\+\_\+new\+\_\+log\+\_\+writer\+\_\+test\+\_\+filename (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator }\end{DoxyParamCaption})}

Return new string with format \char`\"{}./aws\+\_\+log\+\_\+writer\+\_\+test\+\_\+\{\+UUID\}.\+log\char`\"{} This function cannot fail. \mbox{\Hypertarget{logging__test__utilities_8h_a938c40742545fc8ed570be05e9bacc50}\label{logging__test__utilities_8h_a938c40742545fc8ed570be05e9bacc50}} 
\index{logging\_test\_utilities.h@{logging\_test\_utilities.h}!do\_log\_test@{do\_log\_test}}
\index{do\_log\_test@{do\_log\_test}!logging\_test\_utilities.h@{logging\_test\_utilities.h}}
\doxysubsubsection{\texorpdfstring{do\_log\_test()}{do\_log\_test()}}
{\footnotesize\ttfamily int do\+\_\+log\+\_\+test (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{enum \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_a204470b509c45cf30e9a58fce82d41b5}{aws\+\_\+log\+\_\+level}}}]{level,  }\item[{const char $\ast$}]{expected\+\_\+result,  }\item[{void($\ast$)(enum \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2logging_8h_a204470b509c45cf30e9a58fce82d41b5}{aws\+\_\+log\+\_\+level}})}]{callback }\end{DoxyParamCaption})}

Copyright Amazon.\+com, Inc. or its affiliates. All Rights Reserved. SPDX-\/\+License-\/\+Identifier\+: Apache-\/2.\+0. A staging function for basic logging tests. It (1) Initializes and globally attaches a test logger (2) Invokes the supplied callback, which should perform the logging operations under test (3) Detaches and cleans up the test logger (4) Checks if what was recorded by the test logger matches what the test expected. 