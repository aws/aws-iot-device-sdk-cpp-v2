\hypertarget{_optional_8h_source}{}\doxysection{Optional.\+h}
\label{_optional_8h_source}\index{crt/aws-\/crt-\/cpp/include/aws/crt/Optional.h@{crt/aws-\/crt-\/cpp/include/aws/crt/Optional.h}}
\mbox{\hyperlink{_optional_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#if \_\_cplusplus >= 201703L}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#    include <optional>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#    include <cstdint>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#    include <type\_traits>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#    include <utility>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_aws}{Aws}}}
\DoxyCodeLine{15 \{}
\DoxyCodeLine{16     \textcolor{keyword}{namespace }Crt}
\DoxyCodeLine{17     \{}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#if \_\_cplusplus >= 201703L}}
\DoxyCodeLine{19         \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{using} Optional = std::optional<T>;}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{21         \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{class }\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional}{Optional}}}
\DoxyCodeLine{22         \{}
\DoxyCodeLine{23           \textcolor{keyword}{public}:}
\DoxyCodeLine{24             \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a2d231eff6f2057ef026194c361a217d0}{Optional}}() : m\_value(nullptr) \{\}}
\DoxyCodeLine{25             \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a0abaf361d1696cf727cccab1b07ae121}{Optional}}(\textcolor{keyword}{const} T \&\mbox{\hyperlink{connection__state__test_8c_ae763072d6c1a1d8daad8f1857de864b9}{val}})}
\DoxyCodeLine{26             \{}
\DoxyCodeLine{27                 \textcolor{keyword}{new} (\&m\_storage) T(\mbox{\hyperlink{connection__state__test_8c_ae763072d6c1a1d8daad8f1857de864b9}{val}});}
\DoxyCodeLine{28                 m\_value = \textcolor{keyword}{reinterpret\_cast<}T *\textcolor{keyword}{>}(\&m\_storage);}
\DoxyCodeLine{29             \}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31             \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a7e2b73a4f0a0619ea90ab233a77a0282}{Optional}}(T \&\&\mbox{\hyperlink{connection__state__test_8c_ae763072d6c1a1d8daad8f1857de864b9}{val}})}
\DoxyCodeLine{32             \{}
\DoxyCodeLine{33                 \textcolor{keyword}{new} (\&m\_storage) T(std::forward<T>(\mbox{\hyperlink{connection__state__test_8c_ae763072d6c1a1d8daad8f1857de864b9}{val}}));}
\DoxyCodeLine{34                 m\_value = \textcolor{keyword}{reinterpret\_cast<}T *\textcolor{keyword}{>}(\&m\_storage);}
\DoxyCodeLine{35             \}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37             \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_af354cd9f9c26684d2bf0c273695dae32}{\string~Optional}}()}
\DoxyCodeLine{38             \{}
\DoxyCodeLine{39                 \textcolor{keywordflow}{if} (m\_value)}
\DoxyCodeLine{40                 \{}
\DoxyCodeLine{41                     m\_value-\/>\string~T();}
\DoxyCodeLine{42                 \}}
\DoxyCodeLine{43             \}}
\DoxyCodeLine{44 }
\DoxyCodeLine{45             \textcolor{keyword}{template} <\textcolor{keyword}{typename} U = T> \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional}{Optional}} \&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a1c48df128a1bdabae868e70a4c79c2da}{operator=}}(U \&\&u)}
\DoxyCodeLine{46             \{}
\DoxyCodeLine{47                 \textcolor{keywordflow}{if} (m\_value)}
\DoxyCodeLine{48                 \{}
\DoxyCodeLine{49                     *m\_value = std::forward<U>(u);}
\DoxyCodeLine{50                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{51                 \}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53                 \textcolor{keyword}{new} (\&m\_storage) T(std::forward<U>(u));}
\DoxyCodeLine{54                 m\_value = \textcolor{keyword}{reinterpret\_cast<}T *\textcolor{keyword}{>}(\&m\_storage);}
\DoxyCodeLine{55 }
\DoxyCodeLine{56                 \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{57             \}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59             \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a5043bb5fb2165c6a882ca3bcabca96e4}{Optional}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional}{Optional<T>}} \&other)}
\DoxyCodeLine{60             \{}
\DoxyCodeLine{61                 \textcolor{keywordflow}{if} (other.m\_value)}
\DoxyCodeLine{62                 \{}
\DoxyCodeLine{63                     \textcolor{keyword}{new} (\&m\_storage) T(*other.m\_value);}
\DoxyCodeLine{64                     m\_value = \textcolor{keyword}{reinterpret\_cast<}T *\textcolor{keyword}{>}(\&m\_storage);}
\DoxyCodeLine{65                 \}}
\DoxyCodeLine{66                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{67                 \{}
\DoxyCodeLine{68                     m\_value = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{69                 \}}
\DoxyCodeLine{70             \}}
\DoxyCodeLine{71 }
\DoxyCodeLine{72             \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a6ab3e3d24753e6eb021af453b08ee4aa}{Optional}}(\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional}{Optional<T>}} \&\&other)}
\DoxyCodeLine{73             \{}
\DoxyCodeLine{74                 \textcolor{keywordflow}{if} (other.m\_value)}
\DoxyCodeLine{75                 \{}
\DoxyCodeLine{76                     \textcolor{keyword}{new} (\&m\_storage) T(std::forward<T>(*other.m\_value));}
\DoxyCodeLine{77                     m\_value = \textcolor{keyword}{reinterpret\_cast<}T *\textcolor{keyword}{>}(\&m\_storage);}
\DoxyCodeLine{78                 \}}
\DoxyCodeLine{79                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{80                 \{}
\DoxyCodeLine{81                     m\_value = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{82                 \}}
\DoxyCodeLine{83             \}}
\DoxyCodeLine{84 }
\DoxyCodeLine{85             \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional}{Optional}} \&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a42684d529ead41f08507b9c553cc19da}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional}{Optional}} \&other)}
\DoxyCodeLine{86             \{}
\DoxyCodeLine{87                 \textcolor{keywordflow}{if} (\textcolor{keyword}{this} == \&other)}
\DoxyCodeLine{88                 \{}
\DoxyCodeLine{89                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{90                 \}}
\DoxyCodeLine{91 }
\DoxyCodeLine{92                 \textcolor{keywordflow}{if} (m\_value)}
\DoxyCodeLine{93                 \{}
\DoxyCodeLine{94                     \textcolor{keywordflow}{if} (other.m\_value)}
\DoxyCodeLine{95                     \{}
\DoxyCodeLine{96                         *m\_value = *other.m\_value;}
\DoxyCodeLine{97                     \}}
\DoxyCodeLine{98                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{99                     \{}
\DoxyCodeLine{100                         m\_value-\/>\string~T();}
\DoxyCodeLine{101                         m\_value = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{102                     \}}
\DoxyCodeLine{103 }
\DoxyCodeLine{104                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{105                 \}}
\DoxyCodeLine{106 }
\DoxyCodeLine{107                 \textcolor{keywordflow}{if} (other.m\_value)}
\DoxyCodeLine{108                 \{}
\DoxyCodeLine{109                     \textcolor{keyword}{new} (\&m\_storage) T(*other.m\_value);}
\DoxyCodeLine{110                     m\_value = \textcolor{keyword}{reinterpret\_cast<}T *\textcolor{keyword}{>}(\&m\_storage);}
\DoxyCodeLine{111                 \}}
\DoxyCodeLine{112 }
\DoxyCodeLine{113                 \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{114             \}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116             \textcolor{keyword}{template} <\textcolor{keyword}{typename} U = T> \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional}{Optional<T>}} \&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a5c535dc3e63281bda3587ccb7e71daef}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional}{Optional<U>}} \&other)}
\DoxyCodeLine{117             \{}
\DoxyCodeLine{118                 \textcolor{keywordflow}{if} (\textcolor{keyword}{this} == \&other)}
\DoxyCodeLine{119                 \{}
\DoxyCodeLine{120                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{121                 \}}
\DoxyCodeLine{122 }
\DoxyCodeLine{123                 \textcolor{keywordflow}{if} (m\_value)}
\DoxyCodeLine{124                 \{}
\DoxyCodeLine{125                     \textcolor{keywordflow}{if} (other.m\_value)}
\DoxyCodeLine{126                     \{}
\DoxyCodeLine{127                         *m\_value = *other.m\_value;}
\DoxyCodeLine{128                     \}}
\DoxyCodeLine{129                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{130                     \{}
\DoxyCodeLine{131                         m\_value-\/>\string~T();}
\DoxyCodeLine{132                         m\_value = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{133                     \}}
\DoxyCodeLine{134 }
\DoxyCodeLine{135                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{136                 \}}
\DoxyCodeLine{137 }
\DoxyCodeLine{138                 \textcolor{keywordflow}{if} (other.m\_value)}
\DoxyCodeLine{139                 \{}
\DoxyCodeLine{140                     \textcolor{keyword}{new} (\&m\_storage) T(*other.m\_value);}
\DoxyCodeLine{141                     m\_value = \textcolor{keyword}{reinterpret\_cast<}T *\textcolor{keyword}{>}(\&m\_storage);}
\DoxyCodeLine{142                 \}}
\DoxyCodeLine{143 }
\DoxyCodeLine{144                 \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{145             \}}
\DoxyCodeLine{146 }
\DoxyCodeLine{147             \textcolor{keyword}{template} <\textcolor{keyword}{typename} U = T> \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional}{Optional<T>}} \&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a16c1591bb97ebdb0972e49bec5dce6c3}{operator=}}(\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional}{Optional<U>}} \&\&other)}
\DoxyCodeLine{148             \{}
\DoxyCodeLine{149                 \textcolor{keywordflow}{if} (\textcolor{keyword}{this} == \&other)}
\DoxyCodeLine{150                 \{}
\DoxyCodeLine{151                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{152                 \}}
\DoxyCodeLine{153 }
\DoxyCodeLine{154                 \textcolor{keywordflow}{if} (m\_value)}
\DoxyCodeLine{155                 \{}
\DoxyCodeLine{156                     \textcolor{keywordflow}{if} (other.m\_value)}
\DoxyCodeLine{157                     \{}
\DoxyCodeLine{158                         *m\_value = std::forward<U>(*other.m\_value);}
\DoxyCodeLine{159                     \}}
\DoxyCodeLine{160                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{161                     \{}
\DoxyCodeLine{162                         m\_value-\/>\string~T();}
\DoxyCodeLine{163                         m\_value = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{164                     \}}
\DoxyCodeLine{165 }
\DoxyCodeLine{166                     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{167                 \}}
\DoxyCodeLine{168 }
\DoxyCodeLine{169                 \textcolor{keywordflow}{if} (other.m\_value)}
\DoxyCodeLine{170                 \{}
\DoxyCodeLine{171                     \textcolor{keyword}{new} (\&m\_storage) T(std::forward<U>(*other.m\_value));}
\DoxyCodeLine{172                     m\_value = \textcolor{keyword}{reinterpret\_cast<}T *\textcolor{keyword}{>}(\&m\_storage);}
\DoxyCodeLine{173                 \}}
\DoxyCodeLine{174 }
\DoxyCodeLine{175                 \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{176             \}}
\DoxyCodeLine{177 }
\DoxyCodeLine{178             \textcolor{keyword}{const} T *\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_ae7151cbbc2225e50191ad65317e861e6}{operator-\/>}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_value; \}}
\DoxyCodeLine{179             T *\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a79c196520fb7c2cb61c4ce6b67528d14}{operator-\/>}}() \{ \textcolor{keywordflow}{return} m\_value; \}}
\DoxyCodeLine{180             \textcolor{keyword}{const} T \&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a1a98d796aad2b08a76420d513cfeeb5f}{operator*}}() const \& \{ \textcolor{keywordflow}{return} *m\_value; \}}
\DoxyCodeLine{181             T \&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_ae66b3c3e6c048aee44c6b867ac9d36b4}{operator*}}() \& \{ \textcolor{keywordflow}{return} *m\_value; \}}
\DoxyCodeLine{182             \textcolor{keyword}{const} T \&\&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a8c6200da7a73403379591dd5dc42b6e7}{operator*}}() const \&\& \{ \textcolor{keywordflow}{return} std::move(*m\_value); \}}
\DoxyCodeLine{183             T \&\&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_ac1afd6239f14821322f671e7b3ec57b6}{operator*}}() \&\& \{ \textcolor{keywordflow}{return} std::move(*m\_value); \}}
\DoxyCodeLine{184 }
\DoxyCodeLine{185             \textcolor{keyword}{explicit} \textcolor{keyword}{operator} \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}}() const noexcept \{ \textcolor{keywordflow}{return} m\_value != \textcolor{keyword}{nullptr}; \}}
\DoxyCodeLine{186             \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a4356231bdd8a67fd565f8a8211a2e770}{has\_value}}() const noexcept \{ \textcolor{keywordflow}{return} m\_value != \textcolor{keyword}{nullptr}; \}}
\DoxyCodeLine{187 }
\DoxyCodeLine{188             T \&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_acac8a48c762fc374da936b3ef88d4de8}{value}}() \& \{ \textcolor{keywordflow}{return} *m\_value; \}}
\DoxyCodeLine{189             \textcolor{keyword}{const} T \&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_a7840d9dc0552fb2cc9c0b50fccd9e22c}{value}}() const \& \{ \textcolor{keywordflow}{return} *m\_value; \}}
\DoxyCodeLine{190 }
\DoxyCodeLine{191             T \&\&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_af0e1575063b6c0b81c92fc7bd2fe7c7d}{value}}() \&\& \{ \textcolor{keywordflow}{return} std::move(*m\_value); \}}
\DoxyCodeLine{192             \textcolor{keyword}{const} T \&\&\mbox{\hyperlink{class_aws_1_1_crt_1_1_optional_acc2f21869b2289e9c55153ac60ebd91e}{value}}() const \&\& \{ \textcolor{keywordflow}{return} std::move(*m\_value); \}}
\DoxyCodeLine{193 }
\DoxyCodeLine{194           \textcolor{keyword}{private}:}
\DoxyCodeLine{195             \textcolor{keyword}{typename} std::aligned\_storage<\textcolor{keyword}{sizeof}(T)>::\mbox{\hyperlink{namespace_aws_a5256b1ff01fae77769fee34ff8ef45a7}{type}} m\_storage;}
\DoxyCodeLine{196             T *m\_value;}
\DoxyCodeLine{197         \};}
\DoxyCodeLine{198 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{199     \} \textcolor{comment}{// namespace Crt}}
\DoxyCodeLine{200 \} \textcolor{comment}{// namespace Aws}}

\end{DoxyCode}
