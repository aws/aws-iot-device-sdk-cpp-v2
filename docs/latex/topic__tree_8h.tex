\hypertarget{topic__tree_8h}{}\doxysection{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/mqtt/include/aws/mqtt/private/topic\+\_\+tree.h File Reference}
\label{topic__tree_8h}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/mqtt/include/aws/mqtt/private/topic\_tree.h@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/mqtt/include/aws/mqtt/private/topic\_tree.h}}
{\ttfamily \#include $<$aws/common/hash\+\_\+table.\+h$>$}\newline
{\ttfamily \#include $<$aws/mqtt/private/packets.\+h$>$}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structaws__mqtt__topic__node}{aws\+\_\+mqtt\+\_\+topic\+\_\+node}}
\item 
struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void() \mbox{\hyperlink{topic__tree_8h_ab08dea97759174f17239ffe3c69c1635}{aws\+\_\+mqtt\+\_\+publish\+\_\+received\+\_\+fn}}(const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$\mbox{\hyperlink{connection__state__test_8c_ad99baabff61442b2d602f6dd84310f89}{topic}}, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$\mbox{\hyperlink{connection__state__test_8c_ad1560a388c937f36f038c683175d82bf}{payload}}, \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}} \mbox{\hyperlink{s2n_2pq-crypto_2bike__r2_2decode_8c_aa36ac9b28eef6905672b29e8e398053a}{dup}}, enum \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\+\_\+mqtt\+\_\+qos}} \mbox{\hyperlink{connection__state__test_8c_a65ee2b4b16f25052c441ff9959dcc7e7}{qos}}, \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}} retain, void $\ast$\mbox{\hyperlink{event__stream__rpc__server__connection__test_8c_af1abaca9a982b3cdb0b118914416c39b}{user\+\_\+data}})
\item 
typedef \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}}() \mbox{\hyperlink{topic__tree_8h_a69b6d023806e7595613edcd9648a1c0b}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+iterator\+\_\+fn}}(const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$\mbox{\hyperlink{connection__state__test_8c_ad99baabff61442b2d602f6dd84310f89}{topic}}, enum \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\+\_\+mqtt\+\_\+qos}} \mbox{\hyperlink{connection__state__test_8c_a65ee2b4b16f25052c441ff9959dcc7e7}{qos}}, void $\ast$\mbox{\hyperlink{event__stream__rpc__server__connection__test_8c_af1abaca9a982b3cdb0b118914416c39b}{user\+\_\+data}})
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} int \mbox{\hyperlink{topic__tree_8h_a2158a6999d9d75b64221fb6bcfe1c7be}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+init}} (struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$tree, struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}})
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} void \mbox{\hyperlink{topic__tree_8h_a64f4345a454f575e0a9bfad12783106b}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+clean\+\_\+up}} (struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$tree)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} void \mbox{\hyperlink{topic__tree_8h_ab248e18c67071b57c33ff9cee1fe6109}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+iterate}} (const struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$tree, \mbox{\hyperlink{topic__tree_8h_a69b6d023806e7595613edcd9648a1c0b}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+iterator\+\_\+fn}} $\ast$iterator, void $\ast$\mbox{\hyperlink{event__stream__rpc__server__connection__test_8c_af1abaca9a982b3cdb0b118914416c39b}{user\+\_\+data}})
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} size\+\_\+t \mbox{\hyperlink{topic__tree_8h_a2ded1326aa81aa17d0aad5a8e08f7179}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+get\+\_\+sub\+\_\+count}} (const struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$tree)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} int \mbox{\hyperlink{topic__tree_8h_a448caadd1076f1bfd5a685668c6a6228}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+transaction\+\_\+insert}} (struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$tree, struct \mbox{\hyperlink{structaws__array__list}{aws\+\_\+array\+\_\+list}} $\ast$transaction, const struct \mbox{\hyperlink{structaws__string}{aws\+\_\+string}} $\ast$topic\+\_\+filter, enum \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\+\_\+mqtt\+\_\+qos}} \mbox{\hyperlink{connection__state__test_8c_a65ee2b4b16f25052c441ff9959dcc7e7}{qos}}, \mbox{\hyperlink{topic__tree_8h_ab08dea97759174f17239ffe3c69c1635}{aws\+\_\+mqtt\+\_\+publish\+\_\+received\+\_\+fn}} $\ast$callback, \mbox{\hyperlink{mqtt_8h_a4c072048c5bd312923466806b23cea73}{aws\+\_\+mqtt\+\_\+userdata\+\_\+cleanup\+\_\+fn}} $\ast$cleanup, void $\ast$userdata)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} int \mbox{\hyperlink{topic__tree_8h_a02be0eccdfbfb6a85d35f790edeca24f}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+transaction\+\_\+remove}} (struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$tree, struct \mbox{\hyperlink{structaws__array__list}{aws\+\_\+array\+\_\+list}} $\ast$transaction, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$topic\+\_\+filter, void $\ast$$\ast$old\+\_\+userdata)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} void \mbox{\hyperlink{topic__tree_8h_a08c5a0e56e9216af6cb6a22a9858bdfb}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+transaction\+\_\+commit}} (struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$tree, struct \mbox{\hyperlink{structaws__array__list}{aws\+\_\+array\+\_\+list}} $\ast$transaction)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} void \mbox{\hyperlink{topic__tree_8h_a0751863f4dc1f326e60e3e7fe7fc7176}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+transaction\+\_\+roll\+\_\+back}} (struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$tree, struct \mbox{\hyperlink{structaws__array__list}{aws\+\_\+array\+\_\+list}} $\ast$transaction)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} int \mbox{\hyperlink{topic__tree_8h_a19f74a324a5ed0838555e5b58079e7fd}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+insert}} (struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$tree, const struct \mbox{\hyperlink{structaws__string}{aws\+\_\+string}} $\ast$topic\+\_\+filter, enum \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\+\_\+mqtt\+\_\+qos}} \mbox{\hyperlink{connection__state__test_8c_a65ee2b4b16f25052c441ff9959dcc7e7}{qos}}, \mbox{\hyperlink{topic__tree_8h_ab08dea97759174f17239ffe3c69c1635}{aws\+\_\+mqtt\+\_\+publish\+\_\+received\+\_\+fn}} $\ast$callback, \mbox{\hyperlink{mqtt_8h_a4c072048c5bd312923466806b23cea73}{aws\+\_\+mqtt\+\_\+userdata\+\_\+cleanup\+\_\+fn}} $\ast$cleanup, void $\ast$userdata)
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} int \mbox{\hyperlink{topic__tree_8h_aa63a49d56ff222d1401f85a8f2df5087}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+remove}} (struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$tree, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$topic\+\_\+filter)
\item 
void \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} \mbox{\hyperlink{topic__tree_8h_a1c91ce2237989a0b4f4d1e187c5efbe9}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+publish}} (const struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$tree, struct \mbox{\hyperlink{structaws__mqtt__packet__publish}{aws\+\_\+mqtt\+\_\+packet\+\_\+publish}} $\ast$pub)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} size\+\_\+t \mbox{\hyperlink{topic__tree_8h_a9a315906d1d5a2c32c5c9e6669dc20ac}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+action\+\_\+size}}
\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{topic__tree_8h_ab08dea97759174f17239ffe3c69c1635}\label{topic__tree_8h_ab08dea97759174f17239ffe3c69c1635}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_publish\_received\_fn@{aws\_mqtt\_publish\_received\_fn}}
\index{aws\_mqtt\_publish\_received\_fn@{aws\_mqtt\_publish\_received\_fn}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_publish\_received\_fn}{aws\_mqtt\_publish\_received\_fn}}
{\footnotesize\ttfamily typedef void() aws\+\_\+mqtt\+\_\+publish\+\_\+received\+\_\+fn(const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$\mbox{\hyperlink{connection__state__test_8c_ad99baabff61442b2d602f6dd84310f89}{topic}}, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$\mbox{\hyperlink{connection__state__test_8c_ad1560a388c937f36f038c683175d82bf}{payload}}, \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}} \mbox{\hyperlink{s2n_2pq-crypto_2bike__r2_2decode_8c_aa36ac9b28eef6905672b29e8e398053a}{dup}}, enum \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\+\_\+mqtt\+\_\+qos}} \mbox{\hyperlink{connection__state__test_8c_a65ee2b4b16f25052c441ff9959dcc7e7}{qos}}, \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}} retain, void $\ast$\mbox{\hyperlink{event__stream__rpc__server__connection__test_8c_af1abaca9a982b3cdb0b118914416c39b}{user\+\_\+data}})}

Copyright Amazon.\+com, Inc. or its affiliates. All Rights Reserved. SPDX-\/\+License-\/\+Identifier\+: Apache-\/2.\+0. Type of function called when a publish received matches a subscription \mbox{\Hypertarget{topic__tree_8h_a69b6d023806e7595613edcd9648a1c0b}\label{topic__tree_8h_a69b6d023806e7595613edcd9648a1c0b}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_iterator\_fn@{aws\_mqtt\_topic\_tree\_iterator\_fn}}
\index{aws\_mqtt\_topic\_tree\_iterator\_fn@{aws\_mqtt\_topic\_tree\_iterator\_fn}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_iterator\_fn}{aws\_mqtt\_topic\_tree\_iterator\_fn}}
{\footnotesize\ttfamily typedef \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}}() aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+iterator\+\_\+fn(const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$\mbox{\hyperlink{connection__state__test_8c_ad99baabff61442b2d602f6dd84310f89}{topic}}, enum \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\+\_\+mqtt\+\_\+qos}} \mbox{\hyperlink{connection__state__test_8c_a65ee2b4b16f25052c441ff9959dcc7e7}{qos}}, void $\ast$\mbox{\hyperlink{event__stream__rpc__server__connection__test_8c_af1abaca9a982b3cdb0b118914416c39b}{user\+\_\+data}})}

Function called per subscription when iterating through subscriptions. Return true to continue iteration, or false to stop. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{topic__tree_8h_a64f4345a454f575e0a9bfad12783106b}\label{topic__tree_8h_a64f4345a454f575e0a9bfad12783106b}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_clean\_up@{aws\_mqtt\_topic\_tree\_clean\_up}}
\index{aws\_mqtt\_topic\_tree\_clean\_up@{aws\_mqtt\_topic\_tree\_clean\_up}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_clean\_up()}{aws\_mqtt\_topic\_tree\_clean\_up()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} void aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+clean\+\_\+up (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$}]{tree }\end{DoxyParamCaption})}

Cleanup and deallocate an entire topic tree. \mbox{\Hypertarget{topic__tree_8h_a2ded1326aa81aa17d0aad5a8e08f7179}\label{topic__tree_8h_a2ded1326aa81aa17d0aad5a8e08f7179}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_get\_sub\_count@{aws\_mqtt\_topic\_tree\_get\_sub\_count}}
\index{aws\_mqtt\_topic\_tree\_get\_sub\_count@{aws\_mqtt\_topic\_tree\_get\_sub\_count}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_get\_sub\_count()}{aws\_mqtt\_topic\_tree\_get\_sub\_count()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} size\+\_\+t aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+get\+\_\+sub\+\_\+count (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$}]{tree }\end{DoxyParamCaption})}

Gets the total number of subscriptions in the tree. \mbox{\Hypertarget{topic__tree_8h_a2158a6999d9d75b64221fb6bcfe1c7be}\label{topic__tree_8h_a2158a6999d9d75b64221fb6bcfe1c7be}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_init@{aws\_mqtt\_topic\_tree\_init}}
\index{aws\_mqtt\_topic\_tree\_init@{aws\_mqtt\_topic\_tree\_init}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_init()}{aws\_mqtt\_topic\_tree\_init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} int aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+init (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$}]{tree,  }\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator }\end{DoxyParamCaption})}

Initialize a topic tree with an allocator to later use. Note that calling init allocates root. \mbox{\Hypertarget{topic__tree_8h_a19f74a324a5ed0838555e5b58079e7fd}\label{topic__tree_8h_a19f74a324a5ed0838555e5b58079e7fd}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_insert@{aws\_mqtt\_topic\_tree\_insert}}
\index{aws\_mqtt\_topic\_tree\_insert@{aws\_mqtt\_topic\_tree\_insert}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_insert()}{aws\_mqtt\_topic\_tree\_insert()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} int aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+insert (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$}]{tree,  }\item[{const struct \mbox{\hyperlink{structaws__string}{aws\+\_\+string}} $\ast$}]{topic\+\_\+filter,  }\item[{enum \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\+\_\+mqtt\+\_\+qos}}}]{qos,  }\item[{\mbox{\hyperlink{topic__tree_8h_ab08dea97759174f17239ffe3c69c1635}{aws\+\_\+mqtt\+\_\+publish\+\_\+received\+\_\+fn}} $\ast$}]{callback,  }\item[{\mbox{\hyperlink{mqtt_8h_a4c072048c5bd312923466806b23cea73}{aws\+\_\+mqtt\+\_\+userdata\+\_\+cleanup\+\_\+fn}} $\ast$}]{cleanup,  }\item[{void $\ast$}]{userdata }\end{DoxyParamCaption})}

Insert a new topic filter into the subscription tree (subscribe).


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em tree} & The tree to insert into. \\
\hline
\mbox{\texttt{ in}}  & {\em topic\+\_\+filter} & The topic filter to subscribe on. May contain wildcards. \\
\hline
\mbox{\texttt{ in}}  & {\em callback} & The callback to call on a publish with a matching topic. \\
\hline
\mbox{\texttt{ in}}  & {\em connection} & The connection object to pass to the callback. This is a void$\ast$ to support client and server connections in the future. \\
\hline
\mbox{\texttt{ in}}  & {\em userdata} & The userdata to pass to callback.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
AWS\+\_\+\+OP\+\_\+\+SUCCESS on successful insertion, AWS\+\_\+\+OP\+\_\+\+ERR with \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2error_8h_a1322935281a00b323a6307e42738781e}{aws\+\_\+last\+\_\+error()}} populated on failure. 
\end{DoxyReturn}
\mbox{\Hypertarget{topic__tree_8h_ab248e18c67071b57c33ff9cee1fe6109}\label{topic__tree_8h_ab248e18c67071b57c33ff9cee1fe6109}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_iterate@{aws\_mqtt\_topic\_tree\_iterate}}
\index{aws\_mqtt\_topic\_tree\_iterate@{aws\_mqtt\_topic\_tree\_iterate}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_iterate()}{aws\_mqtt\_topic\_tree\_iterate()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} void aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+iterate (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$}]{tree,  }\item[{\mbox{\hyperlink{topic__tree_8h_a69b6d023806e7595613edcd9648a1c0b}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+iterator\+\_\+fn}} $\ast$}]{iterator,  }\item[{void $\ast$}]{user\+\_\+data }\end{DoxyParamCaption})}

Iterates through all registered subscriptions, and calls iterator.

Iterator may return false to stop iterating, or true to continue. \mbox{\Hypertarget{topic__tree_8h_a1c91ce2237989a0b4f4d1e187c5efbe9}\label{topic__tree_8h_a1c91ce2237989a0b4f4d1e187c5efbe9}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_publish@{aws\_mqtt\_topic\_tree\_publish}}
\index{aws\_mqtt\_topic\_tree\_publish@{aws\_mqtt\_topic\_tree\_publish}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_publish()}{aws\_mqtt\_topic\_tree\_publish()}}
{\footnotesize\ttfamily void \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+publish (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$}]{tree,  }\item[{struct \mbox{\hyperlink{structaws__mqtt__packet__publish}{aws\+\_\+mqtt\+\_\+packet\+\_\+publish}} $\ast$}]{pub }\end{DoxyParamCaption})}

Dispatches a publish packet to all subscriptions matching the publish topic.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em tree} & The tree to publish on. \\
\hline
\mbox{\texttt{ in}}  & {\em pub} & The publish packet to dispatch. The topic MUST NOT contain wildcards. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{topic__tree_8h_aa63a49d56ff222d1401f85a8f2df5087}\label{topic__tree_8h_aa63a49d56ff222d1401f85a8f2df5087}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_remove@{aws\_mqtt\_topic\_tree\_remove}}
\index{aws\_mqtt\_topic\_tree\_remove@{aws\_mqtt\_topic\_tree\_remove}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_remove()}{aws\_mqtt\_topic\_tree\_remove()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} int aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+remove (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$}]{tree,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{topic\+\_\+filter }\end{DoxyParamCaption})}

\mbox{\Hypertarget{topic__tree_8h_a08c5a0e56e9216af6cb6a22a9858bdfb}\label{topic__tree_8h_a08c5a0e56e9216af6cb6a22a9858bdfb}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_transaction\_commit@{aws\_mqtt\_topic\_tree\_transaction\_commit}}
\index{aws\_mqtt\_topic\_tree\_transaction\_commit@{aws\_mqtt\_topic\_tree\_transaction\_commit}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_transaction\_commit()}{aws\_mqtt\_topic\_tree\_transaction\_commit()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} void aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+transaction\+\_\+commit (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$}]{tree,  }\item[{struct \mbox{\hyperlink{structaws__array__list}{aws\+\_\+array\+\_\+list}} $\ast$}]{transaction }\end{DoxyParamCaption})}

\mbox{\Hypertarget{topic__tree_8h_a448caadd1076f1bfd5a685668c6a6228}\label{topic__tree_8h_a448caadd1076f1bfd5a685668c6a6228}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_transaction\_insert@{aws\_mqtt\_topic\_tree\_transaction\_insert}}
\index{aws\_mqtt\_topic\_tree\_transaction\_insert@{aws\_mqtt\_topic\_tree\_transaction\_insert}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_transaction\_insert()}{aws\_mqtt\_topic\_tree\_transaction\_insert()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} int aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+transaction\+\_\+insert (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$}]{tree,  }\item[{struct \mbox{\hyperlink{structaws__array__list}{aws\+\_\+array\+\_\+list}} $\ast$}]{transaction,  }\item[{const struct \mbox{\hyperlink{structaws__string}{aws\+\_\+string}} $\ast$}]{topic\+\_\+filter,  }\item[{enum \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\+\_\+mqtt\+\_\+qos}}}]{qos,  }\item[{\mbox{\hyperlink{topic__tree_8h_ab08dea97759174f17239ffe3c69c1635}{aws\+\_\+mqtt\+\_\+publish\+\_\+received\+\_\+fn}} $\ast$}]{callback,  }\item[{\mbox{\hyperlink{mqtt_8h_a4c072048c5bd312923466806b23cea73}{aws\+\_\+mqtt\+\_\+userdata\+\_\+cleanup\+\_\+fn}} $\ast$}]{cleanup,  }\item[{void $\ast$}]{userdata }\end{DoxyParamCaption})}

Insert a new topic filter into the subscription tree (subscribe).


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em tree} & The tree to insert into. \\
\hline
\mbox{\texttt{ in}}  & {\em transaction} & The transaction to add the insert action to. Must be initialized with aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+action\+\_\+size as item size. \\
\hline
\mbox{\texttt{ in}}  & {\em topic\+\_\+filter} & The topic filter to subscribe on. May contain wildcards. \\
\hline
\mbox{\texttt{ in}}  & {\em callback} & The callback to call on a publish with a matching topic. \\
\hline
\mbox{\texttt{ in}}  & {\em connection} & The connection object to pass to the callback. This is a void$\ast$ to support client and server connections in the future. \\
\hline
\mbox{\texttt{ in}}  & {\em userdata} & The userdata to pass to callback.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
AWS\+\_\+\+OP\+\_\+\+SUCCESS on successful insertion, AWS\+\_\+\+OP\+\_\+\+ERR with \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2error_8h_a1322935281a00b323a6307e42738781e}{aws\+\_\+last\+\_\+error()}} populated on failure. If AWS\+\_\+\+OP\+\_\+\+ERR is returned, aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+transaction\+\_\+rollback should be called to prevent leaks. 
\end{DoxyReturn}
\mbox{\Hypertarget{topic__tree_8h_a02be0eccdfbfb6a85d35f790edeca24f}\label{topic__tree_8h_a02be0eccdfbfb6a85d35f790edeca24f}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_transaction\_remove@{aws\_mqtt\_topic\_tree\_transaction\_remove}}
\index{aws\_mqtt\_topic\_tree\_transaction\_remove@{aws\_mqtt\_topic\_tree\_transaction\_remove}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_transaction\_remove()}{aws\_mqtt\_topic\_tree\_transaction\_remove()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} int aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+transaction\+\_\+remove (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$}]{tree,  }\item[{struct \mbox{\hyperlink{structaws__array__list}{aws\+\_\+array\+\_\+list}} $\ast$}]{transaction,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{topic\+\_\+filter,  }\item[{void $\ast$$\ast$}]{old\+\_\+userdata }\end{DoxyParamCaption})}

Remove a topic filter from the subscription tree (unsubscribe).


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em tree} & The tree to remove from. \\
\hline
\mbox{\texttt{ in}}  & {\em transaction} & The transaction to add the insert action to. Must be initialized with aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+action\+\_\+size as item size. \\
\hline
\mbox{\texttt{ in}}  & {\em topic\+\_\+filter} & The filter to remove (must be exactly the same as the topic\+\_\+filter passed to insert). \\
\hline
\mbox{\texttt{ out}}  & {\em old\+\_\+userdata} & The userdata assigned to this subscription will be assigned if not NULL. \textbackslash{}\+NOTE once the transaction is committed, old\+\_\+userdata may be destroyed, if a cleanup callback was set on insert.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
AWS\+\_\+\+OP\+\_\+\+SUCCESS on successful removal, AWS\+\_\+\+OP\+\_\+\+ERR with \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2error_8h_a1322935281a00b323a6307e42738781e}{aws\+\_\+last\+\_\+error()}} populated on failure. If AWS\+\_\+\+OP\+\_\+\+ERR is returned, aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+transaction\+\_\+rollback should be called to prevent leaks. 
\end{DoxyReturn}
\mbox{\Hypertarget{topic__tree_8h_a0751863f4dc1f326e60e3e7fe7fc7176}\label{topic__tree_8h_a0751863f4dc1f326e60e3e7fe7fc7176}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_transaction\_roll\_back@{aws\_mqtt\_topic\_tree\_transaction\_roll\_back}}
\index{aws\_mqtt\_topic\_tree\_transaction\_roll\_back@{aws\_mqtt\_topic\_tree\_transaction\_roll\_back}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_transaction\_roll\_back()}{aws\_mqtt\_topic\_tree\_transaction\_roll\_back()}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} void aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+transaction\+\_\+roll\+\_\+back (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__mqtt__topic__tree}{aws\+\_\+mqtt\+\_\+topic\+\_\+tree}} $\ast$}]{tree,  }\item[{struct \mbox{\hyperlink{structaws__array__list}{aws\+\_\+array\+\_\+list}} $\ast$}]{transaction }\end{DoxyParamCaption})}



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{topic__tree_8h_a9a315906d1d5a2c32c5c9e6669dc20ac}\label{topic__tree_8h_a9a315906d1d5a2c32c5c9e6669dc20ac}} 
\index{topic\_tree.h@{topic\_tree.h}!aws\_mqtt\_topic\_tree\_action\_size@{aws\_mqtt\_topic\_tree\_action\_size}}
\index{aws\_mqtt\_topic\_tree\_action\_size@{aws\_mqtt\_topic\_tree\_action\_size}!topic\_tree.h@{topic\_tree.h}}
\doxysubsubsection{\texorpdfstring{aws\_mqtt\_topic\_tree\_action\_size}{aws\_mqtt\_topic\_tree\_action\_size}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-mqtt_2include_2aws_2mqtt_2_exports_8h_a9f8288d6c805910baca30043ee3068bf}{AWS\+\_\+\+MQTT\+\_\+\+API}} size\+\_\+t aws\+\_\+mqtt\+\_\+topic\+\_\+tree\+\_\+action\+\_\+size\hspace{0.3cm}{\ttfamily [extern]}}

The size of transaction instances. When you initialize an \mbox{\hyperlink{structaws__array__list}{aws\+\_\+array\+\_\+list}} for use as a transaction, pass this as the item size. 