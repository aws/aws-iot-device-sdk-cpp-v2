\hypertarget{aws__signing_8h_source}{}\doxysection{aws\+\_\+signing.\+h}
\label{aws__signing_8h_source}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/auth/include/aws/auth/private/aws\_signing.h@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/auth/include/aws/auth/private/aws\_signing.h}}
\mbox{\hyperlink{aws__signing_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef AWS\_AUTH\_SIGNING\_SIGV4\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define AWS\_AUTH\_SIGNING\_SIGV4\_H}}
\DoxyCodeLine{3 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{auth_8h}{aws/auth/auth.h}}>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{crt_2aws-c-auth_2include_2aws_2auth_2_signing_8h}{aws/auth/signing.h}}>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{signing__result_8h}{aws/auth/signing\_result.h}}>}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{byte__buf_8h}{aws/common/byte\_buf.h}}>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{hash__table_8h}{aws/common/hash\_table.h}}>}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__signable}{aws\_signable}};}
\DoxyCodeLine{17 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__signing__config__aws}{aws\_signing\_config\_aws}};}
\DoxyCodeLine{18 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__signing__result}{aws\_signing\_result}};}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{comment}{/*}}
\DoxyCodeLine{21 \textcolor{comment}{ * Private signing API}}
\DoxyCodeLine{22 \textcolor{comment}{ *}}
\DoxyCodeLine{23 \textcolor{comment}{ * Technically this could be folded directly into signing.c but it's useful to be able}}
\DoxyCodeLine{24 \textcolor{comment}{ * to call the individual stages of the signing process for testing.}}
\DoxyCodeLine{25 \textcolor{comment}{ */}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{comment}{/*}}
\DoxyCodeLine{28 \textcolor{comment}{ * A structure that contains all the state related to signing a request for AWS.  We pass}}
\DoxyCodeLine{29 \textcolor{comment}{ * this around rather than a million parameters.}}
\DoxyCodeLine{30 \textcolor{comment}{ */}}
\DoxyCodeLine{31 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__signing__state__aws}{aws\_signing\_state\_aws}} \{}
\DoxyCodeLine{32     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{structaws__signing__state__aws_abaa0c11d4a503cdcee510a3de5522783}{allocator}};}
\DoxyCodeLine{33 }
\DoxyCodeLine{34     \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__signable}{aws\_signable}} *\mbox{\hyperlink{structaws__signing__state__aws_a55a256e108b463ad823e4473d22f0e17}{signable}};}
\DoxyCodeLine{35     \mbox{\hyperlink{crt_2aws-c-auth_2include_2aws_2auth_2_signing_8h_ac35de70031cf940e13c7862208b1defd}{aws\_signing\_complete\_fn}} *\mbox{\hyperlink{structaws__signing__state__aws_a90fe0c13c17ab57db8822988300e357d}{on\_complete}};}
\DoxyCodeLine{36     \textcolor{keywordtype}{void} *\mbox{\hyperlink{structaws__signing__state__aws_adb7906a8b4483c47ef8e7eb4836fd3d9}{userdata}};}
\DoxyCodeLine{37 }
\DoxyCodeLine{38     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__signing__config__aws}{aws\_signing\_config\_aws}} \mbox{\hyperlink{structaws__signing__state__aws_aa32efc79e2821ee5de544ff4d03a0b55}{config}};}
\DoxyCodeLine{39     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_a98bbc694e6ab83dac7b41f32bddf03b1}{config\_string\_buffer}};}
\DoxyCodeLine{40 }
\DoxyCodeLine{41     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__signing__result}{aws\_signing\_result}} \mbox{\hyperlink{structaws__signing__state__aws_a65090ae9122b231f13bd6beb00aa37de}{result}};}
\DoxyCodeLine{42     \textcolor{keywordtype}{int} \mbox{\hyperlink{structaws__signing__state__aws_a40c9fb67899fe6c7166bec289b8c68a3}{error\_code}};}
\DoxyCodeLine{43 }
\DoxyCodeLine{44     \textcolor{comment}{/* persistent, constructed values that are either/or}}
\DoxyCodeLine{45 \textcolor{comment}{     *  (1) consumed by later stages of the signing process,}}
\DoxyCodeLine{46 \textcolor{comment}{     *  (2) used in multiple places}}
\DoxyCodeLine{47 \textcolor{comment}{     */}}
\DoxyCodeLine{48     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_a2c75edb150b9a4bca5fedd55ca279ba8}{canonical\_request}};}
\DoxyCodeLine{49     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_af6144a18f94c63ff1b6e40060aa7c912}{string\_to\_sign}};}
\DoxyCodeLine{50     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_a48d48b1a82a742a24dff39db4441bc44}{signed\_headers}};}
\DoxyCodeLine{51     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_a9b5c17d7df820085e6c5901f8175f8ba}{canonical\_header\_block}};}
\DoxyCodeLine{52     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_af026e74ccc41f3e7a8540686a7f2c13c}{payload\_hash}};}
\DoxyCodeLine{53     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_ac6ffe9735242aed3974260b4d4c61e5a}{credential\_scope}};}
\DoxyCodeLine{54     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_aafc544b148c0cc77064458b304b35927}{access\_credential\_scope}};}
\DoxyCodeLine{55     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_af5fc21e8c2ecd3603b88e757b55e7240}{date}};}
\DoxyCodeLine{56     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_a0b548bcb8a19716e22309104a489bcca}{signature}};}
\DoxyCodeLine{57     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_a8c4ce57f7451d5a4d72e8148ed88adf2}{string\_to\_sign\_payload}};}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     \textcolor{comment}{/* temp buf for writing out strings */}}
\DoxyCodeLine{60     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} \mbox{\hyperlink{structaws__signing__state__aws_a374012aaedcf78c0b00acadfb546e6b8}{scratch\_buf}};}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     \textcolor{keywordtype}{char} \mbox{\hyperlink{structaws__signing__state__aws_ac7e77f925fc9c64ac15179ba38f99530}{expiration\_array}}[32]; \textcolor{comment}{/* serialization of the pre-\/signing expiration duration value */}}
\DoxyCodeLine{63 \};}
\DoxyCodeLine{64 }
\DoxyCodeLine{65 \mbox{\hyperlink{macros_8h_ab6f66af8231eba5da061b9ada0d29bad}{AWS\_EXTERN\_C\_BEGIN}}}
\DoxyCodeLine{66 }
\DoxyCodeLine{67 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}}}
\DoxyCodeLine{68 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__signing__state__aws}{aws\_signing\_state\_aws}} *\mbox{\hyperlink{aws__signing_8h_afd767cf2bbce7190770162c8ccfe41d4}{aws\_signing\_state\_new}}(}
\DoxyCodeLine{69     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{structaws__signing__state__aws_abaa0c11d4a503cdcee510a3de5522783}{allocator}},}
\DoxyCodeLine{70     \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__signing__config__aws}{aws\_signing\_config\_aws}} *\mbox{\hyperlink{namespacecreate__project_ab7f741ca784276a3f80325a8fb79fd95}{config}},}
\DoxyCodeLine{71     \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__signable}{aws\_signable}} *\mbox{\hyperlink{structaws__signing__state__aws_a55a256e108b463ad823e4473d22f0e17}{signable}},}
\DoxyCodeLine{72     \mbox{\hyperlink{crt_2aws-c-auth_2include_2aws_2auth_2_signing_8h_ac35de70031cf940e13c7862208b1defd}{aws\_signing\_complete\_fn}} *\mbox{\hyperlink{structaws__signing__state__aws_a90fe0c13c17ab57db8822988300e357d}{on\_complete}},}
\DoxyCodeLine{73     \textcolor{keywordtype}{void} *\mbox{\hyperlink{structaws__signing__state__aws_adb7906a8b4483c47ef8e7eb4836fd3d9}{userdata}});}
\DoxyCodeLine{74 }
\DoxyCodeLine{75 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}}}
\DoxyCodeLine{76 \textcolor{keywordtype}{void} \mbox{\hyperlink{aws__signing_8h_ad113ffd86046df28b3b45405f9e3178d}{aws\_signing\_state\_destroy}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__signing__state__aws}{aws\_signing\_state\_aws}} *state);}
\DoxyCodeLine{77 }
\DoxyCodeLine{78 \textcolor{comment}{/*}}
\DoxyCodeLine{79 \textcolor{comment}{ * A set of functions that together performs the AWS signing process based}}
\DoxyCodeLine{80 \textcolor{comment}{ * on the algorithm and signature type requested in the shared config.}}
\DoxyCodeLine{81 \textcolor{comment}{ *}}
\DoxyCodeLine{82 \textcolor{comment}{ * These must be called (presumably by the signer) in sequential order:}}
\DoxyCodeLine{83 \textcolor{comment}{ *}}
\DoxyCodeLine{84 \textcolor{comment}{ *   (1) aws\_signing\_build\_canonical\_request}}
\DoxyCodeLine{85 \textcolor{comment}{ *   (2) aws\_signing\_build\_string\_to\_sign}}
\DoxyCodeLine{86 \textcolor{comment}{ *   (3) aws\_signing\_build\_authorization\_value}}
\DoxyCodeLine{87 \textcolor{comment}{ */}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}}}
\DoxyCodeLine{90 \textcolor{keywordtype}{int} \mbox{\hyperlink{aws__signing_8h_a97a563564e737f15dbc6657f0865d48c}{aws\_signing\_build\_canonical\_request}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__signing__state__aws}{aws\_signing\_state\_aws}} *state);}
\DoxyCodeLine{91 }
\DoxyCodeLine{92 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}}}
\DoxyCodeLine{93 \textcolor{keywordtype}{int} \mbox{\hyperlink{aws__signing_8h_af89ef81e8a4e0a4181eff15559a2b87d}{aws\_signing\_build\_string\_to\_sign}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__signing__state__aws}{aws\_signing\_state\_aws}} *state);}
\DoxyCodeLine{94 }
\DoxyCodeLine{95 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}}}
\DoxyCodeLine{96 \textcolor{keywordtype}{int} \mbox{\hyperlink{aws__signing_8h_a3134fe55d76a4b72b5fa0509a70f4a50}{aws\_signing\_build\_authorization\_value}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__signing__state__aws}{aws\_signing\_state\_aws}} *state);}
\DoxyCodeLine{97 }
\DoxyCodeLine{98 \textcolor{comment}{/*}}
\DoxyCodeLine{99 \textcolor{comment}{ * Named constants particular to the sigv4 signing algorithm.  Can be moved to a public header}}
\DoxyCodeLine{100 \textcolor{comment}{ * as needed.}}
\DoxyCodeLine{101 \textcolor{comment}{ */}}
\DoxyCodeLine{102 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}} \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__string}{aws\_string}} *\mbox{\hyperlink{aws__signing_8h_a506e689eb05dc01079fe97f9d64b1cb8}{g\_aws\_signing\_content\_header\_name}};}
\DoxyCodeLine{103 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}} \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__string}{aws\_string}} *\mbox{\hyperlink{aws__signing_8h_a5d7ed8c720d34d356ec34576ac0fc732}{g\_aws\_signing\_algorithm\_query\_param\_name}};}
\DoxyCodeLine{104 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}} \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__string}{aws\_string}} *\mbox{\hyperlink{aws__signing_8h_a2f995bba137085772553a0dd758e677a}{g\_aws\_signing\_credential\_query\_param\_name}};}
\DoxyCodeLine{105 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}} \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__string}{aws\_string}} *\mbox{\hyperlink{aws__signing_8h_a0e8010712edd46dd62ac3ec08def89fb}{g\_aws\_signing\_date\_name}};}
\DoxyCodeLine{106 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}} \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__string}{aws\_string}} *\mbox{\hyperlink{aws__signing_8h_a089a9ce7cd9de83cbe2de0472c31ab75}{g\_aws\_signing\_signed\_headers\_query\_param\_name}};}
\DoxyCodeLine{107 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}} \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__string}{aws\_string}} *\mbox{\hyperlink{aws__signing_8h_ae4cbad479ff8753c9a17216e67c82b55}{g\_aws\_signing\_security\_token\_name}};}
\DoxyCodeLine{108 }
\DoxyCodeLine{112 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}}}
\DoxyCodeLine{113 \textcolor{keywordtype}{int} \mbox{\hyperlink{aws__signing_8h_a135fc667460284908df6f71ebf919f8f}{aws\_signing\_init\_signing\_tables}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{structaws__string_aec82409439d9c2333004c6b3551386f5}{allocator}});}
\DoxyCodeLine{114 }
\DoxyCodeLine{118 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2_exports_8h_ada04eaddb51503ac54105d49ef3176a8}{AWS\_AUTH\_API}}}
\DoxyCodeLine{119 \textcolor{keywordtype}{void} \mbox{\hyperlink{aws__signing_8h_a456c2636ddeda0bfd1c21cac2c9a2b28}{aws\_signing\_clean\_up\_signing\_tables}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{120 }
\DoxyCodeLine{121 \mbox{\hyperlink{macros_8h_a24efb76a3b128abc9c35d83cac0030c5}{AWS\_EXTERN\_C\_END}}}
\DoxyCodeLine{122 }
\DoxyCodeLine{123 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* AWS\_AUTH\_SIGNING\_SIGV4\_H */}\textcolor{preprocessor}{}}

\end{DoxyCode}
