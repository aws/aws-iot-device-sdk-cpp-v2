\hypertarget{mqtt__mock__server__handler_8h_source}{}\doxysection{mqtt\+\_\+mock\+\_\+server\+\_\+handler.\+h}
\label{mqtt__mock__server__handler_8h_source}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/mqtt/tests/mqtt\_mock\_server\_handler.h@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/mqtt/tests/mqtt\_mock\_server\_handler.h}}
\mbox{\hyperlink{mqtt__mock__server__handler_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef MQTT\_MOCK\_SERVER\_HANDLER\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define MQTT\_MOCK\_SERVER\_HANDLER\_H}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{packets_8h}{aws/mqtt/private/packets.h}}>}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}};}
\DoxyCodeLine{10 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__channel__slot}{aws\_channel\_slot}};}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{mqtt__mock__server__handler_8h_a71fc8c485a289c77368bc3f9a792c2ed}{MOCK\_LOG\_SUBJECT}} = 60000;}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{keyword}{struct }\mbox{\hyperlink{structmqtt__decoded__packet}{mqtt\_decoded\_packet}} \{}
\DoxyCodeLine{15     \textcolor{keyword}{enum} \mbox{\hyperlink{fixed__header_8h_a88d0cb6ffb07fc72c20665d7ebeec76b}{aws\_mqtt\_packet\_type}} \mbox{\hyperlink{structmqtt__decoded__packet_a010ed7de437c176501cd2edb79d15145}{type}};}
\DoxyCodeLine{16     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{structmqtt__decoded__packet_af551eec136f985213a654998da324670}{alloc}};}
\DoxyCodeLine{17 }
\DoxyCodeLine{18     \textcolor{comment}{/* CONNECT */}}
\DoxyCodeLine{19     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structmqtt__decoded__packet_a315a217e1b3e4e63e5a6f2c9776ab710}{clean\_session}};}
\DoxyCodeLine{20     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structmqtt__decoded__packet_a925c1287591bcfd257aee11483ad04aa}{has\_will}};}
\DoxyCodeLine{21     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structmqtt__decoded__packet_a3a777f98ba6e15dc2ae71d88ee0025d3}{will\_retain}};}
\DoxyCodeLine{22     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structmqtt__decoded__packet_a732bb4a04e9cb5f5dedb1d3213b34e68}{has\_password}};}
\DoxyCodeLine{23     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structmqtt__decoded__packet_a302c77190d9646eb2ea087e07f72f251}{has\_username}};}
\DoxyCodeLine{24     uint16\_t \mbox{\hyperlink{structmqtt__decoded__packet_ab97e0e7abc05d7b0d90fbb838e0410e5}{keep\_alive\_timeout}};}
\DoxyCodeLine{25     \textcolor{keyword}{enum} \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\_mqtt\_qos}} \mbox{\hyperlink{structmqtt__decoded__packet_a860ae40b4578720c65d6c61fb8571191}{will\_qos}};}
\DoxyCodeLine{26     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} \mbox{\hyperlink{structmqtt__decoded__packet_a92e979683ecdf5fe96bbd536d3d902ab}{client\_identifier}}; \textcolor{comment}{/* These cursors live with the received\_message */}}
\DoxyCodeLine{27     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} \mbox{\hyperlink{structmqtt__decoded__packet_a570058de3e121d6198784d72ba3515e5}{will\_topic}};}
\DoxyCodeLine{28     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} \mbox{\hyperlink{structmqtt__decoded__packet_af001d81875aabaab1ed896cea9e5d075}{will\_message}};}
\DoxyCodeLine{29     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} \mbox{\hyperlink{structmqtt__decoded__packet_a018177a550ab21950a3bcae1fc5cf0b8}{username}};}
\DoxyCodeLine{30     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} \mbox{\hyperlink{structmqtt__decoded__packet_a20db4a0c0ac948acc23cd8feca892f6d}{password}};}
\DoxyCodeLine{31 }
\DoxyCodeLine{32     \textcolor{comment}{/* PUBLISH SUBSCRIBE UNSUBSCRIBE */}}
\DoxyCodeLine{33     uint16\_t \mbox{\hyperlink{structmqtt__decoded__packet_ae36c7d18dd27b0dec44af73215be9b68}{packet\_identifier}};}
\DoxyCodeLine{34     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} \mbox{\hyperlink{structmqtt__decoded__packet_a4b5d2436fd9996ae7cab178402241add}{topic\_name}};         \textcolor{comment}{/* PUBLISH topic */}}
\DoxyCodeLine{35     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} \mbox{\hyperlink{structmqtt__decoded__packet_ab64039e5f287d4f443efc4a3d2ce3ae4}{publish\_payload}};    \textcolor{comment}{/* PUBLISH payload */}}
\DoxyCodeLine{36     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__array__list}{aws\_array\_list}} \mbox{\hyperlink{structmqtt__decoded__packet_a8e98561355bab90042ad353e397ce579}{sub\_topic\_filters}};   \textcolor{comment}{/* list of aws\_mqtt\_subscription for SUBSCRIBE */}}
\DoxyCodeLine{37     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__array__list}{aws\_array\_list}} \mbox{\hyperlink{structmqtt__decoded__packet_a029a2c161afa815163f5a3465c5f8dd1}{unsub\_topic\_filters}}; \textcolor{comment}{/* list of aws\_byte\_cursor for UNSUBSCRIBE */}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     \textcolor{comment}{/* index of the received packet, indicating when it's received by the server */}}
\DoxyCodeLine{40     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structmqtt__decoded__packet_a6e791af6fcd69674287e586ade67fa9c}{index}};}
\DoxyCodeLine{41 \};}
\DoxyCodeLine{42 }
\DoxyCodeLine{43 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{mqtt__mock__server__handler_8h_a3320e8b1cfbd5fc95c3a0ea4dbec409c}{new\_mqtt\_mock\_server}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}});}
\DoxyCodeLine{44 \textcolor{keywordtype}{void} \mbox{\hyperlink{mqtt__mock__server__handler_8h_a46c599740c83a7efffc0dd4ae1c749e1}{destroy\_mqtt\_mock\_server}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}});}
\DoxyCodeLine{45 \textcolor{keywordtype}{void} \mbox{\hyperlink{mqtt__mock__server__handler_8h_adb91f567eb5d5dda9dddb6a32bd53812}{mqtt\_mock\_server\_handler\_update\_slot}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}}, \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__slot}{aws\_channel\_slot}} *\mbox{\hyperlink{structaws__channel__handler_aacd0130a225a17d8c4d34fcebdb4b0c6}{slot}});}
\DoxyCodeLine{46 }
\DoxyCodeLine{50 \textcolor{keywordtype}{int} \mbox{\hyperlink{mqtt__mock__server__handler_8h_ab028d0c987f38f78076a120547ac8603}{mqtt\_mock\_server\_send\_publish}}(}
\DoxyCodeLine{51     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}},}
\DoxyCodeLine{52     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *\mbox{\hyperlink{connection__state__test_8c_ad99baabff61442b2d602f6dd84310f89}{topic}},}
\DoxyCodeLine{53     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *\mbox{\hyperlink{event__stream__rpc__server__connection__test_8c_ad1560a388c937f36f038c683175d82bf}{payload}},}
\DoxyCodeLine{54     \textcolor{keywordtype}{bool} \mbox{\hyperlink{s2n_2pq-crypto_2bike__r1_2decode_8c_aa36ac9b28eef6905672b29e8e398053a}{dup}},}
\DoxyCodeLine{55     \textcolor{keyword}{enum} \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\_mqtt\_qos}} \mbox{\hyperlink{connection__state__test_8c_a65ee2b4b16f25052c441ff9959dcc7e7}{qos}},}
\DoxyCodeLine{56     \textcolor{keywordtype}{bool} retain);}
\DoxyCodeLine{60 \textcolor{keywordtype}{void} \mbox{\hyperlink{mqtt__mock__server__handler_8h_ac2ae03a969c730353e25303e85afad05}{mqtt\_mock\_server\_set\_max\_ping\_resp}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}}, \textcolor{keywordtype}{size\_t} max\_ping);}
\DoxyCodeLine{64 \textcolor{keywordtype}{void} \mbox{\hyperlink{mqtt__mock__server__handler_8h_a7a5201e8556b6876d4809e8c359e7cc5}{mqtt\_mock\_server\_set\_max\_connack}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}}, \textcolor{keywordtype}{size\_t} connack\_avail);}
\DoxyCodeLine{65 }
\DoxyCodeLine{69 \textcolor{keywordtype}{void} \mbox{\hyperlink{mqtt__mock__server__handler_8h_a81e5edc0e146753d0cf824711fdfdd4a}{mqtt\_mock\_server\_disable\_auto\_ack}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}});}
\DoxyCodeLine{73 \textcolor{keywordtype}{void} \mbox{\hyperlink{mqtt__mock__server__handler_8h_a58ad8885c749a1d95db64cd735783973}{mqtt\_mock\_server\_enable\_auto\_ack}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}});}
\DoxyCodeLine{77 \textcolor{keywordtype}{int} \mbox{\hyperlink{mqtt__mock__server__handler_8h_ad259cc593af33564a7b85d498ed3bae0}{mqtt\_mock\_server\_send\_unsuback}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}}, uint16\_t \mbox{\hyperlink{connection__state__test_8c_ad051e090f3817f4549df7dc178790f45}{packet\_id}});}
\DoxyCodeLine{78 \textcolor{keywordtype}{int} \mbox{\hyperlink{mqtt__mock__server__handler_8h_a44980213167fbc28b9c3ddb7dc4fbfff}{mqtt\_mock\_server\_send\_puback}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}}, uint16\_t \mbox{\hyperlink{connection__state__test_8c_ad051e090f3817f4549df7dc178790f45}{packet\_id}});}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 \textcolor{keywordtype}{int} \mbox{\hyperlink{mqtt__mock__server__handler_8h_a9ffe321e81a9b986c6fba084b5caede5}{mqtt\_mock\_server\_send\_single\_suback}}(}
\DoxyCodeLine{81     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}},}
\DoxyCodeLine{82     uint16\_t \mbox{\hyperlink{connection__state__test_8c_ad051e090f3817f4549df7dc178790f45}{packet\_id}},}
\DoxyCodeLine{83     \textcolor{keyword}{enum} \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\_mqtt\_qos}} return\_code);}
\DoxyCodeLine{87 \textcolor{keywordtype}{void} \mbox{\hyperlink{mqtt__mock__server__handler_8h_a9bdd2c03b8acf979d3ce97f5015d89fa}{mqtt\_mock\_server\_wait\_for\_pubacks}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}}, \textcolor{keywordtype}{size\_t} puback\_count);}
\DoxyCodeLine{88 }
\DoxyCodeLine{92 \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{mqtt__mock__server__handler_8h_ac516663012167d11bc7becf5c2d9b980}{mqtt\_mock\_server\_decoded\_packets\_count}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}});}
\DoxyCodeLine{96 \textcolor{keyword}{struct }\mbox{\hyperlink{structmqtt__decoded__packet}{mqtt\_decoded\_packet}} *\mbox{\hyperlink{mqtt__mock__server__handler_8h_acfda9c24ddcf3ba499df71d54f3a4643}{mqtt\_mock\_server\_get\_decoded\_packet\_by\_index}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}}, \textcolor{keywordtype}{size\_t} i);}
\DoxyCodeLine{100 \textcolor{keyword}{struct }\mbox{\hyperlink{structmqtt__decoded__packet}{mqtt\_decoded\_packet}} *\mbox{\hyperlink{mqtt__mock__server__handler_8h_a71a93e16e4b4cf310db18e4dc072d59a}{mqtt\_mock\_server\_get\_latest\_decoded\_packet}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}});}
\DoxyCodeLine{107 \textcolor{keyword}{struct }\mbox{\hyperlink{structmqtt__decoded__packet}{mqtt\_decoded\_packet}} *\mbox{\hyperlink{mqtt__mock__server__handler_8h_a6fef2f30e40481307df3c9515458db30}{mqtt\_mock\_server\_find\_decoded\_packet\_by\_id}}(}
\DoxyCodeLine{108     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}},}
\DoxyCodeLine{109     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{connection__state__test_8c_ac26bf81bcc6cb9a83aaf17a31998c9d4}{search\_start\_idx}},}
\DoxyCodeLine{110     uint16\_t \mbox{\hyperlink{connection__state__test_8c_ad051e090f3817f4549df7dc178790f45}{packet\_id}},}
\DoxyCodeLine{111     \textcolor{keywordtype}{size\_t} *out\_idx);}
\DoxyCodeLine{118 \textcolor{keyword}{struct }\mbox{\hyperlink{structmqtt__decoded__packet}{mqtt\_decoded\_packet}} *\mbox{\hyperlink{mqtt__mock__server__handler_8h_a4672b10f9bc479e1d7857ad491d536d0}{mqtt\_mock\_server\_find\_decoded\_packet\_by\_type}}(}
\DoxyCodeLine{119     \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}},}
\DoxyCodeLine{120     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{connection__state__test_8c_ac26bf81bcc6cb9a83aaf17a31998c9d4}{search\_start\_idx}},}
\DoxyCodeLine{121     \textcolor{keyword}{enum} \mbox{\hyperlink{fixed__header_8h_a88d0cb6ffb07fc72c20665d7ebeec76b}{aws\_mqtt\_packet\_type}} \mbox{\hyperlink{namespacecreate-projects_a8e98101a40c3e8a674b8023e90df2b7c}{type}},}
\DoxyCodeLine{122     \textcolor{keywordtype}{size\_t} *out\_idx);}
\DoxyCodeLine{123 }
\DoxyCodeLine{127 \textcolor{keywordtype}{int} \mbox{\hyperlink{mqtt__mock__server__handler_8h_a170c32326cea5a74a6886f0d5fba0780}{mqtt\_mock\_server\_decode\_packets}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__channel__handler}{aws\_channel\_handler}} *\mbox{\hyperlink{connection__state__test_8c_a5f4fb7eeb486f3159a0f17d3d7d59637}{handler}});}
\DoxyCodeLine{128 }
\DoxyCodeLine{129 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* MQTT\_MOCK\_SERVER\_HANDLER\_H */}\textcolor{preprocessor}{}}

\end{DoxyCode}
