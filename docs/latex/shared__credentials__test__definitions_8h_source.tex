\hypertarget{shared__credentials__test__definitions_8h_source}{}\doxysection{shared\+\_\+credentials\+\_\+test\+\_\+definitions.\+h}
\label{shared__credentials__test__definitions_8h_source}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/auth/tests/shared\_credentials\_test\_definitions.h@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/auth/tests/shared\_credentials\_test\_definitions.h}}
\mbox{\hyperlink{shared__credentials__test__definitions_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef SHARED\_CREDENTIALS\_TEST\_DEFINITIONS\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define SHARED\_CREDENTIALS\_TEST\_DEFINITIONS\_H}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{string_8h}{aws/common/string.h}}>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{crt_2aws-c-common_2include_2aws_2common_2_u_u_i_d_8h}{aws/common/uuid.h}}>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <aws/io/file\_utils.h>}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <errno.h>}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{15 \textcolor{comment}{/* fopen, fprintf etc... */}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#    pragma warning(push)}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#    pragma warning(disable : 4996)}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \mbox{\hyperlink{shared__credentials__test__definitions_8h_afccb2f8d844b547052b6de533c51e0ad}{AWS\_STATIC\_STRING\_FROM\_LITERAL}}(s\_default\_profile\_env\_variable\_name, \textcolor{stringliteral}{"{}AWS\_PROFILE"{}});}
\DoxyCodeLine{21 \mbox{\hyperlink{shared__credentials__test__definitions_8h_afccb2f8d844b547052b6de533c51e0ad}{AWS\_STATIC\_STRING\_FROM\_LITERAL}}(s\_default\_config\_path\_env\_variable\_name, \textcolor{stringliteral}{"{}AWS\_CONFIG\_FILE"{}});}
\DoxyCodeLine{22 \mbox{\hyperlink{shared__credentials__test__definitions_8h_afccb2f8d844b547052b6de533c51e0ad}{AWS\_STATIC\_STRING\_FROM\_LITERAL}}(s\_default\_credentials\_path\_env\_variable\_name, \textcolor{stringliteral}{"{}AWS\_SHARED\_CREDENTIALS\_FILE"{}});}
\DoxyCodeLine{23 \mbox{\hyperlink{shared__credentials__test__definitions_8h_afccb2f8d844b547052b6de533c51e0ad}{AWS\_STATIC\_STRING\_FROM\_LITERAL}}(s\_access\_key\_id\_env\_var, \textcolor{stringliteral}{"{}AWS\_ACCESS\_KEY\_ID"{}});}
\DoxyCodeLine{24 \mbox{\hyperlink{shared__credentials__test__definitions_8h_afccb2f8d844b547052b6de533c51e0ad}{AWS\_STATIC\_STRING\_FROM\_LITERAL}}(s\_secret\_access\_key\_env\_var, \textcolor{stringliteral}{"{}AWS\_SECRET\_ACCESS\_KEY"{}});}
\DoxyCodeLine{25 \mbox{\hyperlink{shared__credentials__test__definitions_8h_afccb2f8d844b547052b6de533c51e0ad}{AWS\_STATIC\_STRING\_FROM\_LITERAL}}(s\_session\_token\_env\_var, \textcolor{stringliteral}{"{}AWS\_SESSION\_TOKEN"{}});}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{keyword}{static} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__string}{aws\_string}} *\mbox{\hyperlink{shared__credentials__test__definitions_8h_a2b4467167eede7a072923169ba68d833}{aws\_create\_process\_unique\_file\_name}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}) \{}
\DoxyCodeLine{28     \textcolor{keywordtype}{char} file\_name\_storage[64] = \{0\};}
\DoxyCodeLine{29     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__byte__buf}{aws\_byte\_buf}} filename\_buf = \mbox{\hyperlink{byte__buf_8h_ae5fd8edb596ceaf3fadf0aa9b2b56f16}{aws\_byte\_buf\_from\_empty\_array}}(file\_name\_storage, \textcolor{keyword}{sizeof}(file\_name\_storage));}
\DoxyCodeLine{30 }
\DoxyCodeLine{31 \textcolor{preprocessor}{\#ifndef WIN32}}
\DoxyCodeLine{32     \mbox{\hyperlink{assert_8h_a19e87c13c204dbfebc6d18811ea22717}{AWS\_FATAL\_ASSERT}}(\mbox{\hyperlink{byte__buf_8h_a3455abd5c22f5a9f9e762787e4a2721f}{aws\_byte\_buf\_write\_from\_whole\_cursor}}(\&filename\_buf, \mbox{\hyperlink{byte__buf_8h_ad7026141c771335af3e6a7fee9350591}{aws\_byte\_cursor\_from\_c\_str}}(\textcolor{stringliteral}{"{}./"{}})));}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{34 }
\DoxyCodeLine{35     \mbox{\hyperlink{assert_8h_a19e87c13c204dbfebc6d18811ea22717}{AWS\_FATAL\_ASSERT}}(}
\DoxyCodeLine{36         \mbox{\hyperlink{byte__buf_8h_a3455abd5c22f5a9f9e762787e4a2721f}{aws\_byte\_buf\_write\_from\_whole\_cursor}}(\&filename\_buf, \mbox{\hyperlink{byte__buf_8h_ad7026141c771335af3e6a7fee9350591}{aws\_byte\_cursor\_from\_c\_str}}(\textcolor{stringliteral}{"{}config\_creds\_test"{}})));}
\DoxyCodeLine{37 }
\DoxyCodeLine{38     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__uuid}{aws\_uuid}} uuid;}
\DoxyCodeLine{39     \mbox{\hyperlink{assert_8h_a19e87c13c204dbfebc6d18811ea22717}{AWS\_FATAL\_ASSERT}}(\mbox{\hyperlink{crt_2aws-c-common_2include_2aws_2common_2_u_u_i_d_8h_a647330b844fdc4d4df82172c42f67a9a}{aws\_uuid\_init}}(\&uuid) == \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2error_8h_a5c0c86c38647f98229becf17743f7cb5}{AWS\_OP\_SUCCESS}});}
\DoxyCodeLine{40     \mbox{\hyperlink{assert_8h_a19e87c13c204dbfebc6d18811ea22717}{AWS\_FATAL\_ASSERT}}(\mbox{\hyperlink{crt_2aws-c-common_2include_2aws_2common_2_u_u_i_d_8h_aefdc5f79c5e57094fd115490f856c6f2}{aws\_uuid\_to\_str}}(\&uuid, \&filename\_buf) == \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2error_8h_a5c0c86c38647f98229becf17743f7cb5}{AWS\_OP\_SUCCESS}});}
\DoxyCodeLine{41 }
\DoxyCodeLine{42     \textcolor{keywordflow}{return} \mbox{\hyperlink{string_8h_a444838784521d444a8794ef9a622965b}{aws\_string\_new\_from\_array}}(\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, filename\_buf.\mbox{\hyperlink{structaws__byte__buf_ad3a14c329a969f4895f0023e40261dfe}{buffer}}, filename\_buf.\mbox{\hyperlink{structaws__byte__buf_a56a0e80b3f9374df753980bbb66f228d}{len}});}
\DoxyCodeLine{43 \}}
\DoxyCodeLine{44 }
\DoxyCodeLine{45 \textcolor{keyword}{static} \textcolor{keywordtype}{int} \mbox{\hyperlink{shared__credentials__test__definitions_8h_a11d6611019e078bc5057985f25d89980}{aws\_create\_profile\_file}}(\textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__string}{aws\_string}} *file\_name, \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__string}{aws\_string}} *file\_contents) \{}
\DoxyCodeLine{46     \textcolor{comment}{/* avoid compiler warning if some files include this header but don't actually use those variables */}}
\DoxyCodeLine{47     (void)s\_default\_profile\_env\_variable\_name;}
\DoxyCodeLine{48     (void)s\_default\_config\_path\_env\_variable\_name;}
\DoxyCodeLine{49     (void)s\_default\_credentials\_path\_env\_variable\_name;}
\DoxyCodeLine{50     (void)s\_access\_key\_id\_env\_var;}
\DoxyCodeLine{51     (void)s\_secret\_access\_key\_env\_var;}
\DoxyCodeLine{52     (void)s\_session\_token\_env\_var;}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     FILE *fp = fopen(\mbox{\hyperlink{string_8h_add6fe9a5b2551dc11945c5b594a38547}{aws\_string\_c\_str}}(file\_name), \textcolor{stringliteral}{"{}w"{}});}
\DoxyCodeLine{55     \textcolor{keywordflow}{if} (fp == \mbox{\hyperlink{namespace_aws_a41b67e809416e9bd96026fa1f414925d}{NULL}}) \{}
\DoxyCodeLine{56         \textcolor{keywordflow}{return} \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2error_8h_a329538632b97672508856c61c0ab6582}{aws\_translate\_and\_raise\_io\_error}}(errno);}
\DoxyCodeLine{57     \}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     \textcolor{keywordtype}{int} result = fprintf(fp, \textcolor{stringliteral}{"{}\%s"{}}, \mbox{\hyperlink{string_8h_add6fe9a5b2551dc11945c5b594a38547}{aws\_string\_c\_str}}(file\_contents));}
\DoxyCodeLine{60     fclose(fp);}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     \textcolor{keywordflow}{if} (result < 0) \{}
\DoxyCodeLine{63         \textcolor{keywordflow}{return} \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2error_8h_a329538632b97672508856c61c0ab6582}{aws\_translate\_and\_raise\_io\_error}}(errno);}
\DoxyCodeLine{64     \}}
\DoxyCodeLine{65 }
\DoxyCodeLine{66     \textcolor{keywordflow}{return} \mbox{\hyperlink{aws-c-common_2include_2aws_2common_2error_8h_a5c0c86c38647f98229becf17743f7cb5}{AWS\_OP\_SUCCESS}};}
\DoxyCodeLine{67 \}}
\DoxyCodeLine{68 }
\DoxyCodeLine{69 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{70 \textcolor{preprocessor}{\#    pragma warning(pop)}}
\DoxyCodeLine{71 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{72 }
\DoxyCodeLine{73 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* SHARED\_CREDENTIALS\_TEST\_DEFINITIONS\_H */}\textcolor{preprocessor}{}}

\end{DoxyCode}
