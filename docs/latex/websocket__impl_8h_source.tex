\hypertarget{websocket__impl_8h_source}{}\doxysection{websocket\+\_\+impl.\+h}
\label{websocket__impl_8h_source}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/http/include/aws/http/private/websocket\_impl.h@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/http/include/aws/http/private/websocket\_impl.h}}
\mbox{\hyperlink{websocket__impl_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef AWS\_HTTP\_WEBSOCKET\_IMPL\_H}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define AWS\_HTTP\_WEBSOCKET\_IMPL\_H}}
\DoxyCodeLine{3 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{websocket_8h}{aws/http/websocket.h}}>}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__client__connection__options}{aws\_http\_client\_connection\_options}};}
\DoxyCodeLine{12 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection}{aws\_http\_connection}};}
\DoxyCodeLine{13 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__make__request__options}{aws\_http\_make\_request\_options}};}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{comment}{/* RFC-\/6455 Section 5.2 Base Framing Protocol}}
\DoxyCodeLine{16 \textcolor{comment}{ * Payload length:  7 bits, 7+16 bits, or 7+64 bits}}
\DoxyCodeLine{17 \textcolor{comment}{ *}}
\DoxyCodeLine{18 \textcolor{comment}{ * The length of the "{}Payload data"{}, in bytes: if 0-\/125, that is the}}
\DoxyCodeLine{19 \textcolor{comment}{ * payload length.  If 126, the following 2 bytes interpreted as a}}
\DoxyCodeLine{20 \textcolor{comment}{ * 16-\/bit unsigned integer are the payload length.  If 127, the}}
\DoxyCodeLine{21 \textcolor{comment}{ * following 8 bytes interpreted as a 64-\/bit unsigned integer (the}}
\DoxyCodeLine{22 \textcolor{comment}{ * most significant bit MUST be 0) are the payload length.  Multibyte}}
\DoxyCodeLine{23 \textcolor{comment}{ * length quantities are expressed in network byte order.  Note that}}
\DoxyCodeLine{24 \textcolor{comment}{ * in all cases, the minimal number of bytes MUST be used to encode}}
\DoxyCodeLine{25 \textcolor{comment}{ * the length, for example, the length of a 124-\/byte-\/long string}}
\DoxyCodeLine{26 \textcolor{comment}{ * can't be encoded as the sequence 126, 0, 124.  The payload length}}
\DoxyCodeLine{27 \textcolor{comment}{ * is the length of the "{}Extension data"{} + the length of the}}
\DoxyCodeLine{28 \textcolor{comment}{ * "{}Application data"{}.  The length of the "{}Extension data"{} may be}}
\DoxyCodeLine{29 \textcolor{comment}{ * zero, in which case the payload length is the length of the}}
\DoxyCodeLine{30 \textcolor{comment}{ * "{}Application data"{}.}}
\DoxyCodeLine{31 \textcolor{comment}{ */}}
\DoxyCodeLine{32 \textcolor{preprocessor}{\#define AWS\_WEBSOCKET\_7BIT\_VALUE\_FOR\_2BYTE\_EXTENDED\_LENGTH 126}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#define AWS\_WEBSOCKET\_7BIT\_VALUE\_FOR\_8BYTE\_EXTENDED\_LENGTH 127}}
\DoxyCodeLine{34 }
\DoxyCodeLine{35 \textcolor{preprocessor}{\#define AWS\_WEBSOCKET\_2BYTE\_EXTENDED\_LENGTH\_MIN\_VALUE AWS\_WEBSOCKET\_7BIT\_VALUE\_FOR\_2BYTE\_EXTENDED\_LENGTH}}
\DoxyCodeLine{36 \textcolor{preprocessor}{\#define AWS\_WEBSOCKET\_2BYTE\_EXTENDED\_LENGTH\_MAX\_VALUE 0x000000000000FFFF}}
\DoxyCodeLine{37 }
\DoxyCodeLine{38 \textcolor{preprocessor}{\#define AWS\_WEBSOCKET\_8BYTE\_EXTENDED\_LENGTH\_MIN\_VALUE 0x0000000000010000}}
\DoxyCodeLine{39 \textcolor{preprocessor}{\#define AWS\_WEBSOCKET\_8BYTE\_EXTENDED\_LENGTH\_MAX\_VALUE 0x7FFFFFFFFFFFFFFF}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 \textcolor{comment}{/* Max bytes necessary to send non-\/payload parts of a frame */}}
\DoxyCodeLine{42 \textcolor{preprocessor}{\#define AWS\_WEBSOCKET\_MAX\_FRAME\_OVERHEAD (2 + 8 + 4) }\textcolor{comment}{/* base + extended-\/length + masking-\/key */}\textcolor{preprocessor}{}}
\DoxyCodeLine{43 }
\DoxyCodeLine{47 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__websocket__frame}{aws\_websocket\_frame}} \{}
\DoxyCodeLine{48     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structaws__websocket__frame_a8915f5db1fdfa0ca75e854a92f22217b}{fin}};}
\DoxyCodeLine{49     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structaws__websocket__frame_a4aa9979744dd6eb4fd67b22a908a608c}{rsv}}[3];}
\DoxyCodeLine{50     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structaws__websocket__frame_afef05b06fd99f6b3b93d905d8a39c7c9}{masked}};}
\DoxyCodeLine{51     uint8\_t \mbox{\hyperlink{structaws__websocket__frame_a5e9ed5f8da7b2b7a0e32dee95aaadb9f}{opcode}};}
\DoxyCodeLine{52     uint64\_t \mbox{\hyperlink{structaws__websocket__frame_ab51d2887ca3b6f563b30531e7cf82998}{payload\_length}};}
\DoxyCodeLine{53     uint8\_t \mbox{\hyperlink{structaws__websocket__frame_aadbd4997949c1d327e18dc5888bdc6a8}{masking\_key}}[4];}
\DoxyCodeLine{54 \};}
\DoxyCodeLine{55 }
\DoxyCodeLine{56 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__websocket__handler__options}{aws\_websocket\_handler\_options}} \{}
\DoxyCodeLine{57     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{structaws__websocket__handler__options_a18b1c9110b687e8ad049d19f035f95f1}{allocator}};}
\DoxyCodeLine{58     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__channel}{aws\_channel}} *\mbox{\hyperlink{structaws__websocket__handler__options_a4d28212c9a2e1c1ceb7c0eecd40ff794}{channel}};}
\DoxyCodeLine{59     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structaws__websocket__handler__options_a3cabd20e30f36da1415b91c2abe0f621}{initial\_window\_size}};}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     \textcolor{keywordtype}{void} *\mbox{\hyperlink{structaws__websocket__handler__options_a789ab204f3d64ae948ef7e8d2bccde5d}{user\_data}};}
\DoxyCodeLine{62     \mbox{\hyperlink{websocket_8h_aafe3f4e03f8e097e00ff8839135f29e3}{aws\_websocket\_on\_incoming\_frame\_begin\_fn}} *\mbox{\hyperlink{structaws__websocket__handler__options_a3541ea3f834fc0940e2ed590fcc840ef}{on\_incoming\_frame\_begin}};}
\DoxyCodeLine{63     \mbox{\hyperlink{websocket_8h_a96232fc291dd4d3715f64b1accf4be06}{aws\_websocket\_on\_incoming\_frame\_payload\_fn}} *\mbox{\hyperlink{structaws__websocket__handler__options_abc1ff3830a3ed7757dfd5181dcd72e37}{on\_incoming\_frame\_payload}};}
\DoxyCodeLine{64     \mbox{\hyperlink{websocket_8h_ad338634b0233c81c3cdeb252471adef1}{aws\_websocket\_on\_incoming\_frame\_complete\_fn}} *\mbox{\hyperlink{structaws__websocket__handler__options_a6f42e1034cb65c13c7bbda63963fc5d6}{on\_incoming\_frame\_complete}};}
\DoxyCodeLine{65 }
\DoxyCodeLine{66     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structaws__websocket__handler__options_a0ee309bda6f21f5c189a497d1709e407}{is\_server}};}
\DoxyCodeLine{67     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structaws__websocket__handler__options_acc00131810076194500e2bb617aacdeb}{manual\_window\_update}};}
\DoxyCodeLine{68 \};}
\DoxyCodeLine{69 }
\DoxyCodeLine{70 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__websocket__client__bootstrap__system__vtable}{aws\_websocket\_client\_bootstrap\_system\_vtable}} \{}
\DoxyCodeLine{71     int (*\mbox{\hyperlink{structaws__websocket__client__bootstrap__system__vtable_a70a9ba6be4ed4bd6b190103bf2acd736}{aws\_http\_client\_connect}})(\textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__client__connection__options}{aws\_http\_client\_connection\_options}} *options);}
\DoxyCodeLine{72     void (*\mbox{\hyperlink{structaws__websocket__client__bootstrap__system__vtable_a26c3546508eae1612b67cb51f3ed1fc9}{aws\_http\_connection\_release}})(\textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection}{aws\_http\_connection}} *connection);}
\DoxyCodeLine{73     void (*\mbox{\hyperlink{structaws__websocket__client__bootstrap__system__vtable_ad5e3eaec24bfd8ca36abff03759b9371}{aws\_http\_connection\_close}})(\textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection}{aws\_http\_connection}} *connection);}
\DoxyCodeLine{74     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__channel}{aws\_channel}} *(*aws\_http\_connection\_get\_channel)(\textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection}{aws\_http\_connection}} *connection);}
\DoxyCodeLine{75     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__stream}{aws\_http\_stream}} *(*aws\_http\_connection\_make\_request)(}
\DoxyCodeLine{76         \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection}{aws\_http\_connection}} *client\_connection,}
\DoxyCodeLine{77         \textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__make__request__options}{aws\_http\_make\_request\_options}} *options);}
\DoxyCodeLine{78     int (*\mbox{\hyperlink{structaws__websocket__client__bootstrap__system__vtable_a722843c1a7db38a4a5dda88fe42a8cb1}{aws\_http\_stream\_activate}})(\textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__stream}{aws\_http\_stream}} *stream);}
\DoxyCodeLine{79     void (*\mbox{\hyperlink{structaws__websocket__client__bootstrap__system__vtable_a8f5f8e75606fc96becc09a0505aa20b6}{aws\_http\_stream\_release}})(\textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__stream}{aws\_http\_stream}} *stream);}
\DoxyCodeLine{80     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__connection}{aws\_http\_connection}} *(*aws\_http\_stream\_get\_connection)(\textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__stream}{aws\_http\_stream}} *stream);}
\DoxyCodeLine{81     int (*\mbox{\hyperlink{structaws__websocket__client__bootstrap__system__vtable_a0784e44c4c4c7ac8b60d9414360bb513}{aws\_http\_stream\_get\_incoming\_response\_status}})(\textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__http__stream}{aws\_http\_stream}} *stream, \textcolor{keywordtype}{int} *out\_status);}
\DoxyCodeLine{82     \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__websocket}{aws\_websocket}} *(*aws\_websocket\_handler\_new)(\textcolor{keyword}{const} \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__websocket__handler__options}{aws\_websocket\_handler\_options}} *options);}
\DoxyCodeLine{83 \};}
\DoxyCodeLine{84 }
\DoxyCodeLine{85 \mbox{\hyperlink{macros_8h_ab6f66af8231eba5da061b9ada0d29bad}{AWS\_EXTERN\_C\_BEGIN}}}
\DoxyCodeLine{86 }
\DoxyCodeLine{90 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\_HTTP\_API}}}
\DoxyCodeLine{91 \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\mbox{\hyperlink{websocket__impl_8h_aaa3530863cc53b02a3694b0b815f7745}{aws\_websocket\_opcode\_str}}(uint8\_t opcode);}
\DoxyCodeLine{92 }
\DoxyCodeLine{96 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\_HTTP\_API}}}
\DoxyCodeLine{97 uint64\_t \mbox{\hyperlink{websocket__impl_8h_ae42db5172540701d6a4a567fef3fb34b}{aws\_websocket\_frame\_encoded\_size}}(\textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__websocket__frame}{aws\_websocket\_frame}} *frame);}
\DoxyCodeLine{98 }
\DoxyCodeLine{102 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\_HTTP\_API}}}
\DoxyCodeLine{103 \textcolor{keyword}{struct }\mbox{\hyperlink{structaws__websocket}{aws\_websocket}} *\mbox{\hyperlink{websocket__impl_8h_a3780da7aa9b7d1e95986e330c5796250}{aws\_websocket\_handler\_new}}(\textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__websocket__handler__options}{aws\_websocket\_handler\_options}} *options);}
\DoxyCodeLine{104 }
\DoxyCodeLine{109 \mbox{\hyperlink{crt_2aws-crt-cpp_2crt_2aws-c-http_2include_2aws_2http_2_exports_8h_a8eba90dca01a9989cacc0060fa84122a}{AWS\_HTTP\_API}}}
\DoxyCodeLine{110 \textcolor{keywordtype}{void} \mbox{\hyperlink{websocket__impl_8h_a26cc4dbff70957f6ffb777dc159c6fd6}{aws\_websocket\_client\_bootstrap\_set\_system\_vtable}}(}
\DoxyCodeLine{111     \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__websocket__client__bootstrap__system__vtable}{aws\_websocket\_client\_bootstrap\_system\_vtable}} *system\_vtable);}
\DoxyCodeLine{112 }
\DoxyCodeLine{113 \mbox{\hyperlink{macros_8h_a24efb76a3b128abc9c35d83cac0030c5}{AWS\_EXTERN\_C\_END}}}
\DoxyCodeLine{114 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* AWS\_HTTP\_WEBSOCKET\_IMPL\_H */}\textcolor{preprocessor}{}}

\end{DoxyCode}
