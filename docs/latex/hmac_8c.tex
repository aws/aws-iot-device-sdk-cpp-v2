\hypertarget{hmac_8c}{}\doxysection{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/cal/source/hmac.c File Reference}
\label{hmac_8c}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/cal/source/hmac.c@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/cal/source/hmac.c}}
{\ttfamily \#include $<$aws/cal/hmac.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$ \mbox{\hyperlink{hmac_8c_a2a75179fa3671f67e910908180bbb138}{aws\+\_\+sha256\+\_\+hmac\+\_\+default\+\_\+new}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$secret)
\item 
struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$ \mbox{\hyperlink{hmac_8c_abcb9b61391f31ba0c3680fa8e60284df}{aws\+\_\+sha256\+\_\+hmac\+\_\+new}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$secret)
\item 
void \mbox{\hyperlink{hmac_8c_a967b9bd94a7fe04075dac4c407c9cf00}{aws\+\_\+set\+\_\+sha256\+\_\+hmac\+\_\+new\+\_\+fn}} (\mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_aab6815d6797ca8ea2d161f4300cee717}{aws\+\_\+hmac\+\_\+new\+\_\+fn}} $\ast$fn)
\item 
void \mbox{\hyperlink{hmac_8c_a54d5f607578696985c587286736581da}{aws\+\_\+hmac\+\_\+destroy}} (struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$hmac)
\item 
int \mbox{\hyperlink{hmac_8c_a843ee14b212f355c45ad4fb22df58484}{aws\+\_\+hmac\+\_\+update}} (struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$hmac, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$to\+\_\+hmac)
\item 
int \mbox{\hyperlink{hmac_8c_ab1f3b6bab8bc50cc70e8f91d93ad5e6a}{aws\+\_\+hmac\+\_\+finalize}} (struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$hmac, struct \mbox{\hyperlink{structaws__byte__buf}{aws\+\_\+byte\+\_\+buf}} $\ast$\mbox{\hyperlink{log__formatter__test_8c_ae73289c5189c80c0661459b0f4743217}{output}}, size\+\_\+t truncate\+\_\+to)
\item 
int \mbox{\hyperlink{hmac_8c_af87b0d8cfc70baa70921221d074c2e4a}{aws\+\_\+sha256\+\_\+hmac\+\_\+compute}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}}, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$secret, const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$to\+\_\+hmac, struct \mbox{\hyperlink{structaws__byte__buf}{aws\+\_\+byte\+\_\+buf}} $\ast$\mbox{\hyperlink{log__formatter__test_8c_ae73289c5189c80c0661459b0f4743217}{output}}, size\+\_\+t truncate\+\_\+to)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_aab6815d6797ca8ea2d161f4300cee717}{aws\+\_\+hmac\+\_\+new\+\_\+fn}} $\ast$ \mbox{\hyperlink{hmac_8c_aabe683949f1f785d366bd7a2dd0d1241}{s\+\_\+sha256\+\_\+hmac\+\_\+new\+\_\+fn}} = \mbox{\hyperlink{bcrypt__hmac_8c_a2a75179fa3671f67e910908180bbb138}{aws\+\_\+sha256\+\_\+hmac\+\_\+default\+\_\+new}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{hmac_8c_a54d5f607578696985c587286736581da}\label{hmac_8c_a54d5f607578696985c587286736581da}} 
\index{hmac.c@{hmac.c}!aws\_hmac\_destroy@{aws\_hmac\_destroy}}
\index{aws\_hmac\_destroy@{aws\_hmac\_destroy}!hmac.c@{hmac.c}}
\doxysubsubsection{\texorpdfstring{aws\_hmac\_destroy()}{aws\_hmac\_destroy()}}
{\footnotesize\ttfamily void aws\+\_\+hmac\+\_\+destroy (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$}]{hmac }\end{DoxyParamCaption})}

Cleans up and deallocates hmac. \mbox{\Hypertarget{hmac_8c_ab1f3b6bab8bc50cc70e8f91d93ad5e6a}\label{hmac_8c_ab1f3b6bab8bc50cc70e8f91d93ad5e6a}} 
\index{hmac.c@{hmac.c}!aws\_hmac\_finalize@{aws\_hmac\_finalize}}
\index{aws\_hmac\_finalize@{aws\_hmac\_finalize}!hmac.c@{hmac.c}}
\doxysubsubsection{\texorpdfstring{aws\_hmac\_finalize()}{aws\_hmac\_finalize()}}
{\footnotesize\ttfamily int aws\+\_\+hmac\+\_\+finalize (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$}]{hmac,  }\item[{struct \mbox{\hyperlink{structaws__byte__buf}{aws\+\_\+byte\+\_\+buf}} $\ast$}]{output,  }\item[{size\+\_\+t}]{truncate\+\_\+to }\end{DoxyParamCaption})}

Completes the hmac computation and writes the final digest to output. Allocation of output is the caller\textquotesingle{}s responsibility. If you specify truncate\+\_\+to to something other than 0, the output will be truncated to that number of bytes. For example if you want a SHA256 digest as the first 16 bytes, set truncate\+\_\+to to 16. If you want the full digest size, just set this to 0. \mbox{\Hypertarget{hmac_8c_a843ee14b212f355c45ad4fb22df58484}\label{hmac_8c_a843ee14b212f355c45ad4fb22df58484}} 
\index{hmac.c@{hmac.c}!aws\_hmac\_update@{aws\_hmac\_update}}
\index{aws\_hmac\_update@{aws\_hmac\_update}!hmac.c@{hmac.c}}
\doxysubsubsection{\texorpdfstring{aws\_hmac\_update()}{aws\_hmac\_update()}}
{\footnotesize\ttfamily int aws\+\_\+hmac\+\_\+update (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}} $\ast$}]{hmac,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{to\+\_\+hmac }\end{DoxyParamCaption})}

Updates the running hmac with to\+\_\+hash. this can be called multiple times. \mbox{\Hypertarget{hmac_8c_a967b9bd94a7fe04075dac4c407c9cf00}\label{hmac_8c_a967b9bd94a7fe04075dac4c407c9cf00}} 
\index{hmac.c@{hmac.c}!aws\_set\_sha256\_hmac\_new\_fn@{aws\_set\_sha256\_hmac\_new\_fn}}
\index{aws\_set\_sha256\_hmac\_new\_fn@{aws\_set\_sha256\_hmac\_new\_fn}!hmac.c@{hmac.c}}
\doxysubsubsection{\texorpdfstring{aws\_set\_sha256\_hmac\_new\_fn()}{aws\_set\_sha256\_hmac\_new\_fn()}}
{\footnotesize\ttfamily void aws\+\_\+set\+\_\+sha256\+\_\+hmac\+\_\+new\+\_\+fn (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_aab6815d6797ca8ea2d161f4300cee717}{aws\+\_\+hmac\+\_\+new\+\_\+fn}} $\ast$}]{fn }\end{DoxyParamCaption})}

Set the implementation of sha256 hmac to use. If you compiled without AWS\+\_\+\+BYO\+\_\+\+CRYPTO, you do not need to call this. However, if use this, we will honor it, regardless of compile options. This may be useful for testing purposes. If you did set AWS\+\_\+\+BYO\+\_\+\+CRYPTO, and you do not call this function you will segfault. \mbox{\Hypertarget{hmac_8c_af87b0d8cfc70baa70921221d074c2e4a}\label{hmac_8c_af87b0d8cfc70baa70921221d074c2e4a}} 
\index{hmac.c@{hmac.c}!aws\_sha256\_hmac\_compute@{aws\_sha256\_hmac\_compute}}
\index{aws\_sha256\_hmac\_compute@{aws\_sha256\_hmac\_compute}!hmac.c@{hmac.c}}
\doxysubsubsection{\texorpdfstring{aws\_sha256\_hmac\_compute()}{aws\_sha256\_hmac\_compute()}}
{\footnotesize\ttfamily int aws\+\_\+sha256\+\_\+hmac\+\_\+compute (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{secret,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{to\+\_\+hmac,  }\item[{struct \mbox{\hyperlink{structaws__byte__buf}{aws\+\_\+byte\+\_\+buf}} $\ast$}]{output,  }\item[{size\+\_\+t}]{truncate\+\_\+to }\end{DoxyParamCaption})}

Computes the sha256 hmac over input and writes the digest output to \textquotesingle{}output\textquotesingle{}. Use this if you don\textquotesingle{}t need to stream the data you\textquotesingle{}re hashing and you can load the entire input to hash into memory. If you specify truncate\+\_\+to to something other than 0, the output will be truncated to that number of bytes. For example if you want a SHA256 HMAC digest as the first 16 bytes, set truncate\+\_\+to to 16. If you want the full digest size, just set this to 0. \mbox{\Hypertarget{hmac_8c_a2a75179fa3671f67e910908180bbb138}\label{hmac_8c_a2a75179fa3671f67e910908180bbb138}} 
\index{hmac.c@{hmac.c}!aws\_sha256\_hmac\_default\_new@{aws\_sha256\_hmac\_default\_new}}
\index{aws\_sha256\_hmac\_default\_new@{aws\_sha256\_hmac\_default\_new}!hmac.c@{hmac.c}}
\doxysubsubsection{\texorpdfstring{aws\_sha256\_hmac\_default\_new()}{aws\_sha256\_hmac\_default\_new()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}}$\ast$ aws\+\_\+sha256\+\_\+hmac\+\_\+default\+\_\+new (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{secret }\end{DoxyParamCaption})}

Copyright Amazon.\+com, Inc. or its affiliates. All Rights Reserved. SPDX-\/\+License-\/\+Identifier\+: Apache-\/2.\+0. \mbox{\Hypertarget{hmac_8c_abcb9b61391f31ba0c3680fa8e60284df}\label{hmac_8c_abcb9b61391f31ba0c3680fa8e60284df}} 
\index{hmac.c@{hmac.c}!aws\_sha256\_hmac\_new@{aws\_sha256\_hmac\_new}}
\index{aws\_sha256\_hmac\_new@{aws\_sha256\_hmac\_new}!hmac.c@{hmac.c}}
\doxysubsubsection{\texorpdfstring{aws\_sha256\_hmac\_new()}{aws\_sha256\_hmac\_new()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structaws__hmac}{aws\+\_\+hmac}}$\ast$ aws\+\_\+sha256\+\_\+hmac\+\_\+new (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{const struct \mbox{\hyperlink{structaws__byte__cursor}{aws\+\_\+byte\+\_\+cursor}} $\ast$}]{secret }\end{DoxyParamCaption})}

Allocates and initializes a sha256 hmac instance. Secret is the key to be used for the hmac process. 

\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{hmac_8c_aabe683949f1f785d366bd7a2dd0d1241}\label{hmac_8c_aabe683949f1f785d366bd7a2dd0d1241}} 
\index{hmac.c@{hmac.c}!s\_sha256\_hmac\_new\_fn@{s\_sha256\_hmac\_new\_fn}}
\index{s\_sha256\_hmac\_new\_fn@{s\_sha256\_hmac\_new\_fn}!hmac.c@{hmac.c}}
\doxysubsubsection{\texorpdfstring{s\_sha256\_hmac\_new\_fn}{s\_sha256\_hmac\_new\_fn}}
{\footnotesize\ttfamily \mbox{\hyperlink{crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_aab6815d6797ca8ea2d161f4300cee717}{aws\+\_\+hmac\+\_\+new\+\_\+fn}}$\ast$ s\+\_\+sha256\+\_\+hmac\+\_\+new\+\_\+fn = \mbox{\hyperlink{bcrypt__hmac_8c_a2a75179fa3671f67e910908180bbb138}{aws\+\_\+sha256\+\_\+hmac\+\_\+default\+\_\+new}}\hspace{0.3cm}{\ttfamily [static]}}

