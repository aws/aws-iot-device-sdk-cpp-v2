\hypertarget{_secure_tunnel_8h_source}{}\doxysection{Secure\+Tunnel.\+h}
\label{_secure_tunnel_8h_source}\index{secure\_tunneling/include/aws/iotsecuretunneling/SecureTunnel.h@{secure\_tunneling/include/aws/iotsecuretunneling/SecureTunnel.h}}
\mbox{\hyperlink{_secure_tunnel_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <aws/crt/io/Bootstrap.h>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <aws/crt/io/SocketOptions.h>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <aws/iotdevice/secure\_tunneling.h>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{secure__tunneling_2include_2aws_2iotsecuretunneling_2_exports_8h}{aws/iotsecuretunneling/Exports.h}}>}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_aws}{Aws}}}
\DoxyCodeLine{13 \{}
\DoxyCodeLine{14     \textcolor{keyword}{namespace }Iotsecuretunneling}
\DoxyCodeLine{15     \{}
\DoxyCodeLine{16         \textcolor{comment}{// Client callback type definitions}}
\DoxyCodeLine{17         \textcolor{keyword}{using} \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_aa69abe9a918e0d59e1976143ee3b3448}{OnConnectionComplete}} = std::function<void(\textcolor{keywordtype}{void})>;}
\DoxyCodeLine{18         \textcolor{keyword}{using} \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_a1d15b717dfba979b484116dac858e0b8}{OnConnectionShutdown}} = std::function<void(\textcolor{keywordtype}{void})>;}
\DoxyCodeLine{19         \textcolor{keyword}{using} \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_af98d42958061aa035d144e1919e2d7d8}{OnSendDataComplete}} = std::function<void(\textcolor{keywordtype}{int} errorCode)>;}
\DoxyCodeLine{20         \textcolor{keyword}{using} \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_aec68b693857dd6354693d8400bcf36ad}{OnDataReceive}} = std::function<void(\textcolor{keyword}{const} Crt::ByteBuf \&data)>;}
\DoxyCodeLine{21         \textcolor{keyword}{using} \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_a5d1f363f338c4b56322e6350c1cf2480}{OnStreamStart}} = std::function<void()>;}
\DoxyCodeLine{22         \textcolor{keyword}{using} \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_af67046344aa360558c5088f305a45cf2}{OnStreamReset}} = std::function<void(\textcolor{keywordtype}{void})>;}
\DoxyCodeLine{23         \textcolor{keyword}{using} \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_a1e16327a3993362a5cd79d6fb3d7f19d}{OnSessionReset}} = std::function<void(\textcolor{keywordtype}{void})>;}
\DoxyCodeLine{24 }
\DoxyCodeLine{25         \textcolor{keyword}{class }\mbox{\hyperlink{secure__tunneling_2include_2aws_2iotsecuretunneling_2_exports_8h_a66e3e73c52342d65d13175576f5d5da0}{AWS\_IOTSECURETUNNELING\_API}} \mbox{\hyperlink{class_aws_1_1_iotsecuretunneling_1_1_secure_tunnel}{SecureTunnel}} final}
\DoxyCodeLine{26         \{}
\DoxyCodeLine{27           \textcolor{keyword}{public}:}
\DoxyCodeLine{28             \mbox{\hyperlink{class_aws_1_1_iotsecuretunneling_1_1_secure_tunnel}{SecureTunnel}}(}
\DoxyCodeLine{29                 \textcolor{comment}{// Parameters map to aws\_secure\_tunneling\_connection\_config}}
\DoxyCodeLine{30                 Crt::Allocator *allocator,                        \textcolor{comment}{// Should out live this object}}
\DoxyCodeLine{31                 Aws::Crt::Io::ClientBootstrap *clientBootstrap,   \textcolor{comment}{// Should out live this object}}
\DoxyCodeLine{32                 \textcolor{keyword}{const} Aws::Crt::Io::SocketOptions \&socketOptions, \textcolor{comment}{// Make a copy and save in this object}}
\DoxyCodeLine{33 }
\DoxyCodeLine{34                 \textcolor{keyword}{const} std::string \&accessToken, \textcolor{comment}{// Make a copy and save in this object}}
\DoxyCodeLine{35                 aws\_secure\_tunneling\_local\_proxy\_mode localProxyMode,}
\DoxyCodeLine{36                 \textcolor{keyword}{const} std::string \&endpointHost, \textcolor{comment}{// Make a copy and save in this object}}
\DoxyCodeLine{37                 \textcolor{keyword}{const} std::string \&rootCa,       \textcolor{comment}{// Make a copy and save in this object}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39                 \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_aa69abe9a918e0d59e1976143ee3b3448}{OnConnectionComplete}} onConnectionComplete,}
\DoxyCodeLine{40                 \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_a1d15b717dfba979b484116dac858e0b8}{OnConnectionShutdown}} onConnectionShutdown,}
\DoxyCodeLine{41                 \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_af98d42958061aa035d144e1919e2d7d8}{OnSendDataComplete}} onSendDataComplete,}
\DoxyCodeLine{42                 \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_aec68b693857dd6354693d8400bcf36ad}{OnDataReceive}} onDataReceive,}
\DoxyCodeLine{43                 \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_a5d1f363f338c4b56322e6350c1cf2480}{OnStreamStart}} onStreamStart,}
\DoxyCodeLine{44                 \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_af67046344aa360558c5088f305a45cf2}{OnStreamReset}} onStreamReset,}
\DoxyCodeLine{45                 \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_a1e16327a3993362a5cd79d6fb3d7f19d}{OnSessionReset}} onSessionReset);}
\DoxyCodeLine{46             \mbox{\hyperlink{class_aws_1_1_iotsecuretunneling_1_1_secure_tunnel_a38be21e70556a2e8c49c593aa7f597f6}{SecureTunnel}}(\textcolor{keyword}{const} \mbox{\hyperlink{class_aws_1_1_iotsecuretunneling_1_1_secure_tunnel}{SecureTunnel}} \&) = \textcolor{keyword}{delete};}
\DoxyCodeLine{47             \mbox{\hyperlink{class_aws_1_1_iotsecuretunneling_1_1_secure_tunnel}{SecureTunnel}}(\mbox{\hyperlink{class_aws_1_1_iotsecuretunneling_1_1_secure_tunnel}{SecureTunnel}} \&\&) noexcept;}
\DoxyCodeLine{48 }
\DoxyCodeLine{49             virtual \string~\mbox{\hyperlink{class_aws_1_1_iotsecuretunneling_1_1_secure_tunnel}{SecureTunnel}}();}
\DoxyCodeLine{50 }
\DoxyCodeLine{51             \mbox{\hyperlink{class_aws_1_1_iotsecuretunneling_1_1_secure_tunnel}{SecureTunnel}} \&operator=(const \mbox{\hyperlink{class_aws_1_1_iotsecuretunneling_1_1_secure_tunnel}{SecureTunnel}} \&) = delete;}
\DoxyCodeLine{52             \mbox{\hyperlink{class_aws_1_1_iotsecuretunneling_1_1_secure_tunnel}{SecureTunnel}} \&operator=(\mbox{\hyperlink{class_aws_1_1_iotsecuretunneling_1_1_secure_tunnel}{SecureTunnel}} \&\&) noexcept;}
\DoxyCodeLine{53 }
\DoxyCodeLine{54             \textcolor{keywordtype}{int} Connect();}
\DoxyCodeLine{55 }
\DoxyCodeLine{56             \textcolor{keywordtype}{int} Close();}
\DoxyCodeLine{57 }
\DoxyCodeLine{58             \textcolor{keywordtype}{int} SendData(const Crt::ByteCursor \&data);}
\DoxyCodeLine{59 }
\DoxyCodeLine{60             \textcolor{keywordtype}{int} SendStreamStart();}
\DoxyCodeLine{61 }
\DoxyCodeLine{62             \textcolor{keywordtype}{int} SendStreamReset();}
\DoxyCodeLine{63 }
\DoxyCodeLine{64             aws\_secure\_tunnel *GetUnderlyingHandle();}
\DoxyCodeLine{65 }
\DoxyCodeLine{66           private:}
\DoxyCodeLine{67             \textcolor{comment}{// aws-\/c-\/iot callbacks}}
\DoxyCodeLine{68             static \textcolor{keywordtype}{void} \mbox{\hyperlink{_secure_tunnel_test_8cpp_aed977892cf1daa56f3fa98da61e85b50}{s\_OnConnectionComplete}}(\textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{69             static \textcolor{keywordtype}{void} \mbox{\hyperlink{_secure_tunnel_test_8cpp_aeba26137f46633a6653313f80ab2db97}{s\_OnConnectionShutdown}}(\textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{70             static \textcolor{keywordtype}{void} \mbox{\hyperlink{_secure_tunnel_test_8cpp_a2676eda6ee62171f5712858a307a6308}{s\_OnSendDataComplete}}(\textcolor{keywordtype}{int} error\_code, \textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{71             static \textcolor{keywordtype}{void} \mbox{\hyperlink{_secure_tunnel_test_8cpp_a9e42b8b1ba30e59e61da924cb4902628}{s\_OnDataReceive}}(const struct aws\_byte\_buf *data, \textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{72             static \textcolor{keywordtype}{void} \mbox{\hyperlink{_secure_tunnel_test_8cpp_a52e926e0d73c048d49bdafc196dbdd6d}{s\_OnStreamStart}}(\textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{73             static \textcolor{keywordtype}{void} \mbox{\hyperlink{_secure_tunnel_test_8cpp_a9a09c26909cf669a33705118c65df499}{s\_OnStreamReset}}(\textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{74             static \textcolor{keywordtype}{void} \mbox{\hyperlink{_secure_tunnel_test_8cpp_ac541f7b22f61852256d614f1e185ea18}{s\_OnSessionReset}}(\textcolor{keywordtype}{void} *user\_data);}
\DoxyCodeLine{75 }
\DoxyCodeLine{76             \textcolor{comment}{// Client callbacks}}
\DoxyCodeLine{77             \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_aa69abe9a918e0d59e1976143ee3b3448}{OnConnectionComplete}} m\_OnConnectionComplete;}
\DoxyCodeLine{78             \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_a1d15b717dfba979b484116dac858e0b8}{OnConnectionShutdown}} m\_OnConnectionShutdown;}
\DoxyCodeLine{79             \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_af98d42958061aa035d144e1919e2d7d8}{OnSendDataComplete}} m\_OnSendDataComplete;}
\DoxyCodeLine{80             \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_aec68b693857dd6354693d8400bcf36ad}{OnDataReceive}} m\_OnDataReceive;}
\DoxyCodeLine{81             \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_a5d1f363f338c4b56322e6350c1cf2480}{OnStreamStart}} m\_OnStreamStart;}
\DoxyCodeLine{82             \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_af67046344aa360558c5088f305a45cf2}{OnStreamReset}} m\_OnStreamReset;}
\DoxyCodeLine{83             \mbox{\hyperlink{namespace_aws_1_1_iotsecuretunneling_a1e16327a3993362a5cd79d6fb3d7f19d}{OnSessionReset}} m\_OnSessionReset;}
\DoxyCodeLine{84 }
\DoxyCodeLine{85             \mbox{\hyperlink{namespace_aws}{Aws}}::Crt::Io::SocketOptions m\_socketOptions;}
\DoxyCodeLine{86             std::\textcolor{keywordtype}{string} m\_accessToken;}
\DoxyCodeLine{87             std::\textcolor{keywordtype}{string} m\_endpointHost;}
\DoxyCodeLine{88             std::\textcolor{keywordtype}{string} m\_rootCa;}
\DoxyCodeLine{89 }
\DoxyCodeLine{90             aws\_secure\_tunnel *m\_secure\_tunnel;}
\DoxyCodeLine{91         \};}
\DoxyCodeLine{92     \} \textcolor{comment}{// namespace Iotsecuretunneling}}
\DoxyCodeLine{93 \} \textcolor{comment}{// namespace Aws}}

\end{DoxyCode}
