\hypertarget{task__scheduler_8c}{}\doxysection{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/common/source/task\+\_\+scheduler.c File Reference}
\label{task__scheduler_8c}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/common/source/task\_scheduler.c@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/common/source/task\_scheduler.c}}
{\ttfamily \#include $<$aws/common/task\+\_\+scheduler.\+h$>$}\newline
{\ttfamily \#include $<$aws/common/logging.\+h$>$}\newline
{\ttfamily \#include $<$inttypes.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{task__scheduler_8c_add10ddcf7d86b3e6a4f927a34b8cc775}{aws\+\_\+task\+\_\+init}} (struct \mbox{\hyperlink{structaws__task}{aws\+\_\+task}} $\ast$task, \mbox{\hyperlink{task__scheduler_8h_a906b373bb52f20dfe8748e72fd71ba46}{aws\+\_\+task\+\_\+fn}} $\ast$fn, void $\ast$arg, const char $\ast$type\+\_\+tag)
\item 
const char $\ast$ \mbox{\hyperlink{task__scheduler_8c_a34a0fe48ffb4189b4229590982f8d3f6}{aws\+\_\+task\+\_\+status\+\_\+to\+\_\+c\+\_\+str}} (enum \mbox{\hyperlink{task__scheduler_8h_ab115fdd804adabe90197d5ae212d032e}{aws\+\_\+task\+\_\+status}} status)
\item 
void \mbox{\hyperlink{task__scheduler_8c_ac0180158676c52deed2a92486163a250}{aws\+\_\+task\+\_\+run}} (struct \mbox{\hyperlink{structaws__task}{aws\+\_\+task}} $\ast$task, enum \mbox{\hyperlink{task__scheduler_8h_ab115fdd804adabe90197d5ae212d032e}{aws\+\_\+task\+\_\+status}} status)
\item 
static int \mbox{\hyperlink{task__scheduler_8c_a67109d75c8d78bb095ed720a467957a6}{s\+\_\+compare\+\_\+timestamps}} (const void $\ast$a, const void $\ast$\mbox{\hyperlink{aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2external_2c_j_s_o_n_8h_a1a175e87536301df98c805ac0636ad7c}{b}})
\item 
static void \mbox{\hyperlink{task__scheduler_8c_adb9a60575374028bbe76748c1d166b4f}{s\+\_\+run\+\_\+all}} (struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$scheduler, uint64\+\_\+t current\+\_\+time, enum \mbox{\hyperlink{task__scheduler_8h_ab115fdd804adabe90197d5ae212d032e}{aws\+\_\+task\+\_\+status}} status)
\item 
int \mbox{\hyperlink{task__scheduler_8c_a5024e39dfce176d2ef2d7ae98154aea6}{aws\+\_\+task\+\_\+scheduler\+\_\+init}} (struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$scheduler, struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$alloc)
\item 
void \mbox{\hyperlink{task__scheduler_8c_a4d8b58a3579609821ca40b3690e7e3d9}{aws\+\_\+task\+\_\+scheduler\+\_\+clean\+\_\+up}} (struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$scheduler)
\item 
\mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}} \mbox{\hyperlink{task__scheduler_8c_a875becebb7cf5148052529ada828e7c0}{aws\+\_\+task\+\_\+scheduler\+\_\+is\+\_\+valid}} (const struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$scheduler)
\item 
\mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}} \mbox{\hyperlink{task__scheduler_8c_a090286acb2bf733f8c7db92fd5031ee9}{aws\+\_\+task\+\_\+scheduler\+\_\+has\+\_\+tasks}} (const struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$scheduler, uint64\+\_\+t $\ast$next\+\_\+task\+\_\+time)
\item 
void \mbox{\hyperlink{task__scheduler_8c_a87ae63096361ad2f4438cb3c28518e10}{aws\+\_\+task\+\_\+scheduler\+\_\+schedule\+\_\+now}} (struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$scheduler, struct \mbox{\hyperlink{structaws__task}{aws\+\_\+task}} $\ast$task)
\item 
void \mbox{\hyperlink{task__scheduler_8c_a1900bf66187d1da090d5208d1025c4a4}{aws\+\_\+task\+\_\+scheduler\+\_\+schedule\+\_\+future}} (struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$scheduler, struct \mbox{\hyperlink{structaws__task}{aws\+\_\+task}} $\ast$task, uint64\+\_\+t time\+\_\+to\+\_\+run)
\item 
void \mbox{\hyperlink{task__scheduler_8c_a749f6f8555f184727e09368539c86647}{aws\+\_\+task\+\_\+scheduler\+\_\+run\+\_\+all}} (struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$scheduler, uint64\+\_\+t current\+\_\+time)
\item 
void \mbox{\hyperlink{task__scheduler_8c_a2d81d6dca7ad3707e62364b735e16485}{aws\+\_\+task\+\_\+scheduler\+\_\+cancel\+\_\+task}} (struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$scheduler, struct \mbox{\hyperlink{structaws__task}{aws\+\_\+task}} $\ast$task)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static const size\+\_\+t \mbox{\hyperlink{task__scheduler_8c_a95019ef9b0ce04a592c8c184bfafa4a6}{DEFAULT\+\_\+\+QUEUE\+\_\+\+SIZE}} = 7
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{task__scheduler_8c_add10ddcf7d86b3e6a4f927a34b8cc775}\label{task__scheduler_8c_add10ddcf7d86b3e6a4f927a34b8cc775}} 
\index{task\_scheduler.c@{task\_scheduler.c}!aws\_task\_init@{aws\_task\_init}}
\index{aws\_task\_init@{aws\_task\_init}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{aws\_task\_init()}{aws\_task\_init()}}
{\footnotesize\ttfamily void aws\+\_\+task\+\_\+init (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__task}{aws\+\_\+task}} $\ast$}]{task,  }\item[{\mbox{\hyperlink{task__scheduler_8h_a906b373bb52f20dfe8748e72fd71ba46}{aws\+\_\+task\+\_\+fn}} $\ast$}]{fn,  }\item[{void $\ast$}]{arg,  }\item[{const char $\ast$}]{type\+\_\+tag }\end{DoxyParamCaption})}

Init an \mbox{\hyperlink{structaws__task}{aws\+\_\+task}} \mbox{\Hypertarget{task__scheduler_8c_ac0180158676c52deed2a92486163a250}\label{task__scheduler_8c_ac0180158676c52deed2a92486163a250}} 
\index{task\_scheduler.c@{task\_scheduler.c}!aws\_task\_run@{aws\_task\_run}}
\index{aws\_task\_run@{aws\_task\_run}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{aws\_task\_run()}{aws\_task\_run()}}
{\footnotesize\ttfamily void aws\+\_\+task\+\_\+run (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__task}{aws\+\_\+task}} $\ast$}]{task,  }\item[{enum \mbox{\hyperlink{task__scheduler_8h_ab115fdd804adabe90197d5ae212d032e}{aws\+\_\+task\+\_\+status}}}]{status }\end{DoxyParamCaption})}

\mbox{\Hypertarget{task__scheduler_8c_a2d81d6dca7ad3707e62364b735e16485}\label{task__scheduler_8c_a2d81d6dca7ad3707e62364b735e16485}} 
\index{task\_scheduler.c@{task\_scheduler.c}!aws\_task\_scheduler\_cancel\_task@{aws\_task\_scheduler\_cancel\_task}}
\index{aws\_task\_scheduler\_cancel\_task@{aws\_task\_scheduler\_cancel\_task}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{aws\_task\_scheduler\_cancel\_task()}{aws\_task\_scheduler\_cancel\_task()}}
{\footnotesize\ttfamily void aws\+\_\+task\+\_\+scheduler\+\_\+cancel\+\_\+task (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$}]{scheduler,  }\item[{struct \mbox{\hyperlink{structaws__task}{aws\+\_\+task}} $\ast$}]{task }\end{DoxyParamCaption})}

Removes task from the scheduler and invokes the task with the AWS\+\_\+\+TASK\+\_\+\+STATUS\+\_\+\+CANCELED status. \mbox{\Hypertarget{task__scheduler_8c_a4d8b58a3579609821ca40b3690e7e3d9}\label{task__scheduler_8c_a4d8b58a3579609821ca40b3690e7e3d9}} 
\index{task\_scheduler.c@{task\_scheduler.c}!aws\_task\_scheduler\_clean\_up@{aws\_task\_scheduler\_clean\_up}}
\index{aws\_task\_scheduler\_clean\_up@{aws\_task\_scheduler\_clean\_up}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{aws\_task\_scheduler\_clean\_up()}{aws\_task\_scheduler\_clean\_up()}}
{\footnotesize\ttfamily void aws\+\_\+task\+\_\+scheduler\+\_\+clean\+\_\+up (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$}]{scheduler }\end{DoxyParamCaption})}

Empties and executes all queued tasks, passing the AWS\+\_\+\+TASK\+\_\+\+STATUS\+\_\+\+CANCELED status to the task function. Cleans up any memory allocated, and prepares the instance for reuse or deletion. \mbox{\Hypertarget{task__scheduler_8c_a090286acb2bf733f8c7db92fd5031ee9}\label{task__scheduler_8c_a090286acb2bf733f8c7db92fd5031ee9}} 
\index{task\_scheduler.c@{task\_scheduler.c}!aws\_task\_scheduler\_has\_tasks@{aws\_task\_scheduler\_has\_tasks}}
\index{aws\_task\_scheduler\_has\_tasks@{aws\_task\_scheduler\_has\_tasks}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{aws\_task\_scheduler\_has\_tasks()}{aws\_task\_scheduler\_has\_tasks()}}
{\footnotesize\ttfamily \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}} aws\+\_\+task\+\_\+scheduler\+\_\+has\+\_\+tasks (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$}]{scheduler,  }\item[{uint64\+\_\+t $\ast$}]{next\+\_\+task\+\_\+time }\end{DoxyParamCaption})}

Returns whether the scheduler has any scheduled tasks. next\+\_\+task\+\_\+time (optional) will be set to time of the next task, note that 0 will be set if tasks were added via \mbox{\hyperlink{task__scheduler_8h_af829b95fb361631a8ff1b1e3a663a81f}{aws\+\_\+task\+\_\+scheduler\+\_\+schedule\+\_\+now()}} and UINT64\+\_\+\+MAX will be set if no tasks are scheduled at all. \mbox{\Hypertarget{task__scheduler_8c_a5024e39dfce176d2ef2d7ae98154aea6}\label{task__scheduler_8c_a5024e39dfce176d2ef2d7ae98154aea6}} 
\index{task\_scheduler.c@{task\_scheduler.c}!aws\_task\_scheduler\_init@{aws\_task\_scheduler\_init}}
\index{aws\_task\_scheduler\_init@{aws\_task\_scheduler\_init}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{aws\_task\_scheduler\_init()}{aws\_task\_scheduler\_init()}}
{\footnotesize\ttfamily int aws\+\_\+task\+\_\+scheduler\+\_\+init (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$}]{scheduler,  }\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{alloc }\end{DoxyParamCaption})}

Initializes a task scheduler instance. \mbox{\Hypertarget{task__scheduler_8c_a875becebb7cf5148052529ada828e7c0}\label{task__scheduler_8c_a875becebb7cf5148052529ada828e7c0}} 
\index{task\_scheduler.c@{task\_scheduler.c}!aws\_task\_scheduler\_is\_valid@{aws\_task\_scheduler\_is\_valid}}
\index{aws\_task\_scheduler\_is\_valid@{aws\_task\_scheduler\_is\_valid}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{aws\_task\_scheduler\_is\_valid()}{aws\_task\_scheduler\_is\_valid()}}
{\footnotesize\ttfamily \mbox{\hyperlink{preamble_8h_a1062901a7428fdd9c7f180f5e01ea056}{bool}} aws\+\_\+task\+\_\+scheduler\+\_\+is\+\_\+valid (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$}]{scheduler }\end{DoxyParamCaption})}

\mbox{\Hypertarget{task__scheduler_8c_a749f6f8555f184727e09368539c86647}\label{task__scheduler_8c_a749f6f8555f184727e09368539c86647}} 
\index{task\_scheduler.c@{task\_scheduler.c}!aws\_task\_scheduler\_run\_all@{aws\_task\_scheduler\_run\_all}}
\index{aws\_task\_scheduler\_run\_all@{aws\_task\_scheduler\_run\_all}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{aws\_task\_scheduler\_run\_all()}{aws\_task\_scheduler\_run\_all()}}
{\footnotesize\ttfamily void aws\+\_\+task\+\_\+scheduler\+\_\+run\+\_\+all (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$}]{scheduler,  }\item[{uint64\+\_\+t}]{current\+\_\+time }\end{DoxyParamCaption})}

Sequentially execute all tasks scheduled to run at, or before current\+\_\+time. AWS\+\_\+\+TASK\+\_\+\+STATUS\+\_\+\+RUN\+\_\+\+READY will be passed to the task function as the task status.

If a task schedules another task, the new task will not be executed until the next call to this function. \mbox{\Hypertarget{task__scheduler_8c_a1900bf66187d1da090d5208d1025c4a4}\label{task__scheduler_8c_a1900bf66187d1da090d5208d1025c4a4}} 
\index{task\_scheduler.c@{task\_scheduler.c}!aws\_task\_scheduler\_schedule\_future@{aws\_task\_scheduler\_schedule\_future}}
\index{aws\_task\_scheduler\_schedule\_future@{aws\_task\_scheduler\_schedule\_future}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{aws\_task\_scheduler\_schedule\_future()}{aws\_task\_scheduler\_schedule\_future()}}
{\footnotesize\ttfamily void aws\+\_\+task\+\_\+scheduler\+\_\+schedule\+\_\+future (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$}]{scheduler,  }\item[{struct \mbox{\hyperlink{structaws__task}{aws\+\_\+task}} $\ast$}]{task,  }\item[{uint64\+\_\+t}]{time\+\_\+to\+\_\+run }\end{DoxyParamCaption})}

Schedules a task to run at time\+\_\+to\+\_\+run. The task should not be cleaned up or modified until its function is executed. \mbox{\Hypertarget{task__scheduler_8c_a87ae63096361ad2f4438cb3c28518e10}\label{task__scheduler_8c_a87ae63096361ad2f4438cb3c28518e10}} 
\index{task\_scheduler.c@{task\_scheduler.c}!aws\_task\_scheduler\_schedule\_now@{aws\_task\_scheduler\_schedule\_now}}
\index{aws\_task\_scheduler\_schedule\_now@{aws\_task\_scheduler\_schedule\_now}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{aws\_task\_scheduler\_schedule\_now()}{aws\_task\_scheduler\_schedule\_now()}}
{\footnotesize\ttfamily void aws\+\_\+task\+\_\+scheduler\+\_\+schedule\+\_\+now (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$}]{scheduler,  }\item[{struct \mbox{\hyperlink{structaws__task}{aws\+\_\+task}} $\ast$}]{task }\end{DoxyParamCaption})}

Schedules a task to run immediately. The task should not be cleaned up or modified until its function is executed. \mbox{\Hypertarget{task__scheduler_8c_a34a0fe48ffb4189b4229590982f8d3f6}\label{task__scheduler_8c_a34a0fe48ffb4189b4229590982f8d3f6}} 
\index{task\_scheduler.c@{task\_scheduler.c}!aws\_task\_status\_to\_c\_str@{aws\_task\_status\_to\_c\_str}}
\index{aws\_task\_status\_to\_c\_str@{aws\_task\_status\_to\_c\_str}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{aws\_task\_status\_to\_c\_str()}{aws\_task\_status\_to\_c\_str()}}
{\footnotesize\ttfamily const char$\ast$ aws\+\_\+task\+\_\+status\+\_\+to\+\_\+c\+\_\+str (\begin{DoxyParamCaption}\item[{enum \mbox{\hyperlink{task__scheduler_8h_ab115fdd804adabe90197d5ae212d032e}{aws\+\_\+task\+\_\+status}}}]{status }\end{DoxyParamCaption})}

Convert a status value to a c-\/string suitable for logging \mbox{\Hypertarget{task__scheduler_8c_a67109d75c8d78bb095ed720a467957a6}\label{task__scheduler_8c_a67109d75c8d78bb095ed720a467957a6}} 
\index{task\_scheduler.c@{task\_scheduler.c}!s\_compare\_timestamps@{s\_compare\_timestamps}}
\index{s\_compare\_timestamps@{s\_compare\_timestamps}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{s\_compare\_timestamps()}{s\_compare\_timestamps()}}
{\footnotesize\ttfamily static int s\+\_\+compare\+\_\+timestamps (\begin{DoxyParamCaption}\item[{const void $\ast$}]{a,  }\item[{const void $\ast$}]{b }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{task__scheduler_8c_adb9a60575374028bbe76748c1d166b4f}\label{task__scheduler_8c_adb9a60575374028bbe76748c1d166b4f}} 
\index{task\_scheduler.c@{task\_scheduler.c}!s\_run\_all@{s\_run\_all}}
\index{s\_run\_all@{s\_run\_all}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{s\_run\_all()}{s\_run\_all()}}
{\footnotesize\ttfamily static void s\+\_\+run\+\_\+all (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__task__scheduler}{aws\+\_\+task\+\_\+scheduler}} $\ast$}]{scheduler,  }\item[{uint64\+\_\+t}]{current\+\_\+time,  }\item[{enum \mbox{\hyperlink{task__scheduler_8h_ab115fdd804adabe90197d5ae212d032e}{aws\+\_\+task\+\_\+status}}}]{status }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{task__scheduler_8c_a95019ef9b0ce04a592c8c184bfafa4a6}\label{task__scheduler_8c_a95019ef9b0ce04a592c8c184bfafa4a6}} 
\index{task\_scheduler.c@{task\_scheduler.c}!DEFAULT\_QUEUE\_SIZE@{DEFAULT\_QUEUE\_SIZE}}
\index{DEFAULT\_QUEUE\_SIZE@{DEFAULT\_QUEUE\_SIZE}!task\_scheduler.c@{task\_scheduler.c}}
\doxysubsubsection{\texorpdfstring{DEFAULT\_QUEUE\_SIZE}{DEFAULT\_QUEUE\_SIZE}}
{\footnotesize\ttfamily const size\+\_\+t DEFAULT\+\_\+\+QUEUE\+\_\+\+SIZE = 7\hspace{0.3cm}{\ttfamily [static]}}

Copyright Amazon.\+com, Inc. or its affiliates. All Rights Reserved. SPDX-\/\+License-\/\+Identifier\+: Apache-\/2.\+0. 