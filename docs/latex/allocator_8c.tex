\hypertarget{allocator_8c}{}\doxysection{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/common/source/allocator.c File Reference}
\label{allocator_8c}\index{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/common/source/allocator.c@{crt/aws-\/crt-\/cpp/crt/aws-\/c-\/common/source/allocator.c}}
{\ttfamily \#include $<$aws/common/assert.\+h$>$}\newline
{\ttfamily \#include $<$aws/common/common.\+h$>$}\newline
{\ttfamily \#include $<$aws/common/logging.\+h$>$}\newline
{\ttfamily \#include $<$aws/common/math.\+h$>$}\newline
{\ttfamily \#include $<$stdarg.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{allocator_8c_a7d467c1d283fdfa1f2081ba1e0d01b6e}{PAGE\+\_\+\+SIZE}}~(4 $\ast$ 1024)
\item 
\#define \mbox{\hyperlink{allocator_8c_a2018652bc4666fe36748e88f3ce3a001}{AWS\+\_\+\+ALIGN\+\_\+\+ROUND\+\_\+\+UP}}(value,  alignment)~(((value) + ((alignment)-\/1)) \& $\sim$((alignment)-\/1))
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{allocator_8c_aff8b14190e01cf699a1fb9024ec5e77c}{aws\+\_\+allocator\+\_\+is\+\_\+valid}} (const struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$alloc)
\item 
static void $\ast$ \mbox{\hyperlink{allocator_8c_a8c974a7c1bdb0a707553d66cb2b2a774}{s\+\_\+default\+\_\+malloc}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, size\+\_\+t size)
\item 
static void \mbox{\hyperlink{allocator_8c_a5cfb748970512aba8bd0722c37417ef9}{s\+\_\+default\+\_\+free}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, void $\ast$ptr)
\item 
static void $\ast$ \mbox{\hyperlink{allocator_8c_a03d785266a55316e6add16d1d00be751}{s\+\_\+default\+\_\+realloc}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, void $\ast$ptr, size\+\_\+t oldsize, size\+\_\+t newsize)
\item 
static void $\ast$ \mbox{\hyperlink{allocator_8c_a499c8ea13e34f3bdcb71d492e820a921}{s\+\_\+default\+\_\+calloc}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, size\+\_\+t num, size\+\_\+t size)
\item 
struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$ \mbox{\hyperlink{allocator_8c_ae175562e638c465c9a9641028f73fc4c}{aws\+\_\+default\+\_\+allocator}} (void)
\item 
void $\ast$ \mbox{\hyperlink{allocator_8c_a128d6f252b6e3784caf47005033ee2c7}{aws\+\_\+mem\+\_\+acquire}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, size\+\_\+t size)
\item 
void $\ast$ \mbox{\hyperlink{allocator_8c_abfff75642e6495447bed6ed9054fc11f}{aws\+\_\+mem\+\_\+calloc}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, size\+\_\+t num, size\+\_\+t size)
\item 
void $\ast$ \mbox{\hyperlink{allocator_8c_a60bb853519cb92f1baeef9d8ad4f72f1}{aws\+\_\+mem\+\_\+acquire\+\_\+many}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, size\+\_\+t \mbox{\hyperlink{aws-crt-cpp_2crt_2aws-c-auth_2include_2aws_2auth_2external_2c_j_s_o_n_8h_ad43c3812e6d13e0518d9f8b8f463ffcf}{count}},...)
\item 
void \mbox{\hyperlink{allocator_8c_ac655f22debddaf1b9d18935aee2cfafe}{aws\+\_\+mem\+\_\+release}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, void $\ast$ptr)
\item 
int \mbox{\hyperlink{allocator_8c_aac151e9c85ddb43fdce0acd676c22fbf}{aws\+\_\+mem\+\_\+realloc}} (struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$allocator, void $\ast$$\ast$ptr, size\+\_\+t oldsize, size\+\_\+t newsize)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} \mbox{\hyperlink{allocator_8c_ab921c719c35c9d3729086b6f6fd2abb0}{default\+\_\+allocator}}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{allocator_8c_a2018652bc4666fe36748e88f3ce3a001}\label{allocator_8c_a2018652bc4666fe36748e88f3ce3a001}} 
\index{allocator.c@{allocator.c}!AWS\_ALIGN\_ROUND\_UP@{AWS\_ALIGN\_ROUND\_UP}}
\index{AWS\_ALIGN\_ROUND\_UP@{AWS\_ALIGN\_ROUND\_UP}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{AWS\_ALIGN\_ROUND\_UP}{AWS\_ALIGN\_ROUND\_UP}}
{\footnotesize\ttfamily \#define AWS\+\_\+\+ALIGN\+\_\+\+ROUND\+\_\+\+UP(\begin{DoxyParamCaption}\item[{}]{value,  }\item[{}]{alignment }\end{DoxyParamCaption})~(((value) + ((alignment)-\/1)) \& $\sim$((alignment)-\/1))}

\mbox{\Hypertarget{allocator_8c_a7d467c1d283fdfa1f2081ba1e0d01b6e}\label{allocator_8c_a7d467c1d283fdfa1f2081ba1e0d01b6e}} 
\index{allocator.c@{allocator.c}!PAGE\_SIZE@{PAGE\_SIZE}}
\index{PAGE\_SIZE@{PAGE\_SIZE}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{PAGE\_SIZE}{PAGE\_SIZE}}
{\footnotesize\ttfamily \#define PAGE\+\_\+\+SIZE~(4 $\ast$ 1024)}

Copyright Amazon.\+com, Inc. or its affiliates. All Rights Reserved. SPDX-\/\+License-\/\+Identifier\+: Apache-\/2.\+0. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{allocator_8c_aff8b14190e01cf699a1fb9024ec5e77c}\label{allocator_8c_aff8b14190e01cf699a1fb9024ec5e77c}} 
\index{allocator.c@{allocator.c}!aws\_allocator\_is\_valid@{aws\_allocator\_is\_valid}}
\index{aws\_allocator\_is\_valid@{aws\_allocator\_is\_valid}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{aws\_allocator\_is\_valid()}{aws\_allocator\_is\_valid()}}
{\footnotesize\ttfamily bool aws\+\_\+allocator\+\_\+is\+\_\+valid (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{alloc }\end{DoxyParamCaption})}

Inexpensive (constant time) check of data-\/structure invariants. \mbox{\Hypertarget{allocator_8c_ae175562e638c465c9a9641028f73fc4c}\label{allocator_8c_ae175562e638c465c9a9641028f73fc4c}} 
\index{allocator.c@{allocator.c}!aws\_default\_allocator@{aws\_default\_allocator}}
\index{aws\_default\_allocator@{aws\_default\_allocator}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{aws\_default\_allocator()}{aws\_default\_allocator()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}}$\ast$ aws\+\_\+default\+\_\+allocator (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{allocator_8c_a128d6f252b6e3784caf47005033ee2c7}\label{allocator_8c_a128d6f252b6e3784caf47005033ee2c7}} 
\index{allocator.c@{allocator.c}!aws\_mem\_acquire@{aws\_mem\_acquire}}
\index{aws\_mem\_acquire@{aws\_mem\_acquire}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{aws\_mem\_acquire()}{aws\_mem\_acquire()}}
{\footnotesize\ttfamily void$\ast$ aws\+\_\+mem\+\_\+acquire (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}

Returns at least {\ttfamily size} of memory ready for usage or returns NULL on failure. \mbox{\Hypertarget{allocator_8c_a60bb853519cb92f1baeef9d8ad4f72f1}\label{allocator_8c_a60bb853519cb92f1baeef9d8ad4f72f1}} 
\index{allocator.c@{allocator.c}!aws\_mem\_acquire\_many@{aws\_mem\_acquire\_many}}
\index{aws\_mem\_acquire\_many@{aws\_mem\_acquire\_many}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{aws\_mem\_acquire\_many()}{aws\_mem\_acquire\_many()}}
{\footnotesize\ttfamily void$\ast$ aws\+\_\+mem\+\_\+acquire\+\_\+many (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{size\+\_\+t}]{count,  }\item[{}]{... }\end{DoxyParamCaption})}

Allocates many chunks of bytes into a single block. Expects to be called with alternating void $\ast$$\ast$ (dest), size\+\_\+t (size). The first void $\ast$$\ast$ will be set to the root of the allocation. Alignment is assumed to be sizeof(intmax\+\_\+t).

This is useful for allocating structs using the pimpl pattern, as you may allocate the public object and impl object in the same contiguous block of memory.

Returns a pointer to the allocation. \mbox{\Hypertarget{allocator_8c_abfff75642e6495447bed6ed9054fc11f}\label{allocator_8c_abfff75642e6495447bed6ed9054fc11f}} 
\index{allocator.c@{allocator.c}!aws\_mem\_calloc@{aws\_mem\_calloc}}
\index{aws\_mem\_calloc@{aws\_mem\_calloc}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{aws\_mem\_calloc()}{aws\_mem\_calloc()}}
{\footnotesize\ttfamily void$\ast$ aws\+\_\+mem\+\_\+calloc (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{size\+\_\+t}]{num,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}

Allocates a block of memory for an array of num elements, each of them size bytes long, and initializes all its bits to zero. Returns null on failure. \mbox{\Hypertarget{allocator_8c_aac151e9c85ddb43fdce0acd676c22fbf}\label{allocator_8c_aac151e9c85ddb43fdce0acd676c22fbf}} 
\index{allocator.c@{allocator.c}!aws\_mem\_realloc@{aws\_mem\_realloc}}
\index{aws\_mem\_realloc@{aws\_mem\_realloc}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{aws\_mem\_realloc()}{aws\_mem\_realloc()}}
{\footnotesize\ttfamily int aws\+\_\+mem\+\_\+realloc (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{void $\ast$$\ast$}]{ptr,  }\item[{size\+\_\+t}]{oldsize,  }\item[{size\+\_\+t}]{newsize }\end{DoxyParamCaption})}

\mbox{\Hypertarget{allocator_8c_ac655f22debddaf1b9d18935aee2cfafe}\label{allocator_8c_ac655f22debddaf1b9d18935aee2cfafe}} 
\index{allocator.c@{allocator.c}!aws\_mem\_release@{aws\_mem\_release}}
\index{aws\_mem\_release@{aws\_mem\_release}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{aws\_mem\_release()}{aws\_mem\_release()}}
{\footnotesize\ttfamily void aws\+\_\+mem\+\_\+release (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{void $\ast$}]{ptr }\end{DoxyParamCaption})}

Releases ptr back to whatever allocated it. Nothing happens if ptr is NULL. \mbox{\Hypertarget{allocator_8c_a499c8ea13e34f3bdcb71d492e820a921}\label{allocator_8c_a499c8ea13e34f3bdcb71d492e820a921}} 
\index{allocator.c@{allocator.c}!s\_default\_calloc@{s\_default\_calloc}}
\index{s\_default\_calloc@{s\_default\_calloc}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{s\_default\_calloc()}{s\_default\_calloc()}}
{\footnotesize\ttfamily static void$\ast$ s\+\_\+default\+\_\+calloc (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{size\+\_\+t}]{num,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{allocator_8c_a5cfb748970512aba8bd0722c37417ef9}\label{allocator_8c_a5cfb748970512aba8bd0722c37417ef9}} 
\index{allocator.c@{allocator.c}!s\_default\_free@{s\_default\_free}}
\index{s\_default\_free@{s\_default\_free}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{s\_default\_free()}{s\_default\_free()}}
{\footnotesize\ttfamily static void s\+\_\+default\+\_\+free (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{void $\ast$}]{ptr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{allocator_8c_a8c974a7c1bdb0a707553d66cb2b2a774}\label{allocator_8c_a8c974a7c1bdb0a707553d66cb2b2a774}} 
\index{allocator.c@{allocator.c}!s\_default\_malloc@{s\_default\_malloc}}
\index{s\_default\_malloc@{s\_default\_malloc}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{s\_default\_malloc()}{s\_default\_malloc()}}
{\footnotesize\ttfamily static void$\ast$ s\+\_\+default\+\_\+malloc (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{allocator_8c_a03d785266a55316e6add16d1d00be751}\label{allocator_8c_a03d785266a55316e6add16d1d00be751}} 
\index{allocator.c@{allocator.c}!s\_default\_realloc@{s\_default\_realloc}}
\index{s\_default\_realloc@{s\_default\_realloc}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{s\_default\_realloc()}{s\_default\_realloc()}}
{\footnotesize\ttfamily static void$\ast$ s\+\_\+default\+\_\+realloc (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} $\ast$}]{allocator,  }\item[{void $\ast$}]{ptr,  }\item[{size\+\_\+t}]{oldsize,  }\item[{size\+\_\+t}]{newsize }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{allocator_8c_ab921c719c35c9d3729086b6f6fd2abb0}\label{allocator_8c_ab921c719c35c9d3729086b6f6fd2abb0}} 
\index{allocator.c@{allocator.c}!default\_allocator@{default\_allocator}}
\index{default\_allocator@{default\_allocator}!allocator.c@{allocator.c}}
\doxysubsubsection{\texorpdfstring{default\_allocator}{default\_allocator}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structaws__allocator}{aws\+\_\+allocator}} default\+\_\+allocator\hspace{0.3cm}{\ttfamily [static]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{= \{}
\DoxyCodeLine{    .mem\_acquire = \mbox{\hyperlink{allocator_8c_a8c974a7c1bdb0a707553d66cb2b2a774}{s\_default\_malloc}},}
\DoxyCodeLine{    .mem\_release = \mbox{\hyperlink{allocator_8c_a5cfb748970512aba8bd0722c37417ef9}{s\_default\_free}},}
\DoxyCodeLine{    .mem\_realloc = \mbox{\hyperlink{allocator_8c_a03d785266a55316e6add16d1d00be751}{s\_default\_realloc}},}
\DoxyCodeLine{    .mem\_calloc = \mbox{\hyperlink{allocator_8c_a499c8ea13e34f3bdcb71d492e820a921}{s\_default\_calloc}},}
\DoxyCodeLine{\}}

\end{DoxyCode}
