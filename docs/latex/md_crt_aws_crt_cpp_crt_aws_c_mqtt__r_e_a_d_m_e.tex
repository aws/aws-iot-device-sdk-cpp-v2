C99 implementation of the MQTT 3.\+1.\+1 specification.\hypertarget{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md305}{}\doxysection{License}\label{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md305}
This library is licensed under the Apache 2.\+0 License.\hypertarget{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md306}{}\doxysection{Usage}\label{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md306}
\hypertarget{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md307}{}\doxysubsection{Building}\label{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md307}
\hypertarget{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md308}{}\doxysubsubsection{Building s2n (\+Linux Only)}\label{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md308}
If you are building on Linux, you will need to build s2n before being able to build aws-\/c-\/io, which is a dependency of aws-\/c-\/mqtt. For our CRT\textquotesingle{}s, we build s2n at a specific commit, and recommend doing the same when using it with this library. That commit hash can be found \href{https://github.com/awslabs/aws-crt-cpp/tree/main/aws-common-runtime}{\texttt{ here}}. The commands below will build s2n using Open\+SSL 1.\+1.\+1. For using other versions of Open\+SSL, there is additional information in the \href{https://github.com/awslabs/s2n/blob/main/docs/USAGE-GUIDE.md}{\texttt{ s2n Usage Guide}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{git clone git@github.com:awslabs/s2n.git}
\DoxyCodeLine{cd s2n}
\DoxyCodeLine{git checkout <s2n-\/commit-\/hash-\/used-\/by-\/aws-\/crt-\/cpp>}
\DoxyCodeLine{}
\DoxyCodeLine{\# We keep the build artifacts in the -\/build directory}
\DoxyCodeLine{cd libcrypto-\/build}
\DoxyCodeLine{}
\DoxyCodeLine{\# Download the latest version of OpenSSL}
\DoxyCodeLine{curl -\/LO https://www.openssl.org/source/openssl-\/1.1.1-\/latest.tar.gz}
\DoxyCodeLine{tar -\/xzvf openssl-\/1.1.1-\/latest.tar.gz}
\DoxyCodeLine{}
\DoxyCodeLine{\# Build openssl libcrypto.  Note that the install path specified here must be absolute.}
\DoxyCodeLine{cd `tar ztf openssl-\/1.1.1-\/latest.tar.gz | head -\/n1 | cut -\/f1 -\/d/`}
\DoxyCodeLine{./config -\/fPIC no-\/shared              \(\backslash\)}
\DoxyCodeLine{         no-\/md2 no-\/rc5 no-\/rfc3779 no-\/sctp no-\/ssl-\/trace no-\/zlib     \(\backslash\)}
\DoxyCodeLine{         no-\/hw no-\/mdc2 no-\/seed no-\/idea enable-\/ec\_nistp\_64\_gcc\_128 no-\/camellia\(\backslash\)}
\DoxyCodeLine{         no-\/bf no-\/ripemd no-\/dsa no-\/ssl2 no-\/ssl3 no-\/capieng                  \(\backslash\)}
\DoxyCodeLine{         -\/DSSL\_FORBID\_ENULL -\/DOPENSSL\_NO\_DTLS1 -\/DOPENSSL\_NO\_HEARTBEATS      \(\backslash\)}
\DoxyCodeLine{         -\/-\/prefix=<absolute-\/install-\/path>}
\DoxyCodeLine{make}
\DoxyCodeLine{make install}
\DoxyCodeLine{}
\DoxyCodeLine{\# Build s2n}
\DoxyCodeLine{cd ../../../}
\DoxyCodeLine{cmake -\/DCMAKE\_PREFIX\_PATH=<install-\/path> -\/DCMAKE\_INSTALL\_PREFIX=<install-\/path> -\/S s2n -\/B s2n/build}
\DoxyCodeLine{cmake -\/-\/build s2n/build -\/-\/target install}

\end{DoxyCode}
\hypertarget{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md309}{}\doxysubsubsection{Building aws-\/c-\/mqtt and Remaining Dependencies}\label{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md309}
Note that aws-\/c-\/mqtt has several dependencies that need to be built.


\begin{DoxyCode}{0}
\DoxyCodeLine{git clone git@github.com:awslabs/aws-\/c-\/common.git}
\DoxyCodeLine{cmake -\/DCMAKE\_PREFIX\_PATH=<install-\/path> -\/DCMAKE\_INSTALL\_PREFIX=<install-\/path> -\/S aws-\/c-\/common -\/B aws-\/c-\/common/build}
\DoxyCodeLine{cmake -\/-\/build aws-\/c-\/common/build -\/-\/target install}
\DoxyCodeLine{}
\DoxyCodeLine{git clone git@github.com:awslabs/aws-\/c-\/io.git}
\DoxyCodeLine{cmake -\/DCMAKE\_PREFIX\_PATH=<install-\/path> -\/DCMAKE\_INSTALL\_PREFIX=<install-\/path> -\/S aws-\/c-\/io -\/B aws-\/c-\/io/build}
\DoxyCodeLine{cmake -\/-\/build aws-\/c-\/io/build -\/-\/target install}
\DoxyCodeLine{}
\DoxyCodeLine{git clone git@github.com:awslabs/aws-\/c-\/compression.git}
\DoxyCodeLine{cmake -\/DCMAKE\_PREFIX\_PATH=<install-\/path> -\/DCMAKE\_INSTALL\_PREFIX=<install-\/path> -\/S aws-\/c-\/compression -\/B aws-\/c-\/compression/build}
\DoxyCodeLine{cmake -\/-\/build aws-\/c-\/compression/build -\/-\/target install}
\DoxyCodeLine{}
\DoxyCodeLine{git clone git@github.com:awslabs/aws-\/c-\/http.git}
\DoxyCodeLine{cmake -\/DCMAKE\_PREFIX\_PATH=<install-\/path> -\/DCMAKE\_INSTALL\_PREFIX=<install-\/path> -\/S aws-\/c-\/http -\/B aws-\/c-\/http/build}
\DoxyCodeLine{cmake -\/-\/build aws-\/c-\/http/build -\/-\/target install}
\DoxyCodeLine{}
\DoxyCodeLine{git clone git@github.com:awslabs/aws-\/c-\/mqtt.git}
\DoxyCodeLine{cmake -\/DCMAKE\_PREFIX\_PATH=<install-\/path> -\/DCMAKE\_INSTALL\_PREFIX=<install-\/path> -\/S aws-\/c-\/mqtt -\/B aws-\/c-\/mqtt/build}
\DoxyCodeLine{cmake -\/-\/build aws-\/c-\/mqtt/build -\/-\/target install}

\end{DoxyCode}
\hypertarget{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md310}{}\doxysubsection{Overview}\label{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md310}
This library contains an MQTT implementation that is simple and easy to use, but also quite powerful and low on unnecessary copies. Here is a general overview of the API\+:\hypertarget{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md311}{}\doxysubsection{$<$tt$>$struct aws\+\_\+mqtt\+\_\+client;$<$/tt$>$}\label{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md311}
{\ttfamily \mbox{\hyperlink{structaws__mqtt__client}{aws\+\_\+mqtt\+\_\+client}}} is meant to be created once per application to pool common resources required for opening MQTT connections. The instance does not need to be allocated, and may be managed by the user.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int} aws\_mqtt\_client\_init(}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client}{aws\_mqtt\_client}} *client,}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__allocator}{aws\_allocator}} *\mbox{\hyperlink{socket__test_8c_a130cc941753892421e3f70bdee1049d1}{allocator}},}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__event__loop__group}{aws\_event\_loop\_group}} *elg);}

\end{DoxyCode}
 Initializes an instance of {\ttfamily \mbox{\hyperlink{structaws__mqtt__client}{aws\+\_\+mqtt\+\_\+client}}} with the required parameters.
\begin{DoxyItemize}
\item {\ttfamily client} is effectively the {\ttfamily this} parameter.
\item {\ttfamily allocator} will be used to initialize the client (note that the client itself is NOT allocated). {\itshape This resource must outlive {\ttfamily client}}.
\item {\ttfamily bootstrap} will be used to initiate new socket connections MQTT. {\itshape This resource must outlive {\ttfamily client}}. See \href{https://github.com/awslabs/aws-c-io}{\texttt{ aws-\/c-\/io}} for more information about {\ttfamily \mbox{\hyperlink{structaws__client__bootstrap}{aws\+\_\+client\+\_\+bootstrap}}}.
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void} aws\_mqtt\_client\_clean\_up(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client}{aws\_mqtt\_client}} *client);}

\end{DoxyCode}
 Cleans up a client and frees all owned resources.

{\bfseries{NOTE}}\+: DO NOT CALL THIS FUNCTION UNTIL ALL OUTSTANDING CONNECTIONS ARE CLOSED.\hypertarget{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md312}{}\doxysubsection{$<$tt$>$struct aws\+\_\+mqtt\+\_\+client\+\_\+connection;$<$/tt$>$}\label{md_crt_aws_crt_cpp_crt_aws_c_mqtt__r_e_a_d_m_e_autotoc_md312}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{struct }\mbox{\hyperlink{structaws__mqtt__client__connection}{aws\_mqtt\_client\_connection}} *\mbox{\hyperlink{client_8h_a74d960a25b25e4a270984406990700b0}{aws\_mqtt\_client\_connection\_new}}(}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client}{aws\_mqtt\_client}} *\mbox{\hyperlink{structaws__mqtt__client__connection_a3f549d2ea074f1cc3eef29a54d8d83fa}{client}},}
\DoxyCodeLine{    \textcolor{keyword}{struct} aws\_mqtt\_client\_connection\_callbacks callbacks,}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *\mbox{\hyperlink{structaws__mqtt__client__connection_a6b8e1f35069a9faeea6c881488ab1027}{host\_name}},}
\DoxyCodeLine{    uint16\_t \mbox{\hyperlink{structaws__mqtt__client__connection_a097c9141cfe4aba7957dcadc0184d2ff}{port}},}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__socket__options}{aws\_socket\_options}} *\mbox{\hyperlink{structaws__mqtt__client__connection_a62b983e2f4541b7c17c8b067b49d916d}{socket\_options}},}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__tls__ctx__options}{aws\_tls\_ctx\_options}} *\mbox{\hyperlink{structaws__mqtt__client__connection_aa57d70413a56ea7af5013e2e5db62512}{tls\_options}});}

\end{DoxyCode}
 Allocates and initializes a new connection object (does NOT actually connect). You may use the returned object to configure connection parameters, and then call {\ttfamily aws\+\_\+mqtt\+\_\+client\+\_\+connection\+\_\+connect} to actually open the connection.
\begin{DoxyItemize}
\item {\ttfamily client} is required in order to use an existing DNS resolver, event loop group, and allocator.
\item {\ttfamily callbacks} provides the connection-\/level (not operation level) callbacks and the userdata to be given back.
\item {\ttfamily host\+\_\+name} lists the end point to connect to. This may be a DNS address or an IP address. {\itshape This resource may be freed immediately after return.}
\item {\ttfamily port} the port to connect to on {\ttfamily host\+\_\+name}.
\item {\ttfamily socket\+\_\+options} describes how to open the connection. See \href{https://github.com/awslabs/aws-c-io}{\texttt{ aws-\/c-\/io}} for more information about {\ttfamily \mbox{\hyperlink{structaws__socket__options}{aws\+\_\+socket\+\_\+options}}}.
\item {\ttfamily tls\+\_\+options} provides TLS credentials to connect with. Pass {\ttfamily NULL} to not use TLS ({\bfseries{NOT RECOMMENDED}}). See \href{https://github.com/awslabs/aws-c-io}{\texttt{ aws-\/c-\/io}} for more information about {\ttfamily \mbox{\hyperlink{structaws__tls__ctx__options}{aws\+\_\+tls\+\_\+ctx\+\_\+options}}}.
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void} aws\_mqtt\_client\_connection\_destroy(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client__connection}{aws\_mqtt\_client\_connection}} *connection);}

\end{DoxyCode}
 Destroys a connection and frees all outstanding resources.

{\bfseries{NOTE}}\+: DO NOT CALL THIS FUNCTION UNTIL THE CONNECTION IS CLOSED.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int} \mbox{\hyperlink{client_8h_a62b3d8c85a2613fa1051b1c80b884cad}{aws\_mqtt\_client\_connection\_set\_will}}(}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client__connection}{aws\_mqtt\_client\_connection}} *connection,}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *\mbox{\hyperlink{connection__state__test_8c_ad99baabff61442b2d602f6dd84310f89}{topic}},}
\DoxyCodeLine{    \textcolor{keyword}{enum} \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\_mqtt\_qos}} \mbox{\hyperlink{connection__state__test_8c_a65ee2b4b16f25052c441ff9959dcc7e7}{qos}},}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} \mbox{\hyperlink{structaws__mqtt__client__connection_a0a9b0439fd195534e3f95f4c216e7711}{retain}},}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *\mbox{\hyperlink{event__stream__rpc__server__connection__test_8c_ad1560a388c937f36f038c683175d82bf}{payload}});}

\end{DoxyCode}
 Sets the last will and testament to be distributed by the server upon client disconnection. Must be called before {\ttfamily aws\+\_\+mqtt\+\_\+client\+\_\+connection\+\_\+connect}. See {\ttfamily aws\+\_\+mqtt\+\_\+client\+\_\+connection\+\_\+publish} for information on the parameters. {\ttfamily topic} and {\ttfamily payload} must persist past the call to {\ttfamily aws\+\_\+mqtt\+\_\+client\+\_\+connection\+\_\+connect}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int} \mbox{\hyperlink{client_8h_a9334da6046ba4c7c54bc9d102f1159da}{aws\_mqtt\_client\_connection\_set\_login}}(}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client__connection}{aws\_mqtt\_client\_connection}} *connection,}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *\mbox{\hyperlink{connection__state__test_8c_a6e350427887d766b20857e72025d592c}{username}},}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *\mbox{\hyperlink{connection__state__test_8c_af7b550f3b3dbd60c52719a28b826fdd8}{password}});}

\end{DoxyCode}
 Sets the username and password to be sent to the server on connection. Must be called before {\ttfamily aws\+\_\+mqtt\+\_\+client\+\_\+connection\+\_\+connect}. {\ttfamily username} and {\ttfamily password} must persist past the call to {\ttfamily aws\+\_\+mqtt\+\_\+client\+\_\+connection\+\_\+connect}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int} \mbox{\hyperlink{client_8h_a1284ba84446c1160118dc004fba598ca}{aws\_mqtt\_client\_connection\_set\_reconnect\_timeout}}(}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client__connection}{aws\_mqtt\_client\_connection}} *connection,}
\DoxyCodeLine{    uint64\_t min\_timeout,}
\DoxyCodeLine{    uint64\_t max\_timeout);}

\end{DoxyCode}
 Sets the minimum and maximum reconnect timeouts. The time between reconnect attempts will start at min and multipy by 2 until max is reached.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int} \mbox{\hyperlink{client_8h_a9dcb8d15bf5b4efeeea0cb392ed76010}{aws\_mqtt\_client\_connection\_connect}}(}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client__connection}{aws\_mqtt\_client\_connection}} *connection,}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *\mbox{\hyperlink{structaws__mqtt__client__connection_acb667a754d1192e8b6dfe35e6c116298}{client\_id}},}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} \mbox{\hyperlink{structaws__mqtt__client__connection_a4d1982c5998709ded2bb4c8c189985b3}{clean\_session}},}
\DoxyCodeLine{    uint16\_t keep\_alive\_time);}

\end{DoxyCode}
 Connects to the remote endpoint. The parameters here are set in the MQTT CONNECT packet directly. {\ttfamily client\+\_\+id} must persist until the {\ttfamily on\+\_\+connack} connection callback is called.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int} \mbox{\hyperlink{client_8h_a818c8e4f3e72777e09e0ef8188c6f8c0}{aws\_mqtt\_client\_connection\_disconnect}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client__connection}{aws\_mqtt\_client\_connection}} *connection);}

\end{DoxyCode}
 Closes an open connection. Does not clean up any resources, that\textquotesingle{}s to be done by {\ttfamily aws\+\_\+mqtt\+\_\+client\+\_\+connection\+\_\+destroy}, probably from the {\ttfamily on\+\_\+disconnected} connection callback.


\begin{DoxyCode}{0}
\DoxyCodeLine{uint16\_t aws\_mqtt\_client\_connection\_subscribe\_single(}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client__connection}{aws\_mqtt\_client\_connection}} *connection,}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *topic\_filter,}
\DoxyCodeLine{    \textcolor{keyword}{enum} \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\_mqtt\_qos}} \mbox{\hyperlink{connection__state__test_8c_a65ee2b4b16f25052c441ff9959dcc7e7}{qos}},}
\DoxyCodeLine{    \mbox{\hyperlink{client_8h_a979def98388f4a6c7eb7de0c3c868555}{aws\_mqtt\_client\_publish\_received\_fn}} *\mbox{\hyperlink{topic__tree__test_8c_ad7276cd5ba4292cd3ff3633137b853f8}{on\_publish}},}
\DoxyCodeLine{    \textcolor{keywordtype}{void} *on\_publish\_ud,}
\DoxyCodeLine{    aws\_mqtt\_suback\_single\_fn *on\_suback,}
\DoxyCodeLine{    \textcolor{keywordtype}{void} *on\_suback\_ud);}

\end{DoxyCode}
 Subscribes to the topic filter given with the given QoS. {\ttfamily on\+\_\+publish} will be called whenever a packet matching {\ttfamily topic\+\_\+filter} arrives. {\ttfamily on\+\_\+suback} will be called when the SUBACK packet has been received. {\ttfamily topic\+\_\+filter} must persist until {\ttfamily on\+\_\+suback} is called. The packet\+\_\+id of the SUBSCRIBE packet will be returned, or 0 on error.


\begin{DoxyCode}{0}
\DoxyCodeLine{uint16\_t \mbox{\hyperlink{client_8h_a92292f9330f16c48a39fe2b09ae4381f}{aws\_mqtt\_client\_connection\_unsubscribe}}(}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client__connection}{aws\_mqtt\_client\_connection}} *connection,}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *topic\_filter,}
\DoxyCodeLine{    \mbox{\hyperlink{client_8h_ab798c331e8c9a78dcb6fb7f300d8b59d}{aws\_mqtt\_op\_complete\_fn}} *on\_unsuback,}
\DoxyCodeLine{    \textcolor{keywordtype}{void} *on\_unsuback\_ud);}

\end{DoxyCode}
 Unsubscribes from the topic filter given. {\ttfamily topic\+\_\+filter} must persist until {\ttfamily on\+\_\+unsuback} is called. The packet\+\_\+id of the UNSUBSCRIBE packet will be returned, or 0 on error.


\begin{DoxyCode}{0}
\DoxyCodeLine{uint16\_t \mbox{\hyperlink{client_8h_accba3c63a72807cabf69fcf11a831954}{aws\_mqtt\_client\_connection\_publish}}(}
\DoxyCodeLine{    \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client__connection}{aws\_mqtt\_client\_connection}} *connection,}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *\mbox{\hyperlink{connection__state__test_8c_ad99baabff61442b2d602f6dd84310f89}{topic}},}
\DoxyCodeLine{    \textcolor{keyword}{enum} \mbox{\hyperlink{mqtt_8h_a9c8e7e4cfbb7dcb3fc4a5402000998ce}{aws\_mqtt\_qos}} \mbox{\hyperlink{connection__state__test_8c_a65ee2b4b16f25052c441ff9959dcc7e7}{qos}},}
\DoxyCodeLine{    \textcolor{keywordtype}{bool} \mbox{\hyperlink{structaws__mqtt__client__connection_a0a9b0439fd195534e3f95f4c216e7711}{retain}},}
\DoxyCodeLine{    \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structaws__byte__cursor}{aws\_byte\_cursor}} *\mbox{\hyperlink{event__stream__rpc__server__connection__test_8c_ad1560a388c937f36f038c683175d82bf}{payload}},}
\DoxyCodeLine{    \mbox{\hyperlink{client_8h_ab798c331e8c9a78dcb6fb7f300d8b59d}{aws\_mqtt\_op\_complete\_fn}} *on\_complete,}
\DoxyCodeLine{    \textcolor{keywordtype}{void} *userdata);}

\end{DoxyCode}
 Publish a payload to the topic specified. For QoS 0, {\ttfamily on\+\_\+complete} will be called as soon as the packet is sent over the wire. For QoS 1, as soon as PUBACK comes back. For QoS 2, PUBCOMP. {\ttfamily topic} and {\ttfamily payload} must persist until {\ttfamily on\+\_\+complete}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int} \mbox{\hyperlink{client__impl_8h_ad1357fcdd5a328766f43781a2a7ddc01}{aws\_mqtt\_client\_connection\_ping}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structaws__mqtt__client__connection}{aws\_mqtt\_client\_connection}} *connection);}

\end{DoxyCode}
 Sends a PINGREQ packet to the server. 