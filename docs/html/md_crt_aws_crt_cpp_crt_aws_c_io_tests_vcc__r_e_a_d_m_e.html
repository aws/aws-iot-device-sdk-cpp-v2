<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Device SDK C++ v2: VCC Proofs of the Linux epoll event loop</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Device SDK C++ v2<span id="projectnumber">&#160;1.14.0</span>
   </div>
   <div id="projectbrief">AWS IoT Device SDK C++ v2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">VCC Proofs of the Linux epoll event loop </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This directory gives the specification and annotated source-code implementation of the Linux epoll event loop implementation of C-IO. See <code><a class="el" href="epoll__event__loop__proof_8md.html">docs/epoll_event_loop_proof.md</a></code> for an overview of the properties proven, assumptions and simplifications.</p>
<h1><a class="anchor" id="autotoc_md293"></a>
Reading the proofs</h1>
<p >The majority of the specification is given in the header file <code><a class="el" href="preamble_8h.html">preamble.h</a></code>, which specifies a contract (preconditions and postconditions) for each implementation function.</p>
<p >The proofs themselves are the source code of the Linux epoll event loop implementation with VCC annotations embedded alongside to guide VCC. We split the event loop functions over the following files:</p>
<ul>
<li><code><a class="el" href="cancel__task_8c.html">cancel_task.c</a></code></li>
<li><code><a class="el" href="is__on__callers__thread_8c.html">is_on_callers_thread.c</a></code></li>
<li><code><a class="el" href="lifecycle_8c.html">lifecycle.c</a></code></li>
<li><code><a class="el" href="main__loop_8c.html">main_loop.c</a></code></li>
<li><code><a class="el" href="new__destroy_8c.html">new_destroy.c</a></code></li>
<li><code><a class="el" href="process__task__pre__queue_8c.html">process_task_pre_queue.c</a></code></li>
<li><code><a class="el" href="schedule_8c.html">schedule.c</a></code></li>
<li><code><a class="el" href="subscribe_8c.html">subscribe.c</a></code></li>
<li><code><a class="el" href="unsubscribe_8c.html">unsubscribe.c</a></code></li>
</ul>
<p >Additionally, the file <code>client.c</code> shows some simple uses of the event loop API, demonstrating that the specifications can be used together in a meaningful way.</p>
<h1><a class="anchor" id="autotoc_md294"></a>
Running proof regression</h1>
<p >The following will check all proofs assuming VCC and make are on your path. For obtaining VCC, see the next section on building VCC in a Windows docker container. </p><pre class="fragment">    $ make
</pre> <h1><a class="anchor" id="autotoc_md295"></a>
VCC docker container</h1>
<p >I've tested the following on Windows 10 1809 with Docker Desktop 2.2.03.</p>
<ol type="1">
<li>Make sure that docker is running with Windows containers. Another good sanity check is to ensure <code>docker run hello-world</code> works as expected.</li>
<li>Build the image (this takes about 30 minutes) <pre class="fragment"> docker build -t vcc docker-images/win10-vs2012/
</pre></li>
<li>Run an interactive powershell in a container <pre class="fragment"> docker run -it vcc powershell
</pre></li>
<li>Inside the container check VCC works <pre class="fragment"> vcc "C:\vcc\vcc\Test\testsuite\examples3\ArrayList.c"
 Verification of ArrayList#adm succeeded.[1.36]
 Verification of Length succeeded. [0.01]
 Verification of CreateArrayList succeeded. [0.05]
 Verification of MakeEmpty succeeded. [0.03]
 Verification of Select succeeded. [0.02]
 Verification of Update succeeded. [0.05]
 Verification of DisposeArrayList succeeded. [0.03]
 Verification of Add succeeded. [0.44]
 Verification of main_test succeeded. [0.67]
</pre> </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
