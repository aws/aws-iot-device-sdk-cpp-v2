<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Device SDK C++ v2: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Device SDK C++ v2<span id="projectnumber">&#160;1.14.0</span>
   </div>
   <div id="projectbrief">AWS IoT Device SDK C++ v2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Overview </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >The files in this directory represent a cert hierarchy to test OCSP response stapling.</p>
<h1><a class="anchor" id="autotoc_md559"></a>
CA</h1>
<ul>
<li>ca_cert.pem</li>
<li>ca_key.pem</li>
</ul>
<p >Issuer for all of the other certs in the directory. Since this is a test PKI, we do an intermediate for issuing leaf cert(s).</p>
<h1><a class="anchor" id="autotoc_md560"></a>
OCSP</h1>
<ul>
<li>ocsp_cert.pem</li>
<li>ocsp_key.pem</li>
</ul>
<p >Cert/key for the test OCSP responder. OCSP responses will be signed by the key. The CN for this cert matches the URI in the Server Cert's "Authority Information Access" x509 extension.</p>
<h1><a class="anchor" id="autotoc_md561"></a>
Server Cert</h1>
<ul>
<li>server_cert.pem</li>
<li>server_key.pem</li>
</ul>
<p >The leaf cert/key. OCSP responses will be generated for this cert.</p>
<h1><a class="anchor" id="autotoc_md562"></a>
OCSP response</h1>
<ul>
<li>ocsp_response.der</li>
</ul>
<p >DER formatted OCSP response for the Server Cert. This file will be configured in s2n for stapling.</p>
<h1><a class="anchor" id="autotoc_md563"></a>
Generating a new OCSP response for the leaf cert</h1>
<p >Should not be necessary. The current response expires in 100 years.</p>
<p >From the current directory:</p>
<h2><a class="anchor" id="autotoc_md564"></a>
Run the server</h2>
<div class="fragment"><div class="line"># With nextUpdate</div>
<div class="line">openssl ocsp -port 8889 -text -CA ca_cert.pem \                                                                                                                                                             ocsp_test ✭ ✱ ◼</div>
<div class="line">      -index certs.txt \</div>
<div class="line">      -rkey ocsp_key.pem \</div>
<div class="line">      -rsigner ocsp_cert.pem \</div>
<div class="line">      -nrequest 1 \</div>
<div class="line">      -ndays $(( 365 * 100 ))</div>
<div class="line"> </div>
<div class="line"># Without nextUpdate</div>
<div class="line">openssl ocsp -port 8890 -text -CA ca_cert.pem \                                                                                                                                                             ocsp_test ✭ ✱ ◼</div>
<div class="line">      -index certs.txt \</div>
<div class="line">      -rkey ocsp_key.pem \</div>
<div class="line">      -rsigner ocsp_cert.pem \</div>
<div class="line">      -nrequest 1</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md565"></a>
Run the client and save the result to file</h2>
<div class="fragment"><div class="line"># With nextUpdate</div>
<div class="line">openssl ocsp -CAfile ca_cert.pem \                                                                                                                                                                          ocsp_test ✭ ✱ ◼</div>
<div class="line">      -url http://127.0.0.1:8889 \</div>
<div class="line">      -issuer ca_cert.pem \</div>
<div class="line">      -verify_other ocsp_cert.pem \</div>
<div class="line">      -cert server_cert.pem -respout ocsp_response.der</div>
<div class="line"># Without nextUpdate</div>
<div class="line">openssl ocsp -CAfile ca_cert.pem \                                                                                                                                                                          ocsp_test ✭ ✱ ◼</div>
<div class="line">      -url http://127.0.0.1:8890 \</div>
<div class="line">      -issuer ca_cert.pem \</div>
<div class="line">      -verify_other ocsp_cert.pem \</div>
<div class="line">      -cert server_cert.pem -respout ocsp_response_no_next_update.der</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
