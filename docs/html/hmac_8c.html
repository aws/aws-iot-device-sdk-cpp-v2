<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Device SDK C++ v2: crt/aws-crt-cpp/crt/aws-c-cal/source/hmac.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Device SDK C++ v2<span id="projectnumber">&#160;1.14.0</span>
   </div>
   <div id="projectbrief">AWS IoT Device SDK C++ v2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_affb495f978f3575eca2eeb81eb7736b.html">crt</a></li><li class="navelem"><a class="el" href="dir_eb065311872385a3a1227a6ede2c108c.html">aws-crt-cpp</a></li><li class="navelem"><a class="el" href="dir_c68d83f7493c97e50c45ec06f21e3081.html">crt</a></li><li class="navelem"><a class="el" href="dir_1447128601600366046c9b90d6f78eda.html">aws-c-cal</a></li><li class="navelem"><a class="el" href="dir_bfaea8fd767f87cdf1deb68b144b46e2.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">hmac.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h_source.html">aws/cal/hmac.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2a75179fa3671f67e910908180bbb138"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structaws__hmac.html">aws_hmac</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hmac_8c.html#a2a75179fa3671f67e910908180bbb138">aws_sha256_hmac_default_new</a> (struct aws_allocator *allocator, const struct aws_byte_cursor *secret)</td></tr>
<tr class="separator:a2a75179fa3671f67e910908180bbb138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcb9b61391f31ba0c3680fa8e60284df"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structaws__hmac.html">aws_hmac</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hmac_8c.html#abcb9b61391f31ba0c3680fa8e60284df">aws_sha256_hmac_new</a> (struct aws_allocator *allocator, const struct aws_byte_cursor *secret)</td></tr>
<tr class="separator:abcb9b61391f31ba0c3680fa8e60284df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a967b9bd94a7fe04075dac4c407c9cf00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hmac_8c.html#a967b9bd94a7fe04075dac4c407c9cf00">aws_set_sha256_hmac_new_fn</a> (<a class="el" href="crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h.html#aab6815d6797ca8ea2d161f4300cee717">aws_hmac_new_fn</a> *fn)</td></tr>
<tr class="separator:a967b9bd94a7fe04075dac4c407c9cf00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54d5f607578696985c587286736581da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hmac_8c.html#a54d5f607578696985c587286736581da">aws_hmac_destroy</a> (struct <a class="el" href="structaws__hmac.html">aws_hmac</a> *hmac)</td></tr>
<tr class="separator:a54d5f607578696985c587286736581da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a843ee14b212f355c45ad4fb22df58484"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hmac_8c.html#a843ee14b212f355c45ad4fb22df58484">aws_hmac_update</a> (struct <a class="el" href="structaws__hmac.html">aws_hmac</a> *hmac, const struct aws_byte_cursor *to_hmac)</td></tr>
<tr class="separator:a843ee14b212f355c45ad4fb22df58484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1f3b6bab8bc50cc70e8f91d93ad5e6a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hmac_8c.html#ab1f3b6bab8bc50cc70e8f91d93ad5e6a">aws_hmac_finalize</a> (struct <a class="el" href="structaws__hmac.html">aws_hmac</a> *hmac, struct aws_byte_buf *output, size_t truncate_to)</td></tr>
<tr class="separator:ab1f3b6bab8bc50cc70e8f91d93ad5e6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af87b0d8cfc70baa70921221d074c2e4a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hmac_8c.html#af87b0d8cfc70baa70921221d074c2e4a">aws_sha256_hmac_compute</a> (struct aws_allocator *allocator, const struct aws_byte_cursor *secret, const struct aws_byte_cursor *to_hmac, struct aws_byte_buf *output, size_t truncate_to)</td></tr>
<tr class="separator:af87b0d8cfc70baa70921221d074c2e4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aabe683949f1f785d366bd7a2dd0d1241"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h.html#aab6815d6797ca8ea2d161f4300cee717">aws_hmac_new_fn</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hmac_8c.html#aabe683949f1f785d366bd7a2dd0d1241">s_sha256_hmac_new_fn</a> = <a class="el" href="bcrypt__hmac_8c.html#a2a75179fa3671f67e910908180bbb138">aws_sha256_hmac_default_new</a></td></tr>
<tr class="separator:aabe683949f1f785d366bd7a2dd0d1241"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a54d5f607578696985c587286736581da" name="a54d5f607578696985c587286736581da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54d5f607578696985c587286736581da">&#9670;&nbsp;</a></span>aws_hmac_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_hmac_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__hmac.html">aws_hmac</a> *&#160;</td>
          <td class="paramname"><em>hmac</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Cleans up and deallocates hmac. </p>

</div>
</div>
<a id="ab1f3b6bab8bc50cc70e8f91d93ad5e6a" name="ab1f3b6bab8bc50cc70e8f91d93ad5e6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1f3b6bab8bc50cc70e8f91d93ad5e6a">&#9670;&nbsp;</a></span>aws_hmac_finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_hmac_finalize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__hmac.html">aws_hmac</a> *&#160;</td>
          <td class="paramname"><em>hmac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_byte_buf *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>truncate_to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Completes the hmac computation and writes the final digest to output. Allocation of output is the caller's responsibility. If you specify truncate_to to something other than 0, the output will be truncated to that number of bytes. For example if you want a SHA256 digest as the first 16 bytes, set truncate_to to 16. If you want the full digest size, just set this to 0. </p>

</div>
</div>
<a id="a843ee14b212f355c45ad4fb22df58484" name="a843ee14b212f355c45ad4fb22df58484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a843ee14b212f355c45ad4fb22df58484">&#9670;&nbsp;</a></span>aws_hmac_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_hmac_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__hmac.html">aws_hmac</a> *&#160;</td>
          <td class="paramname"><em>hmac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_byte_cursor *&#160;</td>
          <td class="paramname"><em>to_hmac</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Updates the running hmac with to_hash. this can be called multiple times. </p>

</div>
</div>
<a id="a967b9bd94a7fe04075dac4c407c9cf00" name="a967b9bd94a7fe04075dac4c407c9cf00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a967b9bd94a7fe04075dac4c407c9cf00">&#9670;&nbsp;</a></span>aws_set_sha256_hmac_new_fn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_set_sha256_hmac_new_fn </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h.html#aab6815d6797ca8ea2d161f4300cee717">aws_hmac_new_fn</a> *&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Set the implementation of sha256 hmac to use. If you compiled without AWS_BYO_CRYPTO, you do not need to call this. However, if use this, we will honor it, regardless of compile options. This may be useful for testing purposes. If you did set AWS_BYO_CRYPTO, and you do not call this function you will segfault. </p>

</div>
</div>
<a id="af87b0d8cfc70baa70921221d074c2e4a" name="af87b0d8cfc70baa70921221d074c2e4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af87b0d8cfc70baa70921221d074c2e4a">&#9670;&nbsp;</a></span>aws_sha256_hmac_compute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_sha256_hmac_compute </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>allocator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_byte_cursor *&#160;</td>
          <td class="paramname"><em>secret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_byte_cursor *&#160;</td>
          <td class="paramname"><em>to_hmac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_byte_buf *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>truncate_to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Computes the sha256 hmac over input and writes the digest output to 'output'. Use this if you don't need to stream the data you're hashing and you can load the entire input to hash into memory. If you specify truncate_to to something other than 0, the output will be truncated to that number of bytes. For example if you want a SHA256 HMAC digest as the first 16 bytes, set truncate_to to 16. If you want the full digest size, just set this to 0. </p>

</div>
</div>
<a id="a2a75179fa3671f67e910908180bbb138" name="a2a75179fa3671f67e910908180bbb138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a75179fa3671f67e910908180bbb138">&#9670;&nbsp;</a></span>aws_sha256_hmac_default_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structaws__hmac.html">aws_hmac</a>* aws_sha256_hmac_default_new </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>allocator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_byte_cursor *&#160;</td>
          <td class="paramname"><em>secret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved. SPDX-License-Identifier: Apache-2.0. </p>

</div>
</div>
<a id="abcb9b61391f31ba0c3680fa8e60284df" name="abcb9b61391f31ba0c3680fa8e60284df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcb9b61391f31ba0c3680fa8e60284df">&#9670;&nbsp;</a></span>aws_sha256_hmac_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structaws__hmac.html">aws_hmac</a>* aws_sha256_hmac_new </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>allocator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_byte_cursor *&#160;</td>
          <td class="paramname"><em>secret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Allocates and initializes a sha256 hmac instance. Secret is the key to be used for the hmac process. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aabe683949f1f785d366bd7a2dd0d1241" name="aabe683949f1f785d366bd7a2dd0d1241"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabe683949f1f785d366bd7a2dd0d1241">&#9670;&nbsp;</a></span>s_sha256_hmac_new_fn</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="crt_2aws-c-cal_2include_2aws_2cal_2_h_m_a_c_8h.html#aab6815d6797ca8ea2d161f4300cee717">aws_hmac_new_fn</a>* s_sha256_hmac_new_fn = <a class="el" href="bcrypt__hmac_8c.html#a2a75179fa3671f67e910908180bbb138">aws_sha256_hmac_default_new</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
