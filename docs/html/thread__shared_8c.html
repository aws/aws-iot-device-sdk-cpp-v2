<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Device SDK C++ v2: crt/aws-crt-cpp/crt/aws-c-common/source/thread_shared.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Device SDK C++ v2<span id="projectnumber">&#160;1.14.0</span>
   </div>
   <div id="projectbrief">AWS IoT Device SDK C++ v2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_affb495f978f3575eca2eeb81eb7736b.html">crt</a></li><li class="navelem"><a class="el" href="dir_eb065311872385a3a1227a6ede2c108c.html">aws-crt-cpp</a></li><li class="navelem"><a class="el" href="dir_c68d83f7493c97e50c45ec06f21e3081.html">crt</a></li><li class="navelem"><a class="el" href="dir_fab3a90bc3065fb2d7dcf327c1e16d97.html">aws-c-common</a></li><li class="navelem"><a class="el" href="dir_942ba0e0f995b77b354a106627731e0f.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">thread_shared.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="thread__shared_8h_source.html">aws/common/private/thread_shared.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="clock_8h_source.html">aws/common/clock.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="condition__variable_8h_source.html">aws/common/condition_variable.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="linked__list_8h_source.html">aws/common/linked_list.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="mutex_8h_source.html">aws/common/mutex.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9da00f418d9b4c83332da9e54f4b2004"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#a9da00f418d9b4c83332da9e54f4b2004">aws_thread_increment_unjoined_count</a> (void)</td></tr>
<tr class="separator:a9da00f418d9b4c83332da9e54f4b2004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf5afe0e8f3efb85e50463bf982aadb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#adf5afe0e8f3efb85e50463bf982aadb2">aws_thread_decrement_unjoined_count</a> (void)</td></tr>
<tr class="separator:adf5afe0e8f3efb85e50463bf982aadb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5964ea886be0e3dbe0b9c11c551c10ab"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#a5964ea886be0e3dbe0b9c11c551c10ab">aws_thread_get_managed_thread_count</a> (void)</td></tr>
<tr class="separator:a5964ea886be0e3dbe0b9c11c551c10ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cf207b79f6340376378ebf9f71cddcb"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#a2cf207b79f6340376378ebf9f71cddcb">s_one_or_fewer_managed_threads_unjoined</a> (void *context)</td></tr>
<tr class="separator:a2cf207b79f6340376378ebf9f71cddcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8781779571eb88f647ebba5b42f9195"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#aa8781779571eb88f647ebba5b42f9195">aws_thread_set_managed_join_timeout_ns</a> (uint64_t timeout_in_ns)</td></tr>
<tr class="separator:aa8781779571eb88f647ebba5b42f9195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab267e689cf8788a0a9ea6dcfcba68f93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#ab267e689cf8788a0a9ea6dcfcba68f93">aws_thread_join_all_managed</a> (void)</td></tr>
<tr class="separator:ab267e689cf8788a0a9ea6dcfcba68f93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a172ba4846672754862f3975320ff731b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#a172ba4846672754862f3975320ff731b">aws_thread_pending_join_add</a> (struct <a class="el" href="structaws__linked__list__node.html">aws_linked_list_node</a> *node)</td></tr>
<tr class="separator:a172ba4846672754862f3975320ff731b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e58b9aeb25ae61f11861dd6b9c8a008"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#a3e58b9aeb25ae61f11861dd6b9c8a008">aws_thread_initialize_thread_management</a> (void)</td></tr>
<tr class="separator:a3e58b9aeb25ae61f11861dd6b9c8a008"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6530298433ef493bb48c379bf9277dc1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structaws__mutex.html">aws_mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#a6530298433ef493bb48c379bf9277dc1">s_managed_thread_lock</a> = <a class="el" href="mutex_8h.html#a82cd305754a1424bf8139695ab9dd6e1">AWS_MUTEX_INIT</a></td></tr>
<tr class="separator:a6530298433ef493bb48c379bf9277dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa26ff297fe492ebf89e345bdaf5e481d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structaws__condition__variable.html">aws_condition_variable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#aa26ff297fe492ebf89e345bdaf5e481d">s_managed_thread_signal</a> = <a class="el" href="condition__variable_8h.html#a5effb5909f01b8f646e71f1a11e31657">AWS_CONDITION_VARIABLE_INIT</a></td></tr>
<tr class="separator:aa26ff297fe492ebf89e345bdaf5e481d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4587069005778410917324866c56604c"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#a4587069005778410917324866c56604c">s_default_managed_join_timeout_ns</a> = 0</td></tr>
<tr class="separator:a4587069005778410917324866c56604c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fe230ba9ddb1f035cf73ab82f56ec23"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#a8fe230ba9ddb1f035cf73ab82f56ec23">s_unjoined_thread_count</a> = 0</td></tr>
<tr class="separator:a8fe230ba9ddb1f035cf73ab82f56ec23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e1e935f5add7d96877d2044acd84496"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structaws__linked__list.html">aws_linked_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__shared_8c.html#a9e1e935f5add7d96877d2044acd84496">s_pending_join_managed_threads</a></td></tr>
<tr class="separator:a9e1e935f5add7d96877d2044acd84496"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="adf5afe0e8f3efb85e50463bf982aadb2" name="adf5afe0e8f3efb85e50463bf982aadb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf5afe0e8f3efb85e50463bf982aadb2">&#9670;&nbsp;</a></span>aws_thread_decrement_unjoined_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_thread_decrement_unjoined_count </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Decrements the count of unjoined threads in the managed thread system. Used by managed threads and event loop threads. Additional usage requires the user to join corresponding threads themselves and correctly increment/decrement even in the face of launch/join errors.</p>
<p ><a class="el" href="thread_8h.html#ad070f3a4af8c56037362ccbae6720091">aws_thread_join_all_managed()</a> will not return until this count has gone to zero. </p>

</div>
</div>
<a id="a5964ea886be0e3dbe0b9c11c551c10ab" name="a5964ea886be0e3dbe0b9c11c551c10ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5964ea886be0e3dbe0b9c11c551c10ab">&#9670;&nbsp;</a></span>aws_thread_get_managed_thread_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t aws_thread_get_managed_thread_count </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Gets the current managed thread count </p>

</div>
</div>
<a id="a9da00f418d9b4c83332da9e54f4b2004" name="a9da00f418d9b4c83332da9e54f4b2004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9da00f418d9b4c83332da9e54f4b2004">&#9670;&nbsp;</a></span>aws_thread_increment_unjoined_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_thread_increment_unjoined_count </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Increments the count of unjoined threads in the managed thread system. Used by managed threads and event loop threads. Additional usage requires the user to join corresponding threads themselves and correctly increment/decrement even in the face of launch/join errors.</p>
<p ><a class="el" href="thread_8h.html#ad070f3a4af8c56037362ccbae6720091">aws_thread_join_all_managed()</a> will not return until this count has gone to zero. </p>

</div>
</div>
<a id="a3e58b9aeb25ae61f11861dd6b9c8a008" name="a3e58b9aeb25ae61f11861dd6b9c8a008"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e58b9aeb25ae61f11861dd6b9c8a008">&#9670;&nbsp;</a></span>aws_thread_initialize_thread_management()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_thread_initialize_thread_management </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initializes the managed thread system. Called during library init. </p>

</div>
</div>
<a id="ab267e689cf8788a0a9ea6dcfcba68f93" name="ab267e689cf8788a0a9ea6dcfcba68f93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab267e689cf8788a0a9ea6dcfcba68f93">&#9670;&nbsp;</a></span>aws_thread_join_all_managed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_thread_join_all_managed </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Blocking call that waits for all managed threads to complete their join call. This can only be called from the main thread or a non-managed thread.</p>
<p >This gets called automatically from library cleanup.</p>
<p >By default the wait is unbounded, but that default can be overridden via <a class="el" href="thread_8h.html#a2a3937766e7167ed28b2e74ef403e80a">aws_thread_set_managed_join_timeout_ns()</a> </p>

</div>
</div>
<a id="a172ba4846672754862f3975320ff731b" name="a172ba4846672754862f3975320ff731b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a172ba4846672754862f3975320ff731b">&#9670;&nbsp;</a></span>aws_thread_pending_join_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_thread_pending_join_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__linked__list__node.html">aws_linked_list_node</a> *&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Adds a thread (wrapper embedding a linked list node) to the global list of threads that have run to completion and need a join in order to know that the OS has truly finished with the thread. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>linked list node embedded in the thread wrapper </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa8781779571eb88f647ebba5b42f9195" name="aa8781779571eb88f647ebba5b42f9195"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8781779571eb88f647ebba5b42f9195">&#9670;&nbsp;</a></span>aws_thread_set_managed_join_timeout_ns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_thread_set_managed_join_timeout_ns </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>timeout_in_ns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Overrides how long, in nanoseconds, that aws_thread_join_all_managed will wait for threads to complete. A value of zero will result in an unbounded wait. </p>

</div>
</div>
<a id="a2cf207b79f6340376378ebf9f71cddcb" name="a2cf207b79f6340376378ebf9f71cddcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cf207b79f6340376378ebf9f71cddcb">&#9670;&nbsp;</a></span>s_one_or_fewer_managed_threads_unjoined()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool s_one_or_fewer_managed_threads_unjoined </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a4587069005778410917324866c56604c" name="a4587069005778410917324866c56604c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4587069005778410917324866c56604c">&#9670;&nbsp;</a></span>s_default_managed_join_timeout_ns</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t s_default_managed_join_timeout_ns = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6530298433ef493bb48c379bf9277dc1" name="a6530298433ef493bb48c379bf9277dc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6530298433ef493bb48c379bf9277dc1">&#9670;&nbsp;</a></span>s_managed_thread_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structaws__mutex.html">aws_mutex</a> s_managed_thread_lock = <a class="el" href="mutex_8h.html#a82cd305754a1424bf8139695ab9dd6e1">AWS_MUTEX_INIT</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved. SPDX-License-Identifier: Apache-2.0. </p>

</div>
</div>
<a id="aa26ff297fe492ebf89e345bdaf5e481d" name="aa26ff297fe492ebf89e345bdaf5e481d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa26ff297fe492ebf89e345bdaf5e481d">&#9670;&nbsp;</a></span>s_managed_thread_signal</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structaws__condition__variable.html">aws_condition_variable</a> s_managed_thread_signal = <a class="el" href="condition__variable_8h.html#a5effb5909f01b8f646e71f1a11e31657">AWS_CONDITION_VARIABLE_INIT</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9e1e935f5add7d96877d2044acd84496" name="a9e1e935f5add7d96877d2044acd84496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e1e935f5add7d96877d2044acd84496">&#9670;&nbsp;</a></span>s_pending_join_managed_threads</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structaws__linked__list.html">aws_linked_list</a> s_pending_join_managed_threads</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8fe230ba9ddb1f035cf73ab82f56ec23" name="a8fe230ba9ddb1f035cf73ab82f56ec23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fe230ba9ddb1f035cf73ab82f56ec23">&#9670;&nbsp;</a></span>s_unjoined_thread_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t s_unjoined_thread_count = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
