<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Device SDK C++ v2: AWS C MQTT</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Device SDK C++ v2<span id="projectnumber">&#160;1.14.0</span>
   </div>
   <div id="projectbrief">AWS IoT Device SDK C++ v2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">AWS C MQTT </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >C99 implementation of the MQTT 3.1.1 specification.</p>
<h1><a class="anchor" id="autotoc_md187"></a>
License</h1>
<p >This library is licensed under the Apache 2.0 License.</p>
<h1><a class="anchor" id="autotoc_md188"></a>
Usage</h1>
<h2><a class="anchor" id="autotoc_md189"></a>
Building</h2>
<h3><a class="anchor" id="autotoc_md190"></a>
Building s2n (Linux Only)</h3>
<p >If you are building on Linux, you will need to build s2n before being able to build aws-c-io, which is a dependency of aws-c-mqtt. For our CRT's, we build s2n at a specific commit, and recommend doing the same when using it with this library. That commit hash can be found <a href="https://github.com/awslabs/aws-crt-cpp/tree/main/aws-common-runtime">here</a>. The commands below will build s2n using OpenSSL 1.1.1. For using other versions of OpenSSL, there is additional information in the <a href="https://github.com/awslabs/s2n/blob/main/docs/USAGE-GUIDE.md">s2n Usage Guide</a>.</p>
<div class="fragment"><div class="line">git clone git@github.com:awslabs/s2n.git</div>
<div class="line">cd s2n</div>
<div class="line">git checkout &lt;s2n-commit-hash-used-by-aws-crt-cpp&gt;</div>
<div class="line"> </div>
<div class="line"># We keep the build artifacts in the -build directory</div>
<div class="line">cd libcrypto-build</div>
<div class="line"> </div>
<div class="line"># Download the latest version of OpenSSL</div>
<div class="line">curl -LO https://www.openssl.org/source/openssl-1.1.1-latest.tar.gz</div>
<div class="line">tar -xzvf openssl-1.1.1-latest.tar.gz</div>
<div class="line"> </div>
<div class="line"># Build openssl libcrypto.  Note that the install path specified here must be absolute.</div>
<div class="line">cd `tar ztf openssl-1.1.1-latest.tar.gz | head -n1 | cut -f1 -d/`</div>
<div class="line">./config -fPIC no-shared              \</div>
<div class="line">         no-md2 no-rc5 no-rfc3779 no-sctp no-ssl-trace no-zlib     \</div>
<div class="line">         no-hw no-mdc2 no-seed no-idea enable-ec_nistp_64_gcc_128 no-camellia\</div>
<div class="line">         no-bf no-ripemd no-dsa no-ssl2 no-ssl3 no-capieng                  \</div>
<div class="line">         -DSSL_FORBID_ENULL -DOPENSSL_NO_DTLS1 -DOPENSSL_NO_HEARTBEATS      \</div>
<div class="line">         --prefix=&lt;absolute-install-path&gt;</div>
<div class="line">make</div>
<div class="line">make install</div>
<div class="line"> </div>
<div class="line"># Build s2n</div>
<div class="line">cd ../../../</div>
<div class="line">cmake -DCMAKE_PREFIX_PATH=&lt;install-path&gt; -DCMAKE_INSTALL_PREFIX=&lt;install-path&gt; -S s2n -B s2n/build</div>
<div class="line">cmake --build s2n/build --target install</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md191"></a>
Building aws-c-mqtt and Remaining Dependencies</h3>
<p >Note that aws-c-mqtt has several dependencies that need to be built.</p>
<div class="fragment"><div class="line">git clone git@github.com:awslabs/aws-c-common.git</div>
<div class="line">cmake -DCMAKE_PREFIX_PATH=&lt;install-path&gt; -DCMAKE_INSTALL_PREFIX=&lt;install-path&gt; -S aws-c-common -B aws-c-common/build</div>
<div class="line">cmake --build aws-c-common/build --target install</div>
<div class="line"> </div>
<div class="line">git clone git@github.com:awslabs/aws-c-io.git</div>
<div class="line">cmake -DCMAKE_PREFIX_PATH=&lt;install-path&gt; -DCMAKE_INSTALL_PREFIX=&lt;install-path&gt; -S aws-c-io -B aws-c-io/build</div>
<div class="line">cmake --build aws-c-io/build --target install</div>
<div class="line"> </div>
<div class="line">git clone git@github.com:awslabs/aws-c-compression.git</div>
<div class="line">cmake -DCMAKE_PREFIX_PATH=&lt;install-path&gt; -DCMAKE_INSTALL_PREFIX=&lt;install-path&gt; -S aws-c-compression -B aws-c-compression/build</div>
<div class="line">cmake --build aws-c-compression/build --target install</div>
<div class="line"> </div>
<div class="line">git clone git@github.com:awslabs/aws-c-http.git</div>
<div class="line">cmake -DCMAKE_PREFIX_PATH=&lt;install-path&gt; -DCMAKE_INSTALL_PREFIX=&lt;install-path&gt; -S aws-c-http -B aws-c-http/build</div>
<div class="line">cmake --build aws-c-http/build --target install</div>
<div class="line"> </div>
<div class="line">git clone git@github.com:awslabs/aws-c-mqtt.git</div>
<div class="line">cmake -DCMAKE_PREFIX_PATH=&lt;install-path&gt; -DCMAKE_INSTALL_PREFIX=&lt;install-path&gt; -S aws-c-mqtt -B aws-c-mqtt/build</div>
<div class="line">cmake --build aws-c-mqtt/build --target install</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md192"></a>
Overview</h2>
<p >This library contains an MQTT implementation that is simple and easy to use, but also quite powerful and low on unnecessary copies. Here is a general overview of the API:</p>
<h2><a class="anchor" id="autotoc_md193"></a>
&lt;tt&gt;struct aws_mqtt_client;&lt;/tt&gt;</h2>
<p ><code><a class="el" href="structaws__mqtt__client.html">aws_mqtt_client</a></code> is meant to be created once per application to pool common resources required for opening MQTT connections. The instance does not need to be allocated, and may be managed by the user.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> aws_mqtt_client_init(</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client.html">aws_mqtt_client</a> *client,</div>
<div class="line">    <span class="keyword">struct</span> aws_allocator *allocator,</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__event__loop__group.html">aws_event_loop_group</a> *elg);</div>
<div class="ttc" id="astructaws__event__loop__group_html"><div class="ttname"><a href="structaws__event__loop__group.html">aws_event_loop_group</a></div><div class="ttdef"><b>Definition:</b> event_loop.h:116</div></div>
<div class="ttc" id="astructaws__mqtt__client_html"><div class="ttname"><a href="structaws__mqtt__client.html">aws_mqtt_client</a></div><div class="ttdef"><b>Definition:</b> client.h:28</div></div>
</div><!-- fragment --><p> Initializes an instance of <code><a class="el" href="structaws__mqtt__client.html">aws_mqtt_client</a></code> with the required parameters.</p><ul>
<li><code>client</code> is effectively the <code>this</code> parameter.</li>
<li><code>allocator</code> will be used to initialize the client (note that the client itself is NOT allocated). <em>This resource must outlive <code>client</code></em>.</li>
<li><code>bootstrap</code> will be used to initiate new socket connections MQTT. <em>This resource must outlive <code>client</code></em>. See <a href="https://github.com/awslabs/aws-c-io">aws-c-io</a> for more information about <code><a class="el" href="structaws__client__bootstrap.html">aws_client_bootstrap</a></code>.</li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> aws_mqtt_client_clean_up(<span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client.html">aws_mqtt_client</a> *client);</div>
</div><!-- fragment --><p> Cleans up a client and frees all owned resources.</p>
<p ><b>NOTE</b>: DO NOT CALL THIS FUNCTION UNTIL ALL OUTSTANDING CONNECTIONS ARE CLOSED.</p>
<h2><a class="anchor" id="autotoc_md194"></a>
&lt;tt&gt;struct aws_mqtt_client_connection;&lt;/tt&gt;</h2>
<div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a> *<a class="code hl_function" href="client_8h.html#a74d960a25b25e4a270984406990700b0">aws_mqtt_client_connection_new</a>(</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client.html">aws_mqtt_client</a> *<a class="code hl_variable" href="structaws__mqtt__client__connection.html#a3f549d2ea074f1cc3eef29a54d8d83fa">client</a>,</div>
<div class="line">    <span class="keyword">struct</span> aws_mqtt_client_connection_callbacks callbacks,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> aws_byte_cursor *<a class="code hl_variable" href="structaws__mqtt__client__connection.html#a6b8e1f35069a9faeea6c881488ab1027">host_name</a>,</div>
<div class="line">    uint16_t <a class="code hl_variable" href="structaws__mqtt__client__connection.html#a097c9141cfe4aba7957dcadc0184d2ff">port</a>,</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__socket__options.html">aws_socket_options</a> *<a class="code hl_variable" href="structaws__mqtt__client__connection.html#a62b983e2f4541b7c17c8b067b49d916d">socket_options</a>,</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__tls__ctx__options.html">aws_tls_ctx_options</a> *<a class="code hl_variable" href="structaws__mqtt__client__connection.html#aa57d70413a56ea7af5013e2e5db62512">tls_options</a>);</div>
<div class="ttc" id="aclient_8h_html_a74d960a25b25e4a270984406990700b0"><div class="ttname"><a href="client_8h.html#a74d960a25b25e4a270984406990700b0">aws_mqtt_client_connection_new</a></div><div class="ttdeci">AWS_MQTT_API struct aws_mqtt_client_connection * aws_mqtt_client_connection_new(struct aws_mqtt_client *client)</div><div class="ttdef"><b>Definition:</b> client.c:699</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html"><div class="ttname"><a href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a></div><div class="ttdef"><b>Definition:</b> client_impl.h:118</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_a097c9141cfe4aba7957dcadc0184d2ff"><div class="ttname"><a href="structaws__mqtt__client__connection.html#a097c9141cfe4aba7957dcadc0184d2ff">aws_mqtt_client_connection::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> client_impl.h:130</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_a3f549d2ea074f1cc3eef29a54d8d83fa"><div class="ttname"><a href="structaws__mqtt__client__connection.html#a3f549d2ea074f1cc3eef29a54d8d83fa">aws_mqtt_client_connection::client</a></div><div class="ttdeci">struct aws_mqtt_client * client</div><div class="ttdef"><b>Definition:</b> client_impl.h:122</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_a62b983e2f4541b7c17c8b067b49d916d"><div class="ttname"><a href="structaws__mqtt__client__connection.html#a62b983e2f4541b7c17c8b067b49d916d">aws_mqtt_client_connection::socket_options</a></div><div class="ttdeci">struct aws_socket_options socket_options</div><div class="ttdef"><b>Definition:</b> client_impl.h:132</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_a6b8e1f35069a9faeea6c881488ab1027"><div class="ttname"><a href="structaws__mqtt__client__connection.html#a6b8e1f35069a9faeea6c881488ab1027">aws_mqtt_client_connection::host_name</a></div><div class="ttdeci">struct aws_string * host_name</div><div class="ttdef"><b>Definition:</b> client_impl.h:129</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_aa57d70413a56ea7af5013e2e5db62512"><div class="ttname"><a href="structaws__mqtt__client__connection.html#aa57d70413a56ea7af5013e2e5db62512">aws_mqtt_client_connection::tls_options</a></div><div class="ttdeci">struct aws_tls_connection_options tls_options</div><div class="ttdef"><b>Definition:</b> client_impl.h:131</div></div>
<div class="ttc" id="astructaws__socket__options_html"><div class="ttname"><a href="structaws__socket__options.html">aws_socket_options</a></div><div class="ttdef"><b>Definition:</b> socket.h:31</div></div>
<div class="ttc" id="astructaws__tls__ctx__options_html"><div class="ttname"><a href="structaws__tls__ctx__options.html">aws_tls_ctx_options</a></div><div class="ttdef"><b>Definition:</b> tls_channel_handler.h:95</div></div>
</div><!-- fragment --><p> Allocates and initializes a new connection object (does NOT actually connect). You may use the returned object to configure connection parameters, and then call <code>aws_mqtt_client_connection_connect</code> to actually open the connection.</p><ul>
<li><code>client</code> is required in order to use an existing DNS resolver, event loop group, and allocator.</li>
<li><code>callbacks</code> provides the connection-level (not operation level) callbacks and the userdata to be given back.</li>
<li><code>host_name</code> lists the end point to connect to. This may be a DNS address or an IP address. <em>This resource may be freed immediately after return.</em></li>
<li><code>port</code> the port to connect to on <code>host_name</code>.</li>
<li><code>socket_options</code> describes how to open the connection. See <a href="https://github.com/awslabs/aws-c-io">aws-c-io</a> for more information about <code><a class="el" href="structaws__socket__options.html">aws_socket_options</a></code>.</li>
<li><code>tls_options</code> provides TLS credentials to connect with. Pass <code>NULL</code> to not use TLS (<b>NOT RECOMMENDED</b>). See <a href="https://github.com/awslabs/aws-c-io">aws-c-io</a> for more information about <code><a class="el" href="structaws__tls__ctx__options.html">aws_tls_ctx_options</a></code>.</li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> aws_mqtt_client_connection_destroy(<span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a> *connection);</div>
</div><!-- fragment --><p> Destroys a connection and frees all outstanding resources.</p>
<p ><b>NOTE</b>: DO NOT CALL THIS FUNCTION UNTIL THE CONNECTION IS CLOSED.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="client_8h.html#a62b3d8c85a2613fa1051b1c80b884cad">aws_mqtt_client_connection_set_will</a>(</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a> *connection,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> aws_byte_cursor *<a class="code hl_variable" href="structaws__mqtt__client__connection.html#a8beb4d40f151fdeb2f630cfebeac924e">topic</a>,</div>
<div class="line">    <span class="keyword">enum</span> <a class="code hl_enumeration" href="mqtt_8h.html#a9c8e7e4cfbb7dcb3fc4a5402000998ce">aws_mqtt_qos</a> <a class="code hl_variable" href="structaws__mqtt__client__connection.html#a5d116e4c37220a9397199e27e90b8bba">qos</a>,</div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structaws__mqtt__client__connection.html#a0a9b0439fd195534e3f95f4c216e7711">retain</a>,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> aws_byte_cursor *<a class="code hl_variable" href="structaws__mqtt__client__connection.html#ae79a30c3c428a546b220b93553ec3a75">payload</a>);</div>
<div class="ttc" id="aclient_8h_html_a62b3d8c85a2613fa1051b1c80b884cad"><div class="ttname"><a href="client_8h.html#a62b3d8c85a2613fa1051b1c80b884cad">aws_mqtt_client_connection_set_will</a></div><div class="ttdeci">AWS_MQTT_API int aws_mqtt_client_connection_set_will(struct aws_mqtt_client_connection *connection, const struct aws_byte_cursor *topic, enum aws_mqtt_qos qos, bool retain, const struct aws_byte_cursor *payload)</div><div class="ttdef"><b>Definition:</b> client.c:833</div></div>
<div class="ttc" id="amqtt_8h_html_a9c8e7e4cfbb7dcb3fc4a5402000998ce"><div class="ttname"><a href="mqtt_8h.html#a9c8e7e4cfbb7dcb3fc4a5402000998ce">aws_mqtt_qos</a></div><div class="ttdeci">aws_mqtt_qos</div><div class="ttdef"><b>Definition:</b> mqtt.h:17</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_a0a9b0439fd195534e3f95f4c216e7711"><div class="ttname"><a href="structaws__mqtt__client__connection.html#a0a9b0439fd195534e3f95f4c216e7711">aws_mqtt_client_connection::retain</a></div><div class="ttdeci">bool retain</div><div class="ttdef"><b>Definition:</b> client_impl.h:144</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_a5d116e4c37220a9397199e27e90b8bba"><div class="ttname"><a href="structaws__mqtt__client__connection.html#a5d116e4c37220a9397199e27e90b8bba">aws_mqtt_client_connection::qos</a></div><div class="ttdeci">enum aws_mqtt_qos qos</div><div class="ttdef"><b>Definition:</b> client_impl.h:143</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_a8beb4d40f151fdeb2f630cfebeac924e"><div class="ttname"><a href="structaws__mqtt__client__connection.html#a8beb4d40f151fdeb2f630cfebeac924e">aws_mqtt_client_connection::topic</a></div><div class="ttdeci">struct aws_byte_buf topic</div><div class="ttdef"><b>Definition:</b> client_impl.h:142</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_ae79a30c3c428a546b220b93553ec3a75"><div class="ttname"><a href="structaws__mqtt__client__connection.html#ae79a30c3c428a546b220b93553ec3a75">aws_mqtt_client_connection::payload</a></div><div class="ttdeci">struct aws_byte_buf payload</div><div class="ttdef"><b>Definition:</b> client_impl.h:145</div></div>
</div><!-- fragment --><p> Sets the last will and testament to be distributed by the server upon client disconnection. Must be called before <code>aws_mqtt_client_connection_connect</code>. See <code>aws_mqtt_client_connection_publish</code> for information on the parameters. <code>topic</code> and <code>payload</code> must persist past the call to <code>aws_mqtt_client_connection_connect</code>.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="client_8h.html#a9334da6046ba4c7c54bc9d102f1159da">aws_mqtt_client_connection_set_login</a>(</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a> *connection,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> aws_byte_cursor *<a class="code hl_variable" href="structaws__mqtt__client__connection.html#aeaaf60b787337e2d69db65a5e9f51f1d">username</a>,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> aws_byte_cursor *<a class="code hl_variable" href="structaws__mqtt__client__connection.html#a87b9ffc0a328a668199840189e1f8e6a">password</a>);</div>
<div class="ttc" id="aclient_8h_html_a9334da6046ba4c7c54bc9d102f1159da"><div class="ttname"><a href="client_8h.html#a9334da6046ba4c7c54bc9d102f1159da">aws_mqtt_client_connection_set_login</a></div><div class="ttdeci">AWS_MQTT_API int aws_mqtt_client_connection_set_login(struct aws_mqtt_client_connection *connection, const struct aws_byte_cursor *username, const struct aws_byte_cursor *password)</div><div class="ttdef"><b>Definition:</b> client.c:898</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_a87b9ffc0a328a668199840189e1f8e6a"><div class="ttname"><a href="structaws__mqtt__client__connection.html#a87b9ffc0a328a668199840189e1f8e6a">aws_mqtt_client_connection::password</a></div><div class="ttdeci">struct aws_string * password</div><div class="ttdef"><b>Definition:</b> client_impl.h:140</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_aeaaf60b787337e2d69db65a5e9f51f1d"><div class="ttname"><a href="structaws__mqtt__client__connection.html#aeaaf60b787337e2d69db65a5e9f51f1d">aws_mqtt_client_connection::username</a></div><div class="ttdeci">struct aws_string * username</div><div class="ttdef"><b>Definition:</b> client_impl.h:139</div></div>
</div><!-- fragment --><p> Sets the username and password to be sent to the server on connection. Must be called before <code>aws_mqtt_client_connection_connect</code>. <code>username</code> and <code>password</code> must persist past the call to <code>aws_mqtt_client_connection_connect</code>.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="client_8h.html#a1284ba84446c1160118dc004fba598ca">aws_mqtt_client_connection_set_reconnect_timeout</a>(</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a> *connection,</div>
<div class="line">    uint64_t min_timeout,</div>
<div class="line">    uint64_t max_timeout);</div>
<div class="ttc" id="aclient_8h_html_a1284ba84446c1160118dc004fba598ca"><div class="ttname"><a href="client_8h.html#a1284ba84446c1160118dc004fba598ca">aws_mqtt_client_connection_set_reconnect_timeout</a></div><div class="ttdeci">AWS_MQTT_API int aws_mqtt_client_connection_set_reconnect_timeout(struct aws_mqtt_client_connection *connection, uint64_t min_timeout, uint64_t max_timeout)</div><div class="ttdef"><b>Definition:</b> client.c:951</div></div>
</div><!-- fragment --><p> Sets the minimum and maximum reconnect timeouts. The time between reconnect attempts will start at min and multipy by 2 until max is reached.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="client_8h.html#a9dcb8d15bf5b4efeeea0cb392ed76010">aws_mqtt_client_connection_connect</a>(</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a> *connection,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> aws_byte_cursor *<a class="code hl_variable" href="structaws__mqtt__client__connection.html#acb667a754d1192e8b6dfe35e6c116298">client_id</a>,</div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structaws__mqtt__client__connection.html#a4d1982c5998709ded2bb4c8c189985b3">clean_session</a>,</div>
<div class="line">    uint16_t keep_alive_time);</div>
<div class="ttc" id="aclient_8h_html_a9dcb8d15bf5b4efeeea0cb392ed76010"><div class="ttname"><a href="client_8h.html#a9dcb8d15bf5b4efeeea0cb392ed76010">aws_mqtt_client_connection_connect</a></div><div class="ttdeci">AWS_MQTT_API int aws_mqtt_client_connection_connect(struct aws_mqtt_client_connection *connection, const struct aws_mqtt_connection_options *connection_options)</div><div class="ttdef"><b>Definition:</b> client.c:1342</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_a4d1982c5998709ded2bb4c8c189985b3"><div class="ttname"><a href="structaws__mqtt__client__connection.html#a4d1982c5998709ded2bb4c8c189985b3">aws_mqtt_client_connection::clean_session</a></div><div class="ttdeci">bool clean_session</div><div class="ttdef"><b>Definition:</b> client_impl.h:136</div></div>
<div class="ttc" id="astructaws__mqtt__client__connection_html_acb667a754d1192e8b6dfe35e6c116298"><div class="ttname"><a href="structaws__mqtt__client__connection.html#acb667a754d1192e8b6dfe35e6c116298">aws_mqtt_client_connection::client_id</a></div><div class="ttdeci">struct aws_byte_buf client_id</div><div class="ttdef"><b>Definition:</b> client_impl.h:135</div></div>
</div><!-- fragment --><p> Connects to the remote endpoint. The parameters here are set in the MQTT CONNECT packet directly. <code>client_id</code> must persist until the <code>on_connack</code> connection callback is called.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="client_8h.html#a818c8e4f3e72777e09e0ef8188c6f8c0">aws_mqtt_client_connection_disconnect</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a> *connection);</div>
<div class="ttc" id="aclient_8h_html_a818c8e4f3e72777e09e0ef8188c6f8c0"><div class="ttname"><a href="client_8h.html#a818c8e4f3e72777e09e0ef8188c6f8c0">aws_mqtt_client_connection_disconnect</a></div><div class="ttdeci">AWS_MQTT_API int aws_mqtt_client_connection_disconnect(struct aws_mqtt_client_connection *connection, aws_mqtt_client_on_disconnect_fn *on_disconnect, void *userdata)</div><div class="ttdef"><b>Definition:</b> client.c:1587</div></div>
</div><!-- fragment --><p> Closes an open connection. Does not clean up any resources, that's to be done by <code>aws_mqtt_client_connection_destroy</code>, probably from the <code>on_disconnected</code> connection callback.</p>
<div class="fragment"><div class="line">uint16_t aws_mqtt_client_connection_subscribe_single(</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a> *connection,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> aws_byte_cursor *topic_filter,</div>
<div class="line">    <span class="keyword">enum</span> <a class="code hl_enumeration" href="mqtt_8h.html#a9c8e7e4cfbb7dcb3fc4a5402000998ce">aws_mqtt_qos</a> <a class="code hl_variable" href="structaws__mqtt__client__connection.html#a5d116e4c37220a9397199e27e90b8bba">qos</a>,</div>
<div class="line">    <a class="code hl_typedef" href="client_8h.html#a979def98388f4a6c7eb7de0c3c868555">aws_mqtt_client_publish_received_fn</a> *on_publish,</div>
<div class="line">    <span class="keywordtype">void</span> *on_publish_ud,</div>
<div class="line">    aws_mqtt_suback_single_fn *on_suback,</div>
<div class="line">    <span class="keywordtype">void</span> *on_suback_ud);</div>
<div class="ttc" id="aclient_8h_html_a979def98388f4a6c7eb7de0c3c868555"><div class="ttname"><a href="client_8h.html#a979def98388f4a6c7eb7de0c3c868555">aws_mqtt_client_publish_received_fn</a></div><div class="ttdeci">void() aws_mqtt_client_publish_received_fn(struct aws_mqtt_client_connection *connection, const struct aws_byte_cursor *topic, const struct aws_byte_cursor *payload, bool dup, enum aws_mqtt_qos qos, bool retain, void *userdata)</div><div class="ttdef"><b>Definition:</b> client.h:112</div></div>
</div><!-- fragment --><p> Subscribes to the topic filter given with the given QoS. <code>on_publish</code> will be called whenever a packet matching <code>topic_filter</code> arrives. <code>on_suback</code> will be called when the SUBACK packet has been received. <code>topic_filter</code> must persist until <code>on_suback</code> is called. The packet_id of the SUBSCRIBE packet will be returned, or 0 on error.</p>
<div class="fragment"><div class="line">uint16_t <a class="code hl_function" href="client_8h.html#a92292f9330f16c48a39fe2b09ae4381f">aws_mqtt_client_connection_unsubscribe</a>(</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a> *connection,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> aws_byte_cursor *topic_filter,</div>
<div class="line">    <a class="code hl_typedef" href="client_8h.html#ab798c331e8c9a78dcb6fb7f300d8b59d">aws_mqtt_op_complete_fn</a> *on_unsuback,</div>
<div class="line">    <span class="keywordtype">void</span> *on_unsuback_ud);</div>
<div class="ttc" id="aclient_8h_html_a92292f9330f16c48a39fe2b09ae4381f"><div class="ttname"><a href="client_8h.html#a92292f9330f16c48a39fe2b09ae4381f">aws_mqtt_client_connection_unsubscribe</a></div><div class="ttdeci">AWS_MQTT_API uint16_t aws_mqtt_client_connection_unsubscribe(struct aws_mqtt_client_connection *connection, const struct aws_byte_cursor *topic_filter, aws_mqtt_op_complete_fn *on_unsuback, void *on_unsuback_ud)</div><div class="ttdef"><b>Definition:</b> client.c:2489</div></div>
<div class="ttc" id="aclient_8h_html_ab798c331e8c9a78dcb6fb7f300d8b59d"><div class="ttname"><a href="client_8h.html#ab798c331e8c9a78dcb6fb7f300d8b59d">aws_mqtt_op_complete_fn</a></div><div class="ttdeci">void() aws_mqtt_op_complete_fn(struct aws_mqtt_client_connection *connection, uint16_t packet_id, int error_code, void *userdata)</div><div class="ttdef"><b>Definition:</b> client.h:40</div></div>
</div><!-- fragment --><p> Unsubscribes from the topic filter given. <code>topic_filter</code> must persist until <code>on_unsuback</code> is called. The packet_id of the UNSUBSCRIBE packet will be returned, or 0 on error.</p>
<div class="fragment"><div class="line">uint16_t <a class="code hl_function" href="client_8h.html#accba3c63a72807cabf69fcf11a831954">aws_mqtt_client_connection_publish</a>(</div>
<div class="line">    <span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a> *connection,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> aws_byte_cursor *<a class="code hl_variable" href="structaws__mqtt__client__connection.html#a8beb4d40f151fdeb2f630cfebeac924e">topic</a>,</div>
<div class="line">    <span class="keyword">enum</span> <a class="code hl_enumeration" href="mqtt_8h.html#a9c8e7e4cfbb7dcb3fc4a5402000998ce">aws_mqtt_qos</a> <a class="code hl_variable" href="structaws__mqtt__client__connection.html#a5d116e4c37220a9397199e27e90b8bba">qos</a>,</div>
<div class="line">    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structaws__mqtt__client__connection.html#a0a9b0439fd195534e3f95f4c216e7711">retain</a>,</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">struct</span> aws_byte_cursor *<a class="code hl_variable" href="structaws__mqtt__client__connection.html#ae79a30c3c428a546b220b93553ec3a75">payload</a>,</div>
<div class="line">    <a class="code hl_typedef" href="client_8h.html#ab798c331e8c9a78dcb6fb7f300d8b59d">aws_mqtt_op_complete_fn</a> *on_complete,</div>
<div class="line">    <span class="keywordtype">void</span> *userdata);</div>
<div class="ttc" id="aclient_8h_html_accba3c63a72807cabf69fcf11a831954"><div class="ttname"><a href="client_8h.html#accba3c63a72807cabf69fcf11a831954">aws_mqtt_client_connection_publish</a></div><div class="ttdeci">AWS_MQTT_API uint16_t aws_mqtt_client_connection_publish(struct aws_mqtt_client_connection *connection, const struct aws_byte_cursor *topic, enum aws_mqtt_qos qos, bool retain, const struct aws_byte_cursor *payload, aws_mqtt_op_complete_fn *on_complete, void *userdata)</div><div class="ttdef"><b>Definition:</b> client.c:2680</div></div>
</div><!-- fragment --><p> Publish a payload to the topic specified. For QoS 0, <code>on_complete</code> will be called as soon as the packet is sent over the wire. For QoS 1, as soon as PUBACK comes back. For QoS 2, PUBCOMP. <code>topic</code> and <code>payload</code> must persist until <code>on_complete</code>.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="client__impl_8h.html#ad1357fcdd5a328766f43781a2a7ddc01">aws_mqtt_client_connection_ping</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="structaws__mqtt__client__connection.html">aws_mqtt_client_connection</a> *connection);</div>
<div class="ttc" id="aclient__impl_8h_html_ad1357fcdd5a328766f43781a2a7ddc01"><div class="ttname"><a href="client__impl_8h.html#ad1357fcdd5a328766f43781a2a7ddc01">aws_mqtt_client_connection_ping</a></div><div class="ttdeci">int aws_mqtt_client_connection_ping(struct aws_mqtt_client_connection *connection)</div><div class="ttdef"><b>Definition:</b> client.c:2817</div></div>
</div><!-- fragment --><p> Sends a PINGREQ packet to the server. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
