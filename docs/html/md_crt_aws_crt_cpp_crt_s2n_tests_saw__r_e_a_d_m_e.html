<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Device SDK C++ v2: SAW tests for s2n</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Device SDK C++ v2<span id="projectnumber">&#160;1.14.0</span>
   </div>
   <div id="projectbrief">AWS IoT Device SDK C++ v2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">SAW tests for s2n </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This repository contains specifications of the various parts of the HMAC algorithm used in TLS along with SAW scripts to prove the s2n implementation of this algorithm equivalent to the spec.</p>
<h1><a class="anchor" id="autotoc_md573"></a>
The tests</h1>
<p >Currently this directory houses a test that compares the s2n implementation of HMAC with a cryptol spec of the same. There are 3 files that take part in this test.</p>
<ol type="1">
<li>bitcode/all_llvm.bc</li>
<li>spec/HMAC.cry</li>
<li>spec/HMAC.saw</li>
</ol>
<p >all_llvm.bc contains linked llvm bitcode definitions for the entirity of s2n/crypto. This bitcode is not currently linked with code from the other directories in s2n, because so far, those directories have not contained code necessary for verification.</p>
<p >HMAC.cry is a <a href="http://www.cryptol.net/">Cryptol</a> specification/implementation of HMAC. Cryptol can be seen as an implementation because it is executable. It can be given a message and a key as input, and produce output. It is a specification because the cryptol language looks like the mathematical language that cryptographers like to specify cryptograpy in. It does not have many of the safety risks that a C program has, and it is typically much easier to read and understand than a C program.</p>
<p >HMAC.saw is a <a href="https://github.com/GaloisInc/saw-script">SAWScript</a> file that defines the relationship between the previous two files. It defines an equivalence between the HMAC functions that live in all_llvm.bc and the HMAC functions that are in HMAC.cry. It then gives instructions for how automated solvers can be used to prove this equivalence. When run with the command <code>saw HMAC.saw</code>, this file loads in the other two and proves the HMAC files equivalent.</p>
<h1><a class="anchor" id="autotoc_md574"></a>
The build</h1>
<p >Running the saw tests will require a SAW executable, which must be able to find the Yices and Z3 provers on the path. Future examples might require further installation of provers. The build will also require clang, which is not currently a necessary prerequisite for s2n.</p>
<p >We have integrated the build of this test into the s2n build. Right now, the steps for a build are (files that do the work are listed in parenthesis):</p>
<ol type="1">
<li>patch s2n to prepare it for SAW, when necessary (currently not necessary) (s2n/Makefile)</li>
<li>compile all files in s2n/crypto to llvm bitcode (located in s2n/tests/saw/bitcode) using the clang compiler, (s2n/crypto/Makefile, sn2/s2n.mk)</li>
<li>link the files in s2n/tests/saw/bitcode into all_llvm.bc using llvm-link (s2n/crypto/Makefile)</li>
<li>enter the test directory and run all of the saw scripts that are in the s2n/tests/saw directory, checking and logging the results (s2n/Makefile, s2n/tests/makefile, s2n/tests/saw) and</li>
<li>enable cleaning for compiled bitcode and test logs. all bitcode (.bc) in any source directories will be cleaned, but logs (.log) will only be cleaned out of the saw directory. On recommendation, it's trivial to switch the behavior for either. (s2n/tests/Makefile, s2n/tests/saw)</li>
</ol>
<p >With the exception of step 5 (<code>make clean</code>), all of these steps are run by running <code>make saw</code> in the s2n root directory. The only modification needed for a Travis script is to install Yices and Z3, download SAW, and run the SAW make target. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
